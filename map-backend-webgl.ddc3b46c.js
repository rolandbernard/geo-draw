"use strict";(self.webpackChunkgeo_draw=self.webpackChunkgeo_draw||[]).push([[238],{964:(e,t,r)=>{r.r(t);var n=r(168),a=r(942),o=r(671),i=r(144),s=r(340),l=r(215),u=r(120),f=r(392),c=r(885),h=function(){function e(){(0,o.Z)(this,e)}return(0,i.Z)(e,[{key:"project",value:function(){return!0}},{key:"clientPosToMapPos",value:function(e,t,r){var n=this.generateTranslateAndScale(r),a=(0,c.Z)(n,2),o=(a[0],a[1]),i=[2*(e[0]-t.x)/t.width-1,1-2*(e[1]-t.y)/t.height];return[i[0]/o[0]+r.center[0],i[1]/o[1]+r.center[1]]}},{key:"clientPosToProjPos",value:function(e,t,r){var n=this.generateTranslateAndScale(r),a=(0,c.Z)(n,2),o=a[0],i=a[1],s=[2*(e[0]-t.x)/t.width-1,1-2*(e[1]-t.y)/t.height];return[s[0]/i[0]-o[0],s[1]/i[1]-o[1]]}},{key:"projPosToClientPos",value:function(e,t,r){var n=this.generateTranslateAndScale(r),a=(0,c.Z)(n,2),o=a[0],i=a[1],s=[(e[0]+o[0])*i[0],(e[1]+o[1])*i[1]];return[(s[0]+1)/2*t.width+t.x,(1-s[1])/2*t.height+t.y]}},{key:"generateTranslateAndScale",value:function(e){var t=e.min,r=e.max,n=e.size,a=e.center,o=e.scale,i=r[0]-t[0],s=r[1]-t[1];return i/n[0]>s/n[1]?[[-t[0]-i/2-a[0],-t[1]-s/2-a[1]],[2/i*o,n[0]/n[1]*-2/i*o],[1*Math.cbrt(o),Math.cbrt(o)*-n[0]/n[1]]]:[[-t[0]-i/2-a[0],-t[1]-s/2-a[1]],[n[1]/n[0]*2/s*o,-2/s*o],[Math.cbrt(o)*n[1]/n[0],-1*Math.cbrt(o)]]}},{key:"createShaderProgram",value:function(e,t,r){var n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,t),e.compileShader(n);var a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,r),e.compileShader(a);var o=e.createProgram();return e.attachShader(o,n),e.attachShader(o,a),e.linkProgram(o),o}},{key:"initForContext",value:function(e,t,r,n){t.getExtension("OES_element_index_uint");var a=this.createShaderProgram(t,"\nattribute vec2 aVertexPosition;\nattribute float aVertexColor;\n\nuniform vec2 uTranslate;\nuniform vec2 uScale;\nuniform sampler2D uColors;\n\nvarying vec3 vPixelColor;\n\nvoid main() {\n    vPixelColor = texture2D(uColors, vec2(aVertexColor, 0.5)).xyz;\n    gl_Position = vec4((aVertexPosition + uTranslate) * uScale, 0.0, 1.0);\n}\n\n","\n#ifdef GL_ES\n    precision highp float;\n#endif\n\nvarying vec3 vPixelColor;\n\nvoid main() {\n    gl_FragColor = vec4(vPixelColor, 1.0);\n}\n\n"),o=t.getAttribLocation(a,"aVertexPosition"),i=t.getAttribLocation(a,"aVertexColor"),s=t.getUniformLocation(a,"uTranslate"),l=t.getUniformLocation(a,"uScale"),u=t.getUniformLocation(a,"uColors"),f=this.createShaderProgram(t,"\nattribute vec2 aVertexPosition;\nattribute vec2 aVertexNormal;\n\nuniform vec2 uTranslate;\nuniform vec2 uScale;\nuniform vec2 uStrokeScale;\nuniform float uWidth;\n\nvoid main() {\n    gl_Position = vec4(\n        (aVertexPosition + uTranslate) * uScale\n        + normalize(aVertexNormal) * uWidth * uStrokeScale,\n        0.0, 1.0\n    );\n}\n\n","\n#ifdef GL_ES\n    precision highp float;\n#endif\n\nuniform vec3 uStrokeColor;\n\nvoid main() {\n    gl_FragColor = vec4(uStrokeColor, 1.0);\n}\n\n"),c=t.getAttribLocation(f,"aVertexPosition"),h=t.getAttribLocation(f,"aVertexNormal"),d=t.getUniformLocation(f,"uTranslate"),_=t.getUniformLocation(f,"uScale"),v=t.getUniformLocation(f,"uStrokeScale"),m=t.getUniformLocation(f,"uWidth"),g=t.getUniformLocation(f,"uStrokeColor"),b=t.createTexture();t.bindTexture(t.TEXTURE_2D,b),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);var p=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,p),t.bufferData(t.ARRAY_BUFFER,n.vertex,t.STATIC_DRAW);var x=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,x),t.bufferData(t.ARRAY_BUFFER,n.color,t.STATIC_DRAW);var P=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,P),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n.triangles,t.STATIC_DRAW);var T=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,T),t.bufferData(t.ARRAY_BUFFER,n.outline_triangles,t.STATIC_DRAW);var R=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,R),t.bufferData(t.ARRAY_BUFFER,n.outline_normals,t.STATIC_DRAW),this.webgl_data={canvas:e,context:t,fill_data:{shader_program:a,position_attribute:o,color_attribute:i,translate_uniform:s,scale_uniform:l,colors_uniform:u},stroke_data:{shader_program:f,position_attribute:c,normal_attribute:h,translate_uniform:d,scale_uniform:_,scale2_uniform:v,width_uniform:m,color_uniform:g},triangles:{position_buffer:p,color_buffer:x,index_buffer:P,texture:b,outline_position_buffer:T,outline_normal_buffer:R}}}},{key:"deinitResources",value:function(e,t){var r;if(null!==(r=this.webgl_data)&&void 0!==r&&r.context){var n=this.webgl_data.context;n.deleteTexture(this.webgl_data.triangles.texture),n.deleteBuffer(this.webgl_data.triangles.position_buffer),n.deleteBuffer(this.webgl_data.triangles.color_buffer),n.deleteBuffer(this.webgl_data.triangles.index_buffer),n.deleteBuffer(this.webgl_data.triangles.outline_position_buffer),n.deleteBuffer(this.webgl_data.triangles.outline_normal_buffer),n.getAttachedShaders(this.webgl_data.fill_data.shader_program).forEach((function(e){n.deleteShader(e)})),n.deleteProgram(this.webgl_data.fill_data.shader_program),n.getAttachedShaders(this.webgl_data.stroke_data.shader_program).forEach((function(e){n.deleteShader(e)})),n.deleteProgram(this.webgl_data.stroke_data.shader_program)}}},{key:"renderMapInContext",value:function(e,t,r){var n=this.webgl_data.context,a=this.webgl_data.fill_data,o=this.webgl_data.stroke_data,i=this.webgl_data.triangles,s=this.generateTranslateAndScale(r),l=(0,c.Z)(s,3),u=l[0],f=l[1],h=l[2];n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT);for(var d=new Uint8Array(4*e.length),_=0;_<e.length;_++){for(var v=0;v<3;v++)d[4*_+v]=e[_].color[v],e[_].id===r.hover&&(d[4*_+v]*=.8);d[4*_+3]=255}n.bindTexture(n.TEXTURE_2D,i.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e.length,1,0,n.RGBA,n.UNSIGNED_BYTE,d),n.useProgram(a.shader_program),n.uniform2fv(a.translate_uniform,u),n.uniform2fv(a.scale_uniform,f),n.uniform1i(a.colors_uniform,0),n.bindBuffer(n.ARRAY_BUFFER,i.position_buffer),n.vertexAttribPointer(a.position_attribute,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(a.position_attribute),n.bindBuffer(n.ARRAY_BUFFER,i.color_buffer),n.vertexAttribPointer(a.color_attribute,1,n.FLOAT,!1,0,0),n.enableVertexAttribArray(a.color_attribute),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i.index_buffer),n.drawElements(n.TRIANGLES,t.triangles.length,n.UNSIGNED_INT,0),n.useProgram(o.shader_program),n.uniform2fv(o.translate_uniform,u),n.uniform2fv(o.scale_uniform,f),n.uniform2fv(o.scale2_uniform,h),n.uniform1f(o.width_uniform,.0025),n.uniform3fv(o.color_uniform,[.271,.302,.38]),n.bindBuffer(n.ARRAY_BUFFER,i.outline_normal_buffer),n.vertexAttribPointer(o.normal_attribute,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(o.normal_attribute),n.bindBuffer(n.ARRAY_BUFFER,i.outline_position_buffer),n.vertexAttribPointer(o.position_attribute,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(o.position_attribute),n.drawArrays(n.TRIANGLES,0,t.outline_triangles.length/2)}}]),e}(),d=r(752);var _,v,m=function(e){(0,s.Z)(a,e);var t,r,n=(t=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(r){var a=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function a(){return(0,o.Z)(this,a),n.apply(this,arguments)}return(0,i.Z)(a,[{key:"project",value:function(){return!1}},{key:"clientPosToSpherePos",value:function(e,t,r){var n=this.generateScale(r),a=[(2*(e[0]-t.x)/t.width-1)/n[0],(1-2*(e[1]-t.y)/t.height)/n[1],0];if(a[2]=1-a[0]*a[0]-a[1]*a[1],a[2]<0){var o=Math.sqrt(a[0]*a[0]+a[1]*a[1]);a[0]/=o,a[1]/=o,a[2]=0}else a[2]=Math.sqrt(a[2]);return a}},{key:"clientPosToSomePos",value:function(e,t,r){var n=this.clientPosToSpherePos(e,t,r),a=this.mat3VecMul(this.generateTransform(r),n);return[Math.atan2(a[0],a[2]),Math.atan2(a[1],Math.sqrt(a[0]*a[0]+a[2]*a[2]))]}},{key:"normalizeAround",value:function(e,t){return e<t-Math.PI?e+2*Math.PI*Math.floor((t+Math.PI-e)/(2*Math.PI)):e>t+Math.PI?e-2*Math.PI*Math.floor((e+Math.PI-t)/(2*Math.PI)):e}},{key:"clientPosToMapPos",value:function(e,t,r){var n=r.center,a=this.clientPosToSpherePos(e,t,r),o=n[1]+Math.atan2(a[1],Math.sqrt(a[0]*a[0]+a[2]*a[2])),i=this.clientPosToSomePos(e,t,r);return[this.normalizeAround(i[0],n[0]),o]}},{key:"clientPosToProjPos",value:function(e,t,r){return this.normalizePosition(this.clientPosToSomePos(e,t,r))}},{key:"projPosToClientPos",value:function(e,t,r){var n=[Math.cos(e[1])*Math.sin(e[0]),Math.sin(e[1]),Math.cos(e[1])*Math.cos(e[0])],a=this.mat3VecMul(this.generateInverseTransform(r),n);if(a[2]<0){var o=Math.sqrt(a[0]*a[0]+a[1]*a[1]);a[0]/=o,a[1]/=o,a[2]=0}var i=this.generateScale(r);return[(a[0]*i[0]+1)/2*t.width+t.x,(1-a[1]*i[1])/2*t.height+t.y]}},{key:"generateScale",value:function(e){var t=e.size,r=e.scale;return t[0]<t[1]?[r,t[0]/t[1]*r]:[t[1]/t[0]*r,r]}},{key:"mat3Mul",value:function(e,t){for(var r=[0,0,0,0,0,0,0,0,0],n=0;n<3;n++)for(var a=0;a<3;a++)for(var o=0;o<3;o++)r[3*n+a]+=e[3*n+o]*t[3*o+a];return r}},{key:"mat3VecMul",value:function(e,t){for(var r=[0,0,0],n=0;n<3;n++)for(var a=0;a<3;a++)r[n]+=e[3*a+n]*t[a];return r}},{key:"mat3Rotation",value:function(e,t){var r=[0,0,0,0,0,0,0,0,0];return r[3*e+e]=1,r[(e+1)%3*3+(e+1)%3]=Math.cos(t),r[(e+2)%3*3+(e+1)%3]=Math.sin(t),r[(e+1)%3*3+(e+2)%3]=-Math.sin(t),r[(e+2)%3*3+(e+2)%3]=Math.cos(t),r}},{key:"generateTransform",value:function(e){var t=e.center;return this.mat3Mul(this.mat3Rotation(0,t[1]),this.mat3Rotation(1,-t[0]))}},{key:"generateInverseTransform",value:function(e){var t=e.center;return this.mat3Mul(this.mat3Rotation(1,t[0]),this.mat3Rotation(0,-t[1]))}},{key:"normalizePosition",value:function(e){var t=(0,c.Z)(e,2),r=t[0],n=t[1];return n=(n+Math.PI)%(2*Math.PI),(n=(2*Math.PI+n)%(2*Math.PI)-Math.PI)<-Math.PI/2?(r+=Math.PI,n=Math.abs(-Math.PI/2-n)-Math.PI/2):n>Math.PI/2&&(r+=Math.PI,n=Math.PI/2-Math.abs(n-Math.PI/2)),r=(r+Math.PI)%(2*Math.PI),[(r=(2*Math.PI+r)%(2*Math.PI))-Math.PI,n]}},{key:"generateTexMinMax",value:function(e){var t,r=e.center,n=this.generateScale(e),a=this.normalizePosition(r),o=(0,c.Z)(a,2),i=o[0],s=o[1];if(1/(n[0]*n[0])+1/(n[1]*n[1])>1)t=Math.abs(s)<.1?[[.5+i/Math.PI/2-.26,0],[.5+i/Math.PI/2+.26,1]]:s<0?[[0,0],[1,1+s/Math.PI]]:[[0,s/Math.PI],[1,1]];else if(.5-Math.abs(s)/Math.PI<Math.max(.05,.5/n[1]))t=s<0?[[0,0],[1,1+s/Math.PI]]:[[0,s/Math.PI],[1,1]];else{var l=Math.min(.25,.25*(1+(Math.abs(s)/Math.PI>.4?3:1)*Math.abs(s))/n[0]),u=Math.min(.25,.25*(1+Math.abs(s))/n[1]);t=[[.5+i/Math.PI/2-l,.5+s/Math.PI-2*u],[.5+i/Math.PI/2+l,.5+s/Math.PI+2*u]]}return t[0][0]=(1+t[0][0]%1)%1,t[1][0]=(1+t[1][0]%1)%1,t[1][0]<=t[0][0]&&(t[1][0]+=1),t[0][1]=Math.min(1,Math.max(0,t[0][1])),t[1][1]=Math.min(1,Math.max(0,t[1][1])),t}},{key:"initForContext",value:function(e,t,r,n){(0,d.Z)((0,u.Z)(a.prototype),"initForContext",this).call(this,e,t,r,n);var o=t.createTexture();t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,4096,2048,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);var i=this.createShaderProgram(t,"\nattribute vec2 aVertexPosition;\n\nuniform vec2 uScale;\n\nvarying vec2 vPixelPos;\n\nvoid main() {\n    vPixelPos = aVertexPosition;\n    gl_Position = vec4(uScale * aVertexPosition, 0.0, 1.0);\n}\n\n","\n#ifdef GL_ES\n    precision highp float;\n#endif\n\n#define PI 3.1415926538\n\nuniform sampler2D uSampler;\nuniform vec2 uTexMin;\nuniform vec2 uTexMax;\nuniform mat3 uTransform;\nuniform float uScaleZ;\n\nvarying vec2 vPixelPos;\n\nfloat fmod(float a, float b) {\n    return a - (b * floor(a / b));\n}\n\nvec2 normalizePosition(vec2 pos) {\n    pos.y = fmod(pos.y + PI, 2.0 * PI);\n    pos.y = fmod(2.0 * PI + pos.y, 2.0 * PI) - PI;\n    if (pos.y < -PI / 2.0) {\n        pos.x += PI;\n        pos.y = abs(-PI / 2.0 - pos.y) - PI / 2.0;\n    } else if (pos.y > PI / 2.0) {\n        pos.x += PI;\n        pos.y = PI / 2.0 - abs(pos.y - PI / 2.0);\n    }\n    pos.x = fmod(pos.x + PI, 2.0 * PI);\n    pos.x = fmod(2.0 * PI + pos.x, 2.0 * PI);\n    return vec2(pos.x - PI, pos.y);\n}\n\nvec3 spherePosition() {\n    vec3 pos = vec3(vPixelPos, 0.0);\n    pos.z = 1.0 - pos.x*pos.x - pos.y*pos.y;\n    if (pos.z < 0.0) {\n        float dist = sqrt(pos.x*pos.x + pos.y*pos.y);\n        pos.x /= dist;\n        pos.y /= dist;\n        pos.z = 0.0;\n    } else {\n        pos.z = sqrt(pos.z);\n    }\n    return pos;\n}\n\nvec2 texPosition(vec3 pos) {\n    pos = uTransform * pos;\n    vec2 coord = vec2(\n        atan(pos.x, pos.z),\n        atan(pos.y, sqrt(pos.x*pos.x + pos.z*pos.z))\n    );\n    vec2 lonlat = normalizePosition(coord);\n    return vec2((lonlat.x + PI) / (2.0 * PI), (lonlat.y + PI / 2.0) / PI);\n}\n\nfloat computeLight(vec3 pos, bool water) {\n    vec3 light = normalize(vec3(-1.0, 1.0, 3.0));\n    float c = max(0.0, dot(light, pos));\n    float a = max(0.0, dot(vec3(0.0, 0.0, 1.0), reflect(-light, pos)));\n    a *= a;\n    if (water) {\n        return c * 0.7 + a * 0.1 + 0.2;\n    } else {\n        return c * 0.5 + a * 0.3 + 0.2;\n    }\n}\n\nvec3 waterColor(vec3 pos) {\n    return vec3(0.0, 0.2, 0.4);\n}\n\nvoid main() {\n    bool water = false;\n    vec3 pos = spherePosition();\n    float dist = vPixelPos.x * vPixelPos.x + vPixelPos.y * vPixelPos.y;\n    float edge = (dist - 1.0) * (dist - 1.0);\n    vec2 texCoord = texPosition(pos);\n    if (uTexMin.x <= 1.0 + texCoord.x && uTexMax.x >= 1.0 + texCoord.x) {\n        vec2 texPos = vec2(\n            (texCoord.x + 1.0 - uTexMin.x) / (uTexMax.x - uTexMin.x),\n            (texCoord.y - uTexMin.y) / (uTexMax.y - uTexMin.y)\n        );\n        gl_FragColor = texture2D(uSampler, texPos);\n    } else {\n        vec2 texPos = vec2(\n            (texCoord.x - uTexMin.x) / (uTexMax.x - uTexMin.x),\n            (texCoord.y - uTexMin.y) / (uTexMax.y - uTexMin.y)\n        );\n        gl_FragColor = texture2D(uSampler, texPos);\n    }\n    if (length(gl_FragColor) == 0.0) {\n        gl_FragColor = vec4(waterColor(pos), 1.0);\n        water = true;\n    }\n    if (dist >= 1.0) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n    float f = 0.5 * exp(-1.0e4 * edge);\n    gl_FragColor = (1.0 - f) * gl_FragColor + f * vec4(0.5, 0.75, 1.0, 1.0);\n    if (dist < 1.0) {\n        float f = 0.1 * exp(-1.0 / (2.0 - pos.z) * uScaleZ) + 0.2 * (1.0 - pos.z);\n        gl_FragColor = (1.0 - f) * gl_FragColor + f * vec4(0.0, 0.75, 1.0, 1.0);\n    }\n    gl_FragColor.xyz = computeLight(pos, water) * gl_FragColor.xyz;\n}\n\n"),s=t.getAttribLocation(i,"aVertexPosition"),l=t.getUniformLocation(i,"uScale"),f=t.getUniformLocation(i,"uScaleZ"),c=t.getUniformLocation(i,"uSampler"),h=t.getUniformLocation(i,"uTexMin"),_=t.getUniformLocation(i,"uTexMax"),v=t.getUniformLocation(i,"uTransform"),m=new Float32Array([-2,2,2,2,2,-2,-2,-2]),g=new Uint16Array([0,1,2,2,3,0]),b=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,b),t.bufferData(t.ARRAY_BUFFER,m,t.STATIC_DRAW);var p=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,p),t.bufferData(t.ELEMENT_ARRAY_BUFFER,g,t.STATIC_DRAW),this.webgl_data.texture=o,this.webgl_data.earth_data={shader_program:i,position_attribute:s,scale_uniform:l,scale2_uniform:f,sampler_uniform:c,texmin_uniform:h,texmax_uniform:_,transform_uniform:v,vertices:m,triangles:g,gl_position_buffer:b,gl_index_buffer:p}}},{key:"deinitResources",value:function(e,t){var r;if(null!==(r=this.webgl_data)&&void 0!==r&&r.context){var n=this.webgl_data.context;n.deleteTexture(this.webgl_data.texture),n.deleteBuffer(this.webgl_data.earth_data.gl_position_buffer),n.deleteBuffer(this.webgl_data.earth_data.gl_index_buffer),n.getAttachedShaders(this.webgl_data.earth_data.shader_program).forEach((function(e){n.deleteShader(e)})),n.deleteProgram(this.webgl_data.earth_data.shader_program)}(0,d.Z)((0,u.Z)(a.prototype),"deinitResources",this).call(this,e,t)}},{key:"renderToTexture",value:function(e,t,r,n,a){var o=this.webgl_data.context,i=this.webgl_data.fill_data,s=this.webgl_data.stroke_data,l=this.webgl_data.triangles;o.bindTexture(o.TEXTURE_2D,this.webgl_data.texture);var u=o.createFramebuffer();o.bindFramebuffer(o.FRAMEBUFFER,u);var f=o.COLOR_ATTACHMENT0;o.framebufferTexture2D(o.FRAMEBUFFER,f,o.TEXTURE_2D,this.webgl_data.texture,0),o.viewport(0,0,4096,2048);var c=[2*Math.PI*(.5-(n[0]+a[0])/2),Math.PI*(.5-(n[1]+a[1])/2)],h=[1/(a[0]-n[0])/Math.PI,2/(a[1]-n[1])/Math.PI],d=[.5/(a[0]-n[0])*Math.cbrt(r.scale)/r.scale,.5/(a[1]-n[1])*Math.cbrt(r.scale)/r.scale];o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT);for(var _=new Uint8Array(4*e.length),v=0;v<e.length;v++){for(var m=0;m<3;m++)_[4*v+m]=e[v].color[m],e[v].id===r.hover&&(_[4*v+m]*=.8);_[4*v+3]=255}o.bindTexture(o.TEXTURE_2D,l.texture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,e.length,1,0,o.RGBA,o.UNSIGNED_BYTE,_),o.useProgram(i.shader_program),o.uniform2fv(i.scale_uniform,h),o.uniform1i(i.colors_uniform,0),o.bindBuffer(o.ARRAY_BUFFER,l.position_buffer),o.vertexAttribPointer(i.position_attribute,2,o.FLOAT,!1,0,0),o.enableVertexAttribArray(i.position_attribute),o.bindBuffer(o.ARRAY_BUFFER,l.color_buffer),o.vertexAttribPointer(i.color_attribute,1,o.FLOAT,!1,0,0),o.enableVertexAttribArray(i.color_attribute),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,l.index_buffer);for(var g=0;g<=1;g++)o.uniform2fv(i.translate_uniform,c),o.drawElements(o.TRIANGLES,t.triangles.length,o.UNSIGNED_INT,0),c[0]+=2*Math.PI;o.useProgram(s.shader_program),o.uniform2fv(s.scale_uniform,h),o.uniform2fv(s.scale2_uniform,d),o.uniform1f(s.width_uniform,.0025),o.uniform3fv(s.color_uniform,[.271,.302,.38]),o.bindBuffer(o.ARRAY_BUFFER,l.outline_normal_buffer),o.vertexAttribPointer(s.normal_attribute,2,o.FLOAT,!1,0,0),o.enableVertexAttribArray(s.normal_attribute),o.bindBuffer(o.ARRAY_BUFFER,l.outline_position_buffer),o.vertexAttribPointer(s.position_attribute,2,o.FLOAT,!1,0,0),o.enableVertexAttribArray(s.position_attribute),c[0]-=4*Math.PI;for(var b=0;b<=1;b++)o.uniform2fv(s.translate_uniform,c),o.drawArrays(o.TRIANGLES,0,t.outline_triangles.length/2),c[0]+=2*Math.PI;o.viewport(0,0,this.webgl_data.canvas.clientWidth,this.webgl_data.canvas.clientHeight),o.bindFramebuffer(o.FRAMEBUFFER,null)}},{key:"renderMapInContext",value:function(e,t,r){var n=this.webgl_data.context,a=this.webgl_data.earth_data,o=this.generateTexMinMax(r),i=(0,c.Z)(o,2),s=i[0],l=i[1];this.renderToTexture(e,t,r,s,l),n.clearColor(0,0,0,0),n.clearDepth(1),n.clear(n.COLOR_BUFFER_BIT),n.bindTexture(n.TEXTURE_2D,this.webgl_data.texture),n.useProgram(a.shader_program),n.uniform2fv(a.scale_uniform,this.generateScale(r)),n.uniform2fv(a.scale_uniform,this.generateScale(r)),n.uniform1fv(a.scale2_uniform,[r.scale]),n.uniform1i(a.sampler_uniform,0),n.uniform2fv(a.texmin_uniform,s),n.uniform2fv(a.texmax_uniform,l),n.uniformMatrix3fv(a.transform_uniform,!1,this.generateTransform(r)),n.bindBuffer(n.ARRAY_BUFFER,a.gl_position_buffer),n.vertexAttribPointer(a.position_attribute,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(a.position_attribute),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,a.gl_index_buffer),n.drawElements(n.TRIANGLES,a.triangles.length,n.UNSIGNED_SHORT,0)}}]),a}(h),g=r(726);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.Z)(this,r)}}var P=function(e){(0,s.Z)(r,e);var t=x(r);function r(){var e;return(0,o.Z)(this,r),(e=t.call(this)).renderer=e.newRenderer(),e.state={center:[0,0],scale:1,min:[0,0],max:[0,0],size:[0,0],hover:null},e}return(0,i.Z)(r,[{key:"newRenderer",value:function(){return new h}},{key:"center",get:function(){return this.state.center}},{key:"scale",get:function(){return this.state.scale}},{key:"setCenterAndScale",value:function(e,t){this.state.center=e,this.state.scale=t}},{key:"clientPosToMapPos",value:function(e){var t=this.shadowRoot.getElementById("map").getBoundingClientRect();return this.renderer.clientPosToMapPos(e,t,this.state)}},{key:"clientPosToProjPos",value:function(e){var t=this.shadowRoot.getElementById("map").getBoundingClientRect();return this.renderer.clientPosToProjPos(e,t,this.state)}},{key:"projPosToClientPos",value:function(e){var t=this.shadowRoot.getElementById("map").getBoundingClientRect();return this.renderer.projPosToClientPos(e,t,this.state)}},{key:"handleMouseMove",value:function(e){var t,r=this.clientPosToProjPos([e.clientX,e.clientY]),n=null===(t=this.triangulated)||void 0===t?void 0:t.get_intersection(r,this.renderer.project());if(n){var a=this.locations[n[0]],o=this.renderer.project()?a.raw.get_proj_polygon(n[1]):a.raw.get_polygon(n[1]);this.state.hover=a.id;var i=new Event("hover");i.location=a,i.position=this.projPosToClientPos([(o.min[0]+o.max[0])/2,(o.min[1]+o.max[1])/2]),this.dispatchEvent(i)}else this.handleMouseOut()}},{key:"handleMouseOut",value:function(){this.state.hover=null;var e=new Event("hover");e.location=null,e.position=null,this.dispatchEvent(e)}},{key:"handleTouchStart",value:function(e){1===e.touches.length?this.handleMouseMove({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}):this.handleMouseOut(e)}},{key:"renderMapInCanvas",value:function(){this.last&&this.last.center==this.state.center&&this.last.scale==this.state.scale&&this.last.hover==this.state.hover&&this.last.size==this.state.size||(this.renderer.renderMapInContext(this.locations,this.triangulated,this.state),this.last=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.state)),window.requestAnimationFrame(this.renderMapInCanvas.bind(this))}},{key:"updated",value:function(){var e=this,t=this.shadowRoot.getElementById("map");if(this.last_canvas!=t){this.last_canvas=t,this.renderer.deinitResources(this.locations,this.triangulated);var r=t.getContext("webgl")||t.getContext("experimental-webgl"),n=function(){t.width=t.clientWidth,t.height=t.clientHeight,r.viewport(0,0,t.width,t.height),e.state.size=[t.width,t.height]};window.addEventListener("resize",n),n(),this.renderer.initForContext(t,r,this.locations,this.triangulated),this.renderMapInCanvas()}this.last=null}},{key:"buildRenderData",value:function(){if(!this.triangulated){this.triangulated=g.TriangulatedData.new();var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}(this.locations);try{for(t.s();!(e=t.n()).done;){var r=e.value;this.triangulated.add_location(r.raw)}}catch(e){t.e(e)}finally{t.f()}this.triangulated.triangulate(this.renderer.project()),this.triangulated.generate_outlines(this.renderer.project()),this.state.min=this.triangulated.min,this.state.max=this.triangulated.max}}},{key:"render",value:function(){return this.buildRenderData(),(0,f.dy)(_||(_=(0,n.Z)(['\n            <canvas\n                id="map"\n                @mousemove="','"\n                @wheel="','"\n                @mouseout="','"\n                @touchstart="','"\n                @touchmove="','"\n            >\n            </canvas>\n        '])),this.handleMouseMove,this.handleMouseMove,this.handleMouseOut,this.handleTouchStart,this.handleTouchStart)}}],[{key:"properties",get:function(){return{locations:{attribute:!0}}}},{key:"styles",get:function(){return(0,f.iv)(v||(v=(0,n.Z)(["\n            :host {\n                width: 100%;\n                height: 100%;\n                position: relative;\n                display: block;\n            }\n            #map {\n                width: 100%;\n                height: 100%;\n                max-width: 100%;\n                max-height: 100%;\n                display: block;\n                position: absolute;\n            }\n        "])))}}]),r}(f.oi);customElements.define("map-backend",P);var T=function(e){(0,s.Z)(r,e);var t=x(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"newRenderer",value:function(){return new m}}]),r}(P);customElements.define("map-backend-3d",T)},752:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(120);function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,n.Z)(e)););return e}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=a(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},o.apply(this,arguments)}},885:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(181);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}}(e,t)||(0,n.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBSUMsTUFBTUMsUUFBUUYsR0FBTSxPQUFPQSxFREl4QixDQUFlQSxJRUxULFNBQStCQSxFQUFLdEssR0FDakQsSUFBSXlLLEVBQVksTUFBUEgsRUFBYyxLQUF5QixvQkFBWEksUUFBMEJKLEVBQUlJLE9BQU9DLFdBQWFMLEVBQUksY0FFM0YsR0FBVSxNQUFORyxFQUFKLENBQ0EsSUFJSUcsRUFBSUMsRUFKSkMsRUFBTyxHQUNQQyxHQUFLLEVBQ0xDLEdBQUssRUFJVCxJQUNFLElBQUtQLEVBQUtBLEVBQUdqQixLQUFLYyxLQUFRUyxHQUFNSCxFQUFLSCxFQUFHUSxRQUFRQyxRQUM5Q0osRUFBS0ssS0FBS1AsRUFBR1QsUUFFVG5LLEdBQUs4SyxFQUFLL0ssU0FBV0MsR0FINEIrSyxHQUFLLElBSzVELE1BQU9LLEdBQ1BKLEdBQUssRUFDTEgsRUFBS08sRUFDTCxRQUNBLElBQ09MLEdBQXNCLE1BQWhCTixFQUFXLFFBQVdBLEVBQVcsU0FDNUMsUUFDQSxHQUFJTyxFQUFJLE1BQU1ILEdBSWxCLE9BQU9DLEdGdEJ1QixDQUFxQlIsRUFBS3RLLEtBQU0sRUFBQXFMLEVBQUEsR0FBMkJmLEVBQUt0SyxJR0xqRixXQUNiLE1BQU0sSUFBSXNMLFVBQVUsNklISWdGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2VvLWRyYXcvLi9zcmMvbWFwL3dlYmdsLXJlbmRlcmVyLmpzIiwid2VicGFjazovL2dlby1kcmF3Ly4vc3JjL21hcC9zaGFkZXJzL2ZpbGwtdmVydGV4LXNoYWRlci5nbHNsIiwid2VicGFjazovL2dlby1kcmF3Ly4vc3JjL21hcC9zaGFkZXJzL2ZpbGwtZnJhZ21lbnQtc2hhZGVyLmdsc2wiLCJ3ZWJwYWNrOi8vZ2VvLWRyYXcvLi9zcmMvbWFwL3NoYWRlcnMvc3Ryb2tlLXZlcnRleC1zaGFkZXIuZ2xzbCIsIndlYnBhY2s6Ly9nZW8tZHJhdy8uL3NyYy9tYXAvc2hhZGVycy9zdHJva2UtZnJhZ21lbnQtc2hhZGVyLmdsc2wiLCJ3ZWJwYWNrOi8vZ2VvLWRyYXcvLi9zcmMvbWFwL3dlYmdsLXJlbmRlcmVyLTNkLmpzIiwid2VicGFjazovL2dlby1kcmF3Ly4vc3JjL21hcC9zaGFkZXJzL2VhcnRoLXZlcnRleC1zaGFkZXIuZ2xzbCIsIndlYnBhY2s6Ly9nZW8tZHJhdy8uL3NyYy9tYXAvc2hhZGVycy9lYXJ0aC1mcmFnbWVudC1zaGFkZXIuZ2xzbCIsIndlYnBhY2s6Ly9nZW8tZHJhdy8uL3NyYy9tYXAvbWFwLWJhY2tlbmQtd2ViZ2wuanMiLCJ3ZWJwYWNrOi8vZ2VvLWRyYXcvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc3VwZXJQcm9wQmFzZS5qcyIsIndlYnBhY2s6Ly9nZW8tZHJhdy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQuanMiLCJ3ZWJwYWNrOi8vZ2VvLWRyYXcvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheS5qcyIsIndlYnBhY2s6Ly9nZW8tZHJhdy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hcnJheVdpdGhIb2xlcy5qcyIsIndlYnBhY2s6Ly9nZW8tZHJhdy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pdGVyYWJsZVRvQXJyYXlMaW1pdC5qcyIsIndlYnBhY2s6Ly9nZW8tZHJhdy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9ub25JdGVyYWJsZVJlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgRmlsbEZyYWdtZW50U2hhZGVyIGZyb20gJy4vc2hhZGVycy9maWxsLWZyYWdtZW50LXNoYWRlci5nbHNsJztcbmltcG9ydCBGaWxsVmVydGV4U2hhZGVyIGZyb20gJy4vc2hhZGVycy9maWxsLXZlcnRleC1zaGFkZXIuZ2xzbCc7XG5pbXBvcnQgU3Ryb2tlRnJhZ21lbnRTaGFkZXIgZnJvbSAnLi9zaGFkZXJzL3N0cm9rZS1mcmFnbWVudC1zaGFkZXIuZ2xzbCc7XG5pbXBvcnQgU3Ryb2tlVmVydGV4U2hhZGVyIGZyb20gJy4vc2hhZGVycy9zdHJva2UtdmVydGV4LXNoYWRlci5nbHNsJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2ViR0xSZW5kZXJlciB7XG4gICAgcHJvamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY2xpZW50UG9zVG9NYXBQb3MoY2xpZW50X3BvcywgbWFwX3Bvcywgc3RhdGUpIHtcbiAgICAgICAgY29uc3QgW18sIHNjYWxlXSA9IHRoaXMuZ2VuZXJhdGVUcmFuc2xhdGVBbmRTY2FsZShzdGF0ZSk7XG4gICAgICAgIGNvbnN0IGNsaWVudF9wb3Nfbm9ybSA9IFtcbiAgICAgICAgICAgIDIgKiAoY2xpZW50X3Bvc1swXSAtIG1hcF9wb3MueCkgLyBtYXBfcG9zLndpZHRoIC0gMS4wLFxuICAgICAgICAgICAgMS4wIC0gMiAqIChjbGllbnRfcG9zWzFdIC0gbWFwX3Bvcy55KSAvIG1hcF9wb3MuaGVpZ2h0LFxuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgY2xpZW50X3Bvc19ub3JtWzBdIC8gc2NhbGVbMF0gKyBzdGF0ZS5jZW50ZXJbMF0sXG4gICAgICAgICAgICBjbGllbnRfcG9zX25vcm1bMV0gLyBzY2FsZVsxXSArIHN0YXRlLmNlbnRlclsxXSxcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBjbGllbnRQb3NUb1Byb2pQb3MoY2xpZW50X3BvcywgbWFwX3Bvcywgc3RhdGUpIHtcbiAgICAgICAgY29uc3QgW3RyYW5zZm9ybSwgc2NhbGVdID0gdGhpcy5nZW5lcmF0ZVRyYW5zbGF0ZUFuZFNjYWxlKHN0YXRlKTtcbiAgICAgICAgY29uc3QgY2xpZW50X3Bvc19ub3JtID0gW1xuICAgICAgICAgICAgMiAqIChjbGllbnRfcG9zWzBdIC0gbWFwX3Bvcy54KSAvIG1hcF9wb3Mud2lkdGggLSAxLjAsXG4gICAgICAgICAgICAxLjAgLSAyICogKGNsaWVudF9wb3NbMV0gLSBtYXBfcG9zLnkpIC8gbWFwX3Bvcy5oZWlnaHQsXG4gICAgICAgIF07XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBjbGllbnRfcG9zX25vcm1bMF0gLyBzY2FsZVswXSAtIHRyYW5zZm9ybVswXSxcbiAgICAgICAgICAgIGNsaWVudF9wb3Nfbm9ybVsxXSAvIHNjYWxlWzFdIC0gdHJhbnNmb3JtWzFdLFxuICAgICAgICBdO1xuICAgIH1cblxuICAgIHByb2pQb3NUb0NsaWVudFBvcyhsb2NhdGlvbl9wb3MsIG1hcF9wb3MsIHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IFt0cmFuc2Zvcm0sIHNjYWxlXSA9IHRoaXMuZ2VuZXJhdGVUcmFuc2xhdGVBbmRTY2FsZShzdGF0ZSk7XG4gICAgICAgIGNvbnN0IGNsaWVudF9wb3Nfbm9ybSA9IFtcbiAgICAgICAgICAgIChsb2NhdGlvbl9wb3NbMF0gKyB0cmFuc2Zvcm1bMF0pICogc2NhbGVbMF0sXG4gICAgICAgICAgICAobG9jYXRpb25fcG9zWzFdICsgdHJhbnNmb3JtWzFdKSAqIHNjYWxlWzFdLFxuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgKGNsaWVudF9wb3Nfbm9ybVswXSArIDEuMCkgLyAyICogbWFwX3Bvcy53aWR0aCArIG1hcF9wb3MueCxcbiAgICAgICAgICAgICgxLjAgLSBjbGllbnRfcG9zX25vcm1bMV0pIC8gMiAqIG1hcF9wb3MuaGVpZ2h0ICsgbWFwX3Bvcy55LFxuICAgICAgICBdO1xuICAgIH1cblxuICAgIGdlbmVyYXRlVHJhbnNsYXRlQW5kU2NhbGUoe21pbiwgbWF4LCBzaXplLCBjZW50ZXIsIHNjYWxlOiB6b29tX3NjYWxlfSkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IG1heFswXSAtIG1pblswXTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gbWF4WzFdIC0gbWluWzFdO1xuICAgICAgICBpZih3aWR0aCAvIHNpemVbMF0gPiBoZWlnaHQgLyBzaXplWzFdKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2xhdGUgPSBbXG4gICAgICAgICAgICAgICAgLW1pblswXSAtIHdpZHRoIC8gMiAtIGNlbnRlclswXSxcbiAgICAgICAgICAgICAgICAtbWluWzFdIC0gaGVpZ2h0IC8gMiAtIGNlbnRlclsxXSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjb25zdCBzY2FsZSA9IFtcbiAgICAgICAgICAgICAgICAyIC8gd2lkdGggKiB6b29tX3NjYWxlLFxuICAgICAgICAgICAgICAgIC0yICogKHNpemVbMF0gLyBzaXplWzFdKSAvIHdpZHRoICogem9vbV9zY2FsZSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjb25zdCBzdHJva2Vfc2NhbGUgPSBbXG4gICAgICAgICAgICAgICAgTWF0aC5jYnJ0KHpvb21fc2NhbGUpICogMSxcbiAgICAgICAgICAgICAgICBNYXRoLmNicnQoem9vbV9zY2FsZSkgKiAtc2l6ZVswXSAvIHNpemVbMV0sXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgcmV0dXJuIFt0cmFuc2xhdGUsIHNjYWxlLCBzdHJva2Vfc2NhbGVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNsYXRlID0gW1xuICAgICAgICAgICAgICAgIC1taW5bMF0gLSB3aWR0aCAvIDIgLSBjZW50ZXJbMF0sXG4gICAgICAgICAgICAgICAgLW1pblsxXSAtIGhlaWdodCAvIDIgLSBjZW50ZXJbMV0sXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSBbXG4gICAgICAgICAgICAgICAgMiAqIChzaXplWzFdIC8gc2l6ZVswXSkgLyBoZWlnaHQgKiB6b29tX3NjYWxlLFxuICAgICAgICAgICAgICAgIC0yIC8gIGhlaWdodCAqIHpvb21fc2NhbGUsXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgY29uc3Qgc3Ryb2tlX3NjYWxlID0gW1xuICAgICAgICAgICAgICAgIE1hdGguY2JydCh6b29tX3NjYWxlKSAqIHNpemVbMV0gLyBzaXplWzBdLFxuICAgICAgICAgICAgICAgIE1hdGguY2JydCh6b29tX3NjYWxlKSAqIC0xLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHJldHVybiBbdHJhbnNsYXRlLCBzY2FsZSwgc3Ryb2tlX3NjYWxlXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjcmVhdGVTaGFkZXJQcm9ncmFtKGdsLCB2ZXJ0ZXhfc2hhZGVyX3NvdXJjZSwgZnJhZ21lbnRfc2hhZGVyX3NvdXJjZSkge1xuICAgICAgICBjb25zdCB2ZXJ0ZXhfc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKGdsLlZFUlRFWF9TSEFERVIpO1xuICAgICAgICBnbC5zaGFkZXJTb3VyY2UodmVydGV4X3NoYWRlciwgdmVydGV4X3NoYWRlcl9zb3VyY2UpO1xuICAgICAgICBnbC5jb21waWxlU2hhZGVyKHZlcnRleF9zaGFkZXIpO1xuICAgICAgICBjb25zdCBmcmFnbWVudF9zaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTtcbiAgICAgICAgZ2wuc2hhZGVyU291cmNlKGZyYWdtZW50X3NoYWRlciwgZnJhZ21lbnRfc2hhZGVyX3NvdXJjZSk7XG4gICAgICAgIGdsLmNvbXBpbGVTaGFkZXIoZnJhZ21lbnRfc2hhZGVyKTtcbiAgICAgICAgY29uc3Qgc2hhZGVyX3Byb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgICAgIGdsLmF0dGFjaFNoYWRlcihzaGFkZXJfcHJvZ3JhbSwgdmVydGV4X3NoYWRlcik7XG4gICAgICAgIGdsLmF0dGFjaFNoYWRlcihzaGFkZXJfcHJvZ3JhbSwgZnJhZ21lbnRfc2hhZGVyKTtcbiAgICAgICAgZ2wubGlua1Byb2dyYW0oc2hhZGVyX3Byb2dyYW0pO1xuICAgICAgICByZXR1cm4gc2hhZGVyX3Byb2dyYW07XG4gICAgfVxuXG4gICAgaW5pdEZvckNvbnRleHQoY2FudmFzLCBnbCwgbG9jYXRpb25zLCB0cmlhbmd1bGF0ZWQpIHtcbiAgICAgICAgZ2wuZ2V0RXh0ZW5zaW9uKFwiT0VTX2VsZW1lbnRfaW5kZXhfdWludFwiKTtcblxuICAgICAgICBjb25zdCBmaWxsX3NoYWRlcl9wcm9ncmFtID0gdGhpcy5jcmVhdGVTaGFkZXJQcm9ncmFtKGdsLCBGaWxsVmVydGV4U2hhZGVyLCBGaWxsRnJhZ21lbnRTaGFkZXIpO1xuICAgICAgICBjb25zdCBmaWxsX3Bvc2l0aW9uX2F0dHJpYnV0ZSA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKGZpbGxfc2hhZGVyX3Byb2dyYW0sICdhVmVydGV4UG9zaXRpb24nKTtcbiAgICAgICAgY29uc3QgZmlsbF9jb2xvcl9hdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihmaWxsX3NoYWRlcl9wcm9ncmFtLCAnYVZlcnRleENvbG9yJyk7XG4gICAgICAgIGNvbnN0IGZpbGxfdHJhbnNsYXRlX3VuaWZvcm0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oZmlsbF9zaGFkZXJfcHJvZ3JhbSwgJ3VUcmFuc2xhdGUnKTtcbiAgICAgICAgY29uc3QgZmlsbF9zY2FsZV91bmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKGZpbGxfc2hhZGVyX3Byb2dyYW0sICd1U2NhbGUnKTtcbiAgICAgICAgY29uc3QgZmlsbF9jb2xvcnNfdW5pZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihmaWxsX3NoYWRlcl9wcm9ncmFtLCAndUNvbG9ycycpO1xuXG4gICAgICAgIGNvbnN0IHN0cm9rZV9zaGFkZXJfcHJvZ3JhbSA9IHRoaXMuY3JlYXRlU2hhZGVyUHJvZ3JhbShnbCwgU3Ryb2tlVmVydGV4U2hhZGVyLCBTdHJva2VGcmFnbWVudFNoYWRlcik7XG4gICAgICAgIGNvbnN0IHN0cm9rZV9wb3NpdGlvbl9hdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzdHJva2Vfc2hhZGVyX3Byb2dyYW0sICdhVmVydGV4UG9zaXRpb24nKTtcbiAgICAgICAgY29uc3Qgc3Ryb2tlX25vcm1hbF9hdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzdHJva2Vfc2hhZGVyX3Byb2dyYW0sICdhVmVydGV4Tm9ybWFsJyk7XG4gICAgICAgIGNvbnN0IHN0cm9rZV90cmFuc2xhdGVfdW5pZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzdHJva2Vfc2hhZGVyX3Byb2dyYW0sICd1VHJhbnNsYXRlJyk7XG4gICAgICAgIGNvbnN0IHN0cm9rZV9zY2FsZV91bmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHN0cm9rZV9zaGFkZXJfcHJvZ3JhbSwgJ3VTY2FsZScpO1xuICAgICAgICBjb25zdCBzdHJva2Vfc2NhbGUyX3VuaWZvcm0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oc3Ryb2tlX3NoYWRlcl9wcm9ncmFtLCAndVN0cm9rZVNjYWxlJyk7XG4gICAgICAgIGNvbnN0IHN0cm9rZV93aWR0aF91bmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHN0cm9rZV9zaGFkZXJfcHJvZ3JhbSwgJ3VXaWR0aCcpO1xuICAgICAgICBjb25zdCBzdHJva2VfY29sb3JfdW5pZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzdHJva2Vfc2hhZGVyX3Byb2dyYW0sICd1U3Ryb2tlQ29sb3InKTtcblxuICAgICAgICBjb25zdCB0ZXh0dXJlID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcbiAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpO1xuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcblxuICAgICAgICBjb25zdCBwb3NpdGlvbl9idWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHBvc2l0aW9uX2J1ZmZlcik7XG4gICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB0cmlhbmd1bGF0ZWQudmVydGV4LCBnbC5TVEFUSUNfRFJBVyk7XG4gICAgICAgIGNvbnN0IGNvbG9yX2J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgY29sb3JfYnVmZmVyKTtcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHRyaWFuZ3VsYXRlZC5jb2xvciwgZ2wuU1RBVElDX0RSQVcpO1xuICAgICAgICBjb25zdCBpbmRleF9idWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgaW5kZXhfYnVmZmVyKTtcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdHJpYW5ndWxhdGVkLnRyaWFuZ2xlcywgZ2wuU1RBVElDX0RSQVcpO1xuICAgICAgICBjb25zdCBvdXRsaW5lX3Bvc2l0aW9uX2J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgb3V0bGluZV9wb3NpdGlvbl9idWZmZXIpO1xuICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdHJpYW5ndWxhdGVkLm91dGxpbmVfdHJpYW5nbGVzLCBnbC5TVEFUSUNfRFJBVyk7XG4gICAgICAgIGNvbnN0IG91dGxpbmVfbm9ybWFsX2J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgb3V0bGluZV9ub3JtYWxfYnVmZmVyKTtcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHRyaWFuZ3VsYXRlZC5vdXRsaW5lX25vcm1hbHMsIGdsLlNUQVRJQ19EUkFXKTtcblxuICAgICAgICB0aGlzLndlYmdsX2RhdGEgPSB7XG4gICAgICAgICAgICBjYW52YXM6IGNhbnZhcyxcbiAgICAgICAgICAgIGNvbnRleHQ6IGdsLFxuICAgICAgICAgICAgZmlsbF9kYXRhOiB7XG4gICAgICAgICAgICAgICAgc2hhZGVyX3Byb2dyYW06IGZpbGxfc2hhZGVyX3Byb2dyYW0sXG4gICAgICAgICAgICAgICAgcG9zaXRpb25fYXR0cmlidXRlOiBmaWxsX3Bvc2l0aW9uX2F0dHJpYnV0ZSxcbiAgICAgICAgICAgICAgICBjb2xvcl9hdHRyaWJ1dGU6IGZpbGxfY29sb3JfYXR0cmlidXRlLFxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZV91bmlmb3JtOiBmaWxsX3RyYW5zbGF0ZV91bmlmb3JtLFxuICAgICAgICAgICAgICAgIHNjYWxlX3VuaWZvcm06IGZpbGxfc2NhbGVfdW5pZm9ybSxcbiAgICAgICAgICAgICAgICBjb2xvcnNfdW5pZm9ybTogZmlsbF9jb2xvcnNfdW5pZm9ybSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdHJva2VfZGF0YToge1xuICAgICAgICAgICAgICAgIHNoYWRlcl9wcm9ncmFtOiBzdHJva2Vfc2hhZGVyX3Byb2dyYW0sXG4gICAgICAgICAgICAgICAgcG9zaXRpb25fYXR0cmlidXRlOiBzdHJva2VfcG9zaXRpb25fYXR0cmlidXRlLFxuICAgICAgICAgICAgICAgIG5vcm1hbF9hdHRyaWJ1dGU6IHN0cm9rZV9ub3JtYWxfYXR0cmlidXRlLFxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZV91bmlmb3JtOiBzdHJva2VfdHJhbnNsYXRlX3VuaWZvcm0sXG4gICAgICAgICAgICAgICAgc2NhbGVfdW5pZm9ybTogc3Ryb2tlX3NjYWxlX3VuaWZvcm0sXG4gICAgICAgICAgICAgICAgc2NhbGUyX3VuaWZvcm06IHN0cm9rZV9zY2FsZTJfdW5pZm9ybSxcbiAgICAgICAgICAgICAgICB3aWR0aF91bmlmb3JtOiBzdHJva2Vfd2lkdGhfdW5pZm9ybSxcbiAgICAgICAgICAgICAgICBjb2xvcl91bmlmb3JtOiBzdHJva2VfY29sb3JfdW5pZm9ybSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0cmlhbmdsZXM6IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbl9idWZmZXIsIGNvbG9yX2J1ZmZlciwgaW5kZXhfYnVmZmVyLCB0ZXh0dXJlLFxuICAgICAgICAgICAgICAgIG91dGxpbmVfcG9zaXRpb25fYnVmZmVyLCBvdXRsaW5lX25vcm1hbF9idWZmZXIsXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZGVpbml0UmVzb3VyY2VzKF9sb2NhdGlvbnMsIF90cmlhbmd1bGF0ZWQpIHtcbiAgICAgICAgaWYgKHRoaXMud2ViZ2xfZGF0YT8uY29udGV4dCkge1xuICAgICAgICAgICAgY29uc3QgZ2wgPSB0aGlzLndlYmdsX2RhdGEuY29udGV4dDtcbiAgICAgICAgICAgIGdsLmRlbGV0ZVRleHR1cmUodGhpcy53ZWJnbF9kYXRhLnRyaWFuZ2xlcy50ZXh0dXJlKTtcbiAgICAgICAgICAgIGdsLmRlbGV0ZUJ1ZmZlcih0aGlzLndlYmdsX2RhdGEudHJpYW5nbGVzLnBvc2l0aW9uX2J1ZmZlcik7XG4gICAgICAgICAgICBnbC5kZWxldGVCdWZmZXIodGhpcy53ZWJnbF9kYXRhLnRyaWFuZ2xlcy5jb2xvcl9idWZmZXIpO1xuICAgICAgICAgICAgZ2wuZGVsZXRlQnVmZmVyKHRoaXMud2ViZ2xfZGF0YS50cmlhbmdsZXMuaW5kZXhfYnVmZmVyKTtcbiAgICAgICAgICAgIGdsLmRlbGV0ZUJ1ZmZlcih0aGlzLndlYmdsX2RhdGEudHJpYW5nbGVzLm91dGxpbmVfcG9zaXRpb25fYnVmZmVyKTtcbiAgICAgICAgICAgIGdsLmRlbGV0ZUJ1ZmZlcih0aGlzLndlYmdsX2RhdGEudHJpYW5nbGVzLm91dGxpbmVfbm9ybWFsX2J1ZmZlcik7XG4gICAgICAgICAgICBnbC5nZXRBdHRhY2hlZFNoYWRlcnModGhpcy53ZWJnbF9kYXRhLmZpbGxfZGF0YS5zaGFkZXJfcHJvZ3JhbSkuZm9yRWFjaChzID0+IHtcbiAgICAgICAgICAgICAgICBnbC5kZWxldGVTaGFkZXIocyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGdsLmRlbGV0ZVByb2dyYW0odGhpcy53ZWJnbF9kYXRhLmZpbGxfZGF0YS5zaGFkZXJfcHJvZ3JhbSk7XG4gICAgICAgICAgICBnbC5nZXRBdHRhY2hlZFNoYWRlcnModGhpcy53ZWJnbF9kYXRhLnN0cm9rZV9kYXRhLnNoYWRlcl9wcm9ncmFtKS5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgICAgICAgIGdsLmRlbGV0ZVNoYWRlcihzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZ2wuZGVsZXRlUHJvZ3JhbSh0aGlzLndlYmdsX2RhdGEuc3Ryb2tlX2RhdGEuc2hhZGVyX3Byb2dyYW0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyTWFwSW5Db250ZXh0KGxvY2F0aW9ucywgdHJpYW5ndWxhdGVkLCBzdGF0ZSkge1xuICAgICAgICBjb25zdCBnbCA9IHRoaXMud2ViZ2xfZGF0YS5jb250ZXh0O1xuICAgICAgICBjb25zdCBmaWxsX2RhdGEgPSB0aGlzLndlYmdsX2RhdGEuZmlsbF9kYXRhO1xuICAgICAgICBjb25zdCBzdHJva2VfZGF0YSA9IHRoaXMud2ViZ2xfZGF0YS5zdHJva2VfZGF0YTtcbiAgICAgICAgY29uc3QgdHJpYW5nbGVzID0gdGhpcy53ZWJnbF9kYXRhLnRyaWFuZ2xlcztcblxuICAgICAgICBjb25zdCBbdHJhbnNsYXRlLCBzY2FsZSwgc3Ryb2tlX3NjYWxlXSA9IHRoaXMuZ2VuZXJhdGVUcmFuc2xhdGVBbmRTY2FsZShzdGF0ZSk7XG5cbiAgICAgICAgZ2wuY2xlYXJDb2xvcigwLjAsIDAuMCwgMC4wLCAwLjApO1xuICAgICAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBsb2NhdGlvbiBjb2xvcnNcbiAgICAgICAgY29uc3QgY29sb3JzID0gbmV3IFVpbnQ4QXJyYXkobG9jYXRpb25zLmxlbmd0aCAqIDQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2F0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb2xvcnNbNCppICsgal0gPSBsb2NhdGlvbnNbaV0uY29sb3Jbal07XG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uc1tpXS5pZCA9PT0gc3RhdGUuaG92ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3JzWzQqaSArIGpdICo9IDAuODtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2xvcnNbNCppICsgM10gPSAyNTU7XG4gICAgICAgIH1cbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdHJpYW5nbGVzLnRleHR1cmUpO1xuICAgICAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIGxvY2F0aW9ucy5sZW5ndGgsIDEsIDAsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIGNvbG9ycyk7XG5cbiAgICAgICAgLy8gRHJhdyBmaWxsXG4gICAgICAgIGdsLnVzZVByb2dyYW0oZmlsbF9kYXRhLnNoYWRlcl9wcm9ncmFtKTtcbiAgICAgICAgZ2wudW5pZm9ybTJmdihmaWxsX2RhdGEudHJhbnNsYXRlX3VuaWZvcm0sIHRyYW5zbGF0ZSk7XG4gICAgICAgIGdsLnVuaWZvcm0yZnYoZmlsbF9kYXRhLnNjYWxlX3VuaWZvcm0sIHNjYWxlKTtcbiAgICAgICAgZ2wudW5pZm9ybTFpKGZpbGxfZGF0YS5jb2xvcnNfdW5pZm9ybSwgMCk7XG4gICAgICAgIFxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdHJpYW5nbGVzLnBvc2l0aW9uX2J1ZmZlcik7XG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoZmlsbF9kYXRhLnBvc2l0aW9uX2F0dHJpYnV0ZSwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoZmlsbF9kYXRhLnBvc2l0aW9uX2F0dHJpYnV0ZSk7XG5cbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRyaWFuZ2xlcy5jb2xvcl9idWZmZXIpO1xuICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGZpbGxfZGF0YS5jb2xvcl9hdHRyaWJ1dGUsIDEsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGZpbGxfZGF0YS5jb2xvcl9hdHRyaWJ1dGUpO1xuXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHRyaWFuZ2xlcy5pbmRleF9idWZmZXIpO1xuICAgICAgICBnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLCB0cmlhbmd1bGF0ZWQudHJpYW5nbGVzLmxlbmd0aCwgZ2wuVU5TSUdORURfSU5ULCAwKTtcblxuICAgICAgICAvLyBEcmF3IHN0cm9rZVxuICAgICAgICBnbC51c2VQcm9ncmFtKHN0cm9rZV9kYXRhLnNoYWRlcl9wcm9ncmFtKTtcbiAgICAgICAgZ2wudW5pZm9ybTJmdihzdHJva2VfZGF0YS50cmFuc2xhdGVfdW5pZm9ybSwgdHJhbnNsYXRlKTtcbiAgICAgICAgZ2wudW5pZm9ybTJmdihzdHJva2VfZGF0YS5zY2FsZV91bmlmb3JtLCBzY2FsZSk7XG4gICAgICAgIGdsLnVuaWZvcm0yZnYoc3Ryb2tlX2RhdGEuc2NhbGUyX3VuaWZvcm0sIHN0cm9rZV9zY2FsZSk7XG4gICAgICAgIGdsLnVuaWZvcm0xZihzdHJva2VfZGF0YS53aWR0aF91bmlmb3JtLCAwLjAwMjUpO1xuICAgICAgICBnbC51bmlmb3JtM2Z2KHN0cm9rZV9kYXRhLmNvbG9yX3VuaWZvcm0sIFswLjI3MSwgMC4zMDIsIDAuMzhdKTtcbiAgICAgICAgXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0cmlhbmdsZXMub3V0bGluZV9ub3JtYWxfYnVmZmVyKTtcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzdHJva2VfZGF0YS5ub3JtYWxfYXR0cmlidXRlLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShzdHJva2VfZGF0YS5ub3JtYWxfYXR0cmlidXRlKTtcblxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdHJpYW5nbGVzLm91dGxpbmVfcG9zaXRpb25fYnVmZmVyKTtcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzdHJva2VfZGF0YS5wb3NpdGlvbl9hdHRyaWJ1dGUsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHN0cm9rZV9kYXRhLnBvc2l0aW9uX2F0dHJpYnV0ZSk7XG5cbiAgICAgICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRVMsIDAsIHRyaWFuZ3VsYXRlZC5vdXRsaW5lX3RyaWFuZ2xlcy5sZW5ndGggLyAyKTtcbiAgICB9XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IFwiXFxuYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1xcbmF0dHJpYnV0ZSBmbG9hdCBhVmVydGV4Q29sb3I7XFxuXFxudW5pZm9ybSB2ZWMyIHVUcmFuc2xhdGU7XFxudW5pZm9ybSB2ZWMyIHVTY2FsZTtcXG51bmlmb3JtIHNhbXBsZXIyRCB1Q29sb3JzO1xcblxcbnZhcnlpbmcgdmVjMyB2UGl4ZWxDb2xvcjtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgIHZQaXhlbENvbG9yID0gdGV4dHVyZTJEKHVDb2xvcnMsIHZlYzIoYVZlcnRleENvbG9yLCAwLjUpKS54eXo7XFxuICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgoYVZlcnRleFBvc2l0aW9uICsgdVRyYW5zbGF0ZSkgKiB1U2NhbGUsIDAuMCwgMS4wKTtcXG59XFxuXFxuXCI7IiwiZXhwb3J0IGRlZmF1bHQgXCJcXG4jaWZkZWYgR0xfRVNcXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbiNlbmRpZlxcblxcbnZhcnlpbmcgdmVjMyB2UGl4ZWxDb2xvcjtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQodlBpeGVsQ29sb3IsIDEuMCk7XFxufVxcblxcblwiOyIsImV4cG9ydCBkZWZhdWx0IFwiXFxuYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIGFWZXJ0ZXhOb3JtYWw7XFxuXFxudW5pZm9ybSB2ZWMyIHVUcmFuc2xhdGU7XFxudW5pZm9ybSB2ZWMyIHVTY2FsZTtcXG51bmlmb3JtIHZlYzIgdVN0cm9rZVNjYWxlO1xcbnVuaWZvcm0gZmxvYXQgdVdpZHRoO1xcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgZ2xfUG9zaXRpb24gPSB2ZWM0KFxcbiAgICAgICAgKGFWZXJ0ZXhQb3NpdGlvbiArIHVUcmFuc2xhdGUpICogdVNjYWxlXFxuICAgICAgICArIG5vcm1hbGl6ZShhVmVydGV4Tm9ybWFsKSAqIHVXaWR0aCAqIHVTdHJva2VTY2FsZSxcXG4gICAgICAgIDAuMCwgMS4wXFxuICAgICk7XFxufVxcblxcblwiOyIsImV4cG9ydCBkZWZhdWx0IFwiXFxuI2lmZGVmIEdMX0VTXFxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG4jZW5kaWZcXG5cXG51bmlmb3JtIHZlYzMgdVN0cm9rZUNvbG9yO1xcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh1U3Ryb2tlQ29sb3IsIDEuMCk7XFxufVxcblxcblwiOyIsIlxuaW1wb3J0IEVhcnRoRnJhZ21lbnRTaGFkZXIgZnJvbSAnLi9zaGFkZXJzL2VhcnRoLWZyYWdtZW50LXNoYWRlci5nbHNsJztcbmltcG9ydCBFYXJ0aFZlcnRleFNoYWRlciBmcm9tICcuL3NoYWRlcnMvZWFydGgtdmVydGV4LXNoYWRlci5nbHNsJztcblxuaW1wb3J0IFdlYkdMUmVuZGVyZXIgZnJvbSAnLi93ZWJnbC1yZW5kZXJlcic7XG5cbmNvbnN0IFRFWFRVUkVfSEVJR0hUID0gMjA0ODtcbmNvbnN0IFRFWFRVUkVfV0lEVEggPSA0MDk2O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWJHTFJlbmRlcmVyM2QgZXh0ZW5kcyBXZWJHTFJlbmRlcmVyIHtcbiAgICBwcm9qZWN0KCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY2xpZW50UG9zVG9TcGhlcmVQb3MoY2xpZW50X3BvcywgbWFwX3Bvcywgc3RhdGUpIHtcbiAgICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLmdlbmVyYXRlU2NhbGUoc3RhdGUpO1xuICAgICAgICBjb25zdCBwb3MgPSBbXG4gICAgICAgICAgICAoMiAqIChjbGllbnRfcG9zWzBdIC0gbWFwX3Bvcy54KSAvIG1hcF9wb3Mud2lkdGggLSAxLjApIC8gc2NhbGVbMF0sXG4gICAgICAgICAgICAoMS4wIC0gMiAqIChjbGllbnRfcG9zWzFdIC0gbWFwX3Bvcy55KSAvIG1hcF9wb3MuaGVpZ2h0KSAvIHNjYWxlWzFdLFxuICAgICAgICAgICAgMFxuICAgICAgICBdO1xuICAgICAgICBwb3NbMl0gPSAxIC0gcG9zWzBdICogcG9zWzBdIC0gcG9zWzFdICogcG9zWzFdO1xuICAgICAgICBpZiAocG9zWzJdIDwgMCkge1xuICAgICAgICAgICAgY29uc3QgZGlzdCA9IE1hdGguc3FydChwb3NbMF0qcG9zWzBdICsgcG9zWzFdKnBvc1sxXSk7XG4gICAgICAgICAgICBwb3NbMF0gLz0gZGlzdDtcbiAgICAgICAgICAgIHBvc1sxXSAvPSBkaXN0O1xuICAgICAgICAgICAgcG9zWzJdID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBvc1syXSA9IE1hdGguc3FydChwb3NbMl0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgfVxuXG4gICAgY2xpZW50UG9zVG9Tb21lUG9zKGNsaWVudF9wb3MsIG1hcF9wb3MsIHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IHBvcyA9IHRoaXMuY2xpZW50UG9zVG9TcGhlcmVQb3MoY2xpZW50X3BvcywgbWFwX3Bvcywgc3RhdGUpXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5tYXQzVmVjTXVsKHRoaXMuZ2VuZXJhdGVUcmFuc2Zvcm0oc3RhdGUpLCBwb3MpXG4gICAgICAgIGNvbnN0IGNvb3JkID0gW1xuICAgICAgICAgICAgTWF0aC5hdGFuMihwb3NpdGlvblswXSwgcG9zaXRpb25bMl0pLFxuICAgICAgICAgICAgTWF0aC5hdGFuMihwb3NpdGlvblsxXSwgTWF0aC5zcXJ0KHBvc2l0aW9uWzBdICogcG9zaXRpb25bMF0gKyBwb3NpdGlvblsyXSAqIHBvc2l0aW9uWzJdKSksXG4gICAgICAgIF07XG4gICAgICAgIHJldHVybiBjb29yZDtcbiAgICB9XG5cbiAgICBub3JtYWxpemVBcm91bmQoeCwgYSkge1xuICAgICAgICBpZiAoeCA8IGEgLSBNYXRoLlBJKSB7XG4gICAgICAgICAgICByZXR1cm4geCArIDIgKiBNYXRoLlBJICogTWF0aC5mbG9vcigoYSArIE1hdGguUEkgLSB4KSAvICgyICogTWF0aC5QSSkpO1xuICAgICAgICB9IGVsc2UgaWYgKHggPiBhICsgTWF0aC5QSSkge1xuICAgICAgICAgICAgcmV0dXJuIHggLSAyICogTWF0aC5QSSAqIE1hdGguZmxvb3IoKHggKyBNYXRoLlBJIC0gYSkgLyAoMiAqIE1hdGguUEkpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xpZW50UG9zVG9NYXBQb3MoY2xpZW50X3BvcywgbWFwX3Bvcywgc3RhdGUpIHtcbiAgICAgICAgY29uc3QgeyBjZW50ZXIgfSA9IHN0YXRlO1xuICAgICAgICBjb25zdCBwb3MgPSB0aGlzLmNsaWVudFBvc1RvU3BoZXJlUG9zKGNsaWVudF9wb3MsIG1hcF9wb3MsIHN0YXRlKVxuICAgICAgICBjb25zdCBjb29yZCA9IGNlbnRlclsxXSArIE1hdGguYXRhbjIocG9zWzFdLCBNYXRoLnNxcnQocG9zWzBdICogcG9zWzBdICsgcG9zWzJdICogcG9zWzJdKSk7XG4gICAgICAgIGNvbnN0IHByb2ogPSB0aGlzLmNsaWVudFBvc1RvU29tZVBvcyhjbGllbnRfcG9zLCBtYXBfcG9zLCBzdGF0ZSk7XG4gICAgICAgIHJldHVybiBbdGhpcy5ub3JtYWxpemVBcm91bmQocHJvalswXSwgY2VudGVyWzBdKSwgY29vcmRdO1xuICAgIH1cblxuICAgIGNsaWVudFBvc1RvUHJvalBvcyhjbGllbnRfcG9zLCBtYXBfcG9zLCBzdGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemVQb3NpdGlvbih0aGlzLmNsaWVudFBvc1RvU29tZVBvcyhjbGllbnRfcG9zLCBtYXBfcG9zLCBzdGF0ZSkpO1xuICAgIH1cblxuICAgIHByb2pQb3NUb0NsaWVudFBvcyhwcm9qX3BvcywgbWFwX3Bvcywgc3RhdGUpIHtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBbXG4gICAgICAgICAgICBNYXRoLmNvcyhwcm9qX3Bvc1sxXSkgKiBNYXRoLnNpbihwcm9qX3Bvc1swXSksXG4gICAgICAgICAgICBNYXRoLnNpbihwcm9qX3Bvc1sxXSksXG4gICAgICAgICAgICBNYXRoLmNvcyhwcm9qX3Bvc1sxXSkgKiBNYXRoLmNvcyhwcm9qX3Bvc1swXSksXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IHBvcyA9IHRoaXMubWF0M1ZlY011bCh0aGlzLmdlbmVyYXRlSW52ZXJzZVRyYW5zZm9ybShzdGF0ZSksIHBvc2l0aW9uKVxuICAgICAgICBpZiAocG9zWzJdIDwgMCkge1xuICAgICAgICAgICAgY29uc3QgZGlzdCA9IE1hdGguc3FydChwb3NbMF0qcG9zWzBdICsgcG9zWzFdKnBvc1sxXSk7XG4gICAgICAgICAgICBwb3NbMF0gLz0gZGlzdDtcbiAgICAgICAgICAgIHBvc1sxXSAvPSBkaXN0O1xuICAgICAgICAgICAgcG9zWzJdID0gMDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzY2FsZSA9IHRoaXMuZ2VuZXJhdGVTY2FsZShzdGF0ZSk7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAocG9zWzBdICogc2NhbGVbMF0gKyAxKSAvIDIgKiBtYXBfcG9zLndpZHRoICsgbWFwX3Bvcy54LFxuICAgICAgICAgICAgKDEgLSBwb3NbMV0gKiBzY2FsZVsxXSkgLyAyICogbWFwX3Bvcy5oZWlnaHQgKyBtYXBfcG9zLnlcbiAgICAgICAgXTtcbiAgICB9XG4gICAgXG4gICAgZ2VuZXJhdGVTY2FsZSh7c2l6ZSwgc2NhbGU6IHpvb21fc2NhbGV9KSB7XG4gICAgICAgIGxldCBzY2FsZTtcbiAgICAgICAgaWYoc2l6ZVswXSA8IHNpemVbMV0pIHtcbiAgICAgICAgICAgIHNjYWxlID0gW3pvb21fc2NhbGUsIChzaXplWzBdIC8gc2l6ZVsxXSkgKiB6b29tX3NjYWxlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNjYWxlID0gWyhzaXplWzFdIC8gc2l6ZVswXSkgKiB6b29tX3NjYWxlLCB6b29tX3NjYWxlXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2NhbGU7XG4gICAgfVxuXG4gICAgbWF0M011bChhLCBiKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCAzOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzWzMqaSArIGpdICs9IGFbMyppICsga10gKiBiWzMqayArIGpdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIG1hdDNWZWNNdWwoYSwgdikge1xuICAgICAgICBjb25zdCByZXMgPSBbMCwgMCwgMF07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKykge1xuICAgICAgICAgICAgICAgIHJlc1tpXSArPSBhWzMqaiArIGldICogdltqXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIG1hdDNSb3RhdGlvbihheGlzLCBhbmdsZSkge1xuICAgICAgICBjb25zdCByZXMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07XG4gICAgICAgIHJlc1szKmF4aXMgKyBheGlzXSA9IDE7XG4gICAgICAgIHJlc1szKigoYXhpcyArIDEpICUgMykgKyAoYXhpcyArIDEpICUgM10gPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgICAgIHJlc1szKigoYXhpcyArIDIpICUgMykgKyAoYXhpcyArIDEpICUgM10gPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgICAgIHJlc1szKigoYXhpcyArIDEpICUgMykgKyAoYXhpcyArIDIpICUgM10gPSAtTWF0aC5zaW4oYW5nbGUpO1xuICAgICAgICByZXNbMyooKGF4aXMgKyAyKSAlIDMpICsgKGF4aXMgKyAyKSAlIDNdID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIGdlbmVyYXRlVHJhbnNmb3JtKHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IHsgY2VudGVyIH0gPSBzdGF0ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0M011bCh0aGlzLm1hdDNSb3RhdGlvbigwLCBjZW50ZXJbMV0pLCB0aGlzLm1hdDNSb3RhdGlvbigxLCAtY2VudGVyWzBdKSlcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUludmVyc2VUcmFuc2Zvcm0oc3RhdGUpIHtcbiAgICAgICAgY29uc3QgeyBjZW50ZXIgfSA9IHN0YXRlO1xuICAgICAgICByZXR1cm4gdGhpcy5tYXQzTXVsKHRoaXMubWF0M1JvdGF0aW9uKDEsIGNlbnRlclswXSksIHRoaXMubWF0M1JvdGF0aW9uKDAsIC1jZW50ZXJbMV0pKVxuICAgIH1cblxuICAgIG5vcm1hbGl6ZVBvc2l0aW9uKFtiZXRhLCBnYW1tYV0pIHtcbiAgICAgICAgZ2FtbWEgPSAoZ2FtbWEgKyBNYXRoLlBJKSAlICgyICogTWF0aC5QSSk7XG4gICAgICAgIGdhbW1hID0gKDIgKiBNYXRoLlBJICsgZ2FtbWEpICUgKDIgKiBNYXRoLlBJKSAtIE1hdGguUEk7XG4gICAgICAgIGlmIChnYW1tYSA8IC1NYXRoLlBJIC8gMikge1xuICAgICAgICAgICAgYmV0YSArPSBNYXRoLlBJO1xuICAgICAgICAgICAgZ2FtbWEgPSBNYXRoLmFicygtTWF0aC5QSSAvIDIgLSBnYW1tYSkgLSBNYXRoLlBJIC8gMjtcbiAgICAgICAgfSBlbHNlIGlmIChnYW1tYSA+IE1hdGguUEkgLyAyKSB7XG4gICAgICAgICAgICBiZXRhICs9IE1hdGguUEk7XG4gICAgICAgICAgICBnYW1tYSA9IE1hdGguUEkgLyAyIC0gTWF0aC5hYnMoZ2FtbWEgLSBNYXRoLlBJIC8gMik7XG4gICAgICAgIH1cbiAgICAgICAgYmV0YSA9IChiZXRhICsgTWF0aC5QSSkgJSAoMiAqIE1hdGguUEkpO1xuICAgICAgICBiZXRhID0gKDIgKiBNYXRoLlBJICsgYmV0YSkgJSAoMiAqIE1hdGguUEkpO1xuICAgICAgICByZXR1cm4gW2JldGEgLSBNYXRoLlBJLCBnYW1tYV07XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVUZXhNaW5NYXgoc3RhdGUpIHtcbiAgICAgICAgY29uc3QgeyBjZW50ZXIgfSA9IHN0YXRlO1xuICAgICAgICBjb25zdCBzY3JlZW5fc2NhbGUgPSB0aGlzLmdlbmVyYXRlU2NhbGUoc3RhdGUpO1xuICAgICAgICBjb25zdCBbYmV0YSwgZ2FtbWFdID0gdGhpcy5ub3JtYWxpemVQb3NpdGlvbihjZW50ZXIpO1xuICAgICAgICBsZXQgcmVzO1xuICAgICAgICBpZiAoMSAvIChzY3JlZW5fc2NhbGVbMF0gKiBzY3JlZW5fc2NhbGVbMF0pICsgMSAvIChzY3JlZW5fc2NhbGVbMV0gKiBzY3JlZW5fc2NhbGVbMV0pID4gMSkge1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGdhbW1hKSA8IDAuMSkge1xuICAgICAgICAgICAgICAgIHJlcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgWzAuNSArIGJldGEgLyBNYXRoLlBJIC8gMiAtIDAuMjYsIDBdLFxuICAgICAgICAgICAgICAgICAgICBbMC41ICsgYmV0YSAvIE1hdGguUEkgLyAyICsgMC4yNiwgMV1cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChnYW1tYSA8IDApIHtcbiAgICAgICAgICAgICAgICByZXMgPSBbWzAsIDBdLCBbMSwgMSArIGdhbW1hIC8gTWF0aC5QSV1dO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMgPSBbWzAsIGdhbW1hIC8gTWF0aC5QSV0sIFsxLCAxXV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoMC41IC0gTWF0aC5hYnMoZ2FtbWEpIC8gTWF0aC5QSSA8IE1hdGgubWF4KDAuMDUsIDAuNSAvIHNjcmVlbl9zY2FsZVsxXSkpIHtcbiAgICAgICAgICAgIGlmIChnYW1tYSA8IDApIHtcbiAgICAgICAgICAgICAgICByZXMgPSBbWzAsIDBdLCBbMSwgMSArIGdhbW1hIC8gTWF0aC5QSV1dO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMgPSBbWzAsIGdhbW1hIC8gTWF0aC5QSV0sIFsxLCAxXV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzaXplX3ggPSBNYXRoLm1pbigwLjI1LCAwLjI1ICogKDEgKyAoTWF0aC5hYnMoZ2FtbWEpIC8gTWF0aC5QSSA+IDAuNCA/IDMgOiAxKSAqIE1hdGguYWJzKGdhbW1hKSkgLyBzY3JlZW5fc2NhbGVbMF0pO1xuICAgICAgICAgICAgY29uc3Qgc2l6ZV95ID0gTWF0aC5taW4oMC4yNSwgMC4yNSAqICgxICsgTWF0aC5hYnMoZ2FtbWEpKSAvIHNjcmVlbl9zY2FsZVsxXSk7XG4gICAgICAgICAgICByZXMgPSBbXG4gICAgICAgICAgICAgICAgWzAuNSArIGJldGEgLyBNYXRoLlBJIC8gMiAtIHNpemVfeCwgMC41ICsgZ2FtbWEgLyBNYXRoLlBJIC0gMiAqIHNpemVfeV0sXG4gICAgICAgICAgICAgICAgWzAuNSArIGJldGEgLyBNYXRoLlBJIC8gMiArIHNpemVfeCwgMC41ICsgZ2FtbWEgLyBNYXRoLlBJICsgMiAqIHNpemVfeV1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgcmVzWzBdWzBdID0gKDEgKyAocmVzWzBdWzBdICUgMSkpICUgMTtcbiAgICAgICAgcmVzWzFdWzBdID0gKDEgKyAocmVzWzFdWzBdICUgMSkpICUgMTtcbiAgICAgICAgaWYgKHJlc1sxXVswXSA8PSByZXNbMF1bMF0pIHtcbiAgICAgICAgICAgIHJlc1sxXVswXSArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJlc1swXVsxXSA9IE1hdGgubWluKDEsIE1hdGgubWF4KDAsIHJlc1swXVsxXSkpO1xuICAgICAgICByZXNbMV1bMV0gPSBNYXRoLm1pbigxLCBNYXRoLm1heCgwLCByZXNbMV1bMV0pKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbiAgICBpbml0Rm9yQ29udGV4dChjYW52YXMsIGdsLCBsb2NhdGlvbnMsIHRyaWFuZ3VsYXRlZCkge1xuICAgICAgICBzdXBlci5pbml0Rm9yQ29udGV4dChjYW52YXMsIGdsLCBsb2NhdGlvbnMsIHRyaWFuZ3VsYXRlZCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0ZXh0dXJlID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcbiAgICAgICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBURVhUVVJFX1dJRFRILCBURVhUVVJFX0hFSUdIVCwgMCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgbnVsbCk7XG4gICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5MSU5FQVIpO1xuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSk7XG5cbiAgICAgICAgY29uc3QgZWFydGhfc2hhZGVyX3Byb2dyYW0gPSB0aGlzLmNyZWF0ZVNoYWRlclByb2dyYW0oZ2wsIEVhcnRoVmVydGV4U2hhZGVyLCBFYXJ0aEZyYWdtZW50U2hhZGVyKTtcbiAgICAgICAgY29uc3QgZWFydGhfcG9zaXRpb25fYXR0cmlidXRlID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24oZWFydGhfc2hhZGVyX3Byb2dyYW0sICdhVmVydGV4UG9zaXRpb24nKTtcbiAgICAgICAgY29uc3QgZWFydGhfc2NhbGVfdW5pZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihlYXJ0aF9zaGFkZXJfcHJvZ3JhbSwgJ3VTY2FsZScpO1xuICAgICAgICBjb25zdCBlYXJ0aF9zY2FsZTJfdW5pZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihlYXJ0aF9zaGFkZXJfcHJvZ3JhbSwgJ3VTY2FsZVonKTtcbiAgICAgICAgY29uc3QgZWFydGhfc2FtcGxlcl91bmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKGVhcnRoX3NoYWRlcl9wcm9ncmFtLCAndVNhbXBsZXInKTtcbiAgICAgICAgY29uc3QgZWFydGhfdGV4bWluX3VuaWZvcm0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oZWFydGhfc2hhZGVyX3Byb2dyYW0sICd1VGV4TWluJyk7XG4gICAgICAgIGNvbnN0IGVhcnRoX3RleG1heF91bmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKGVhcnRoX3NoYWRlcl9wcm9ncmFtLCAndVRleE1heCcpO1xuICAgICAgICBjb25zdCBlYXJ0aF90cmFuc2Zvcm1fdW5pZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihlYXJ0aF9zaGFkZXJfcHJvZ3JhbSwgJ3VUcmFuc2Zvcm0nKTtcblxuICAgICAgICBjb25zdCBlYXJ0aF92ZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgICAgICAgICAgLTIsIDIsICAgMiwgMiwgICAyLCAtMiwgICAtMiwgLTIsXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCBlYXJ0aF90cmlhbmdsZXMgPSBuZXcgVWludDE2QXJyYXkoW1xuICAgICAgICAgICAgMCwgMSwgMiwgICAyLCAzLCAwLFxuICAgICAgICBdKTtcbiAgICAgICAgY29uc3QgZWFydGhfcG9zaXRpb25fYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBlYXJ0aF9wb3NpdGlvbl9idWZmZXIpO1xuICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgZWFydGhfdmVydGljZXMsIGdsLlNUQVRJQ19EUkFXKTtcbiAgICAgICAgY29uc3QgZWFydGhfaW5kZXhfYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGVhcnRoX2luZGV4X2J1ZmZlcik7XG4gICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGVhcnRoX3RyaWFuZ2xlcywgZ2wuU1RBVElDX0RSQVcpO1xuXG4gICAgICAgIHRoaXMud2ViZ2xfZGF0YS50ZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgdGhpcy53ZWJnbF9kYXRhLmVhcnRoX2RhdGEgPSB7XG4gICAgICAgICAgICBzaGFkZXJfcHJvZ3JhbTogZWFydGhfc2hhZGVyX3Byb2dyYW0sXG4gICAgICAgICAgICBwb3NpdGlvbl9hdHRyaWJ1dGU6IGVhcnRoX3Bvc2l0aW9uX2F0dHJpYnV0ZSxcbiAgICAgICAgICAgIHNjYWxlX3VuaWZvcm06IGVhcnRoX3NjYWxlX3VuaWZvcm0sXG4gICAgICAgICAgICBzY2FsZTJfdW5pZm9ybTogZWFydGhfc2NhbGUyX3VuaWZvcm0sXG4gICAgICAgICAgICBzYW1wbGVyX3VuaWZvcm06IGVhcnRoX3NhbXBsZXJfdW5pZm9ybSxcbiAgICAgICAgICAgIHRleG1pbl91bmlmb3JtOiBlYXJ0aF90ZXhtaW5fdW5pZm9ybSxcbiAgICAgICAgICAgIHRleG1heF91bmlmb3JtOiBlYXJ0aF90ZXhtYXhfdW5pZm9ybSxcbiAgICAgICAgICAgIHRyYW5zZm9ybV91bmlmb3JtOiBlYXJ0aF90cmFuc2Zvcm1fdW5pZm9ybSxcbiAgICAgICAgICAgIHZlcnRpY2VzOiBlYXJ0aF92ZXJ0aWNlcyxcbiAgICAgICAgICAgIHRyaWFuZ2xlczogZWFydGhfdHJpYW5nbGVzLFxuICAgICAgICAgICAgZ2xfcG9zaXRpb25fYnVmZmVyOiBlYXJ0aF9wb3NpdGlvbl9idWZmZXIsXG4gICAgICAgICAgICBnbF9pbmRleF9idWZmZXI6IGVhcnRoX2luZGV4X2J1ZmZlcixcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBkZWluaXRSZXNvdXJjZXMobG9jYXRpb25zLCB0cmlhbmd1bGF0ZWQpIHtcbiAgICAgICAgaWYgKHRoaXMud2ViZ2xfZGF0YT8uY29udGV4dCkge1xuICAgICAgICAgICAgY29uc3QgZ2wgPSB0aGlzLndlYmdsX2RhdGEuY29udGV4dDtcbiAgICAgICAgICAgIGdsLmRlbGV0ZVRleHR1cmUodGhpcy53ZWJnbF9kYXRhLnRleHR1cmUpO1xuICAgICAgICAgICAgZ2wuZGVsZXRlQnVmZmVyKHRoaXMud2ViZ2xfZGF0YS5lYXJ0aF9kYXRhLmdsX3Bvc2l0aW9uX2J1ZmZlcik7XG4gICAgICAgICAgICBnbC5kZWxldGVCdWZmZXIodGhpcy53ZWJnbF9kYXRhLmVhcnRoX2RhdGEuZ2xfaW5kZXhfYnVmZmVyKTtcbiAgICAgICAgICAgIGdsLmdldEF0dGFjaGVkU2hhZGVycyh0aGlzLndlYmdsX2RhdGEuZWFydGhfZGF0YS5zaGFkZXJfcHJvZ3JhbSkuZm9yRWFjaChzID0+IHtcbiAgICAgICAgICAgICAgICBnbC5kZWxldGVTaGFkZXIocyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGdsLmRlbGV0ZVByb2dyYW0odGhpcy53ZWJnbF9kYXRhLmVhcnRoX2RhdGEuc2hhZGVyX3Byb2dyYW0pO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmRlaW5pdFJlc291cmNlcyhsb2NhdGlvbnMsIHRyaWFuZ3VsYXRlZCk7XG4gICAgfVxuXG4gICAgcmVuZGVyVG9UZXh0dXJlKGxvY2F0aW9ucywgdHJpYW5ndWxhdGVkLCBzdGF0ZSwgbWluLCBtYXgpIHtcbiAgICAgICAgY29uc3QgZ2wgPSB0aGlzLndlYmdsX2RhdGEuY29udGV4dDtcbiAgICAgICAgY29uc3QgZmlsbF9kYXRhID0gdGhpcy53ZWJnbF9kYXRhLmZpbGxfZGF0YTtcbiAgICAgICAgY29uc3Qgc3Ryb2tlX2RhdGEgPSB0aGlzLndlYmdsX2RhdGEuc3Ryb2tlX2RhdGE7XG4gICAgICAgIGNvbnN0IHRyaWFuZ2xlcyA9IHRoaXMud2ViZ2xfZGF0YS50cmlhbmdsZXM7XG5cbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy53ZWJnbF9kYXRhLnRleHR1cmUpO1xuICAgICAgICBjb25zdCBmYiA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XG4gICAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZmIpO1xuICAgICAgICBjb25zdCBhdHRhY2htZW50ID0gZ2wuQ09MT1JfQVRUQUNITUVOVDA7XG4gICAgICAgIGdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGdsLkZSQU1FQlVGRkVSLCBhdHRhY2htZW50LCBnbC5URVhUVVJFXzJELCB0aGlzLndlYmdsX2RhdGEudGV4dHVyZSwgMCk7XG4gICAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIFRFWFRVUkVfV0lEVEgsIFRFWFRVUkVfSEVJR0hUKTtcblxuICAgICAgICBjb25zdCB0cmFuc2xhdGUgPSBbXG4gICAgICAgICAgICAyICogTWF0aC5QSSAqICgwLjUgLSAobWluWzBdICsgbWF4WzBdKSAvIDIpLFxuICAgICAgICAgICAgTWF0aC5QSSAqICgwLjUgLSAobWluWzFdICsgbWF4WzFdKSAvIDIpLFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBzY2FsZSA9IFsxIC8gKG1heFswXSAtIG1pblswXSkgLyBNYXRoLlBJLCAyIC8gKG1heFsxXSAtIG1pblsxXSkgLyBNYXRoLlBJXTtcbiAgICAgICAgY29uc3Qgc3Ryb2tlX3NjYWxlID0gW1xuICAgICAgICAgICAgMC41IC8gKG1heFswXSAtIG1pblswXSkgKiBNYXRoLmNicnQoc3RhdGUuc2NhbGUpIC8gc3RhdGUuc2NhbGUsXG4gICAgICAgICAgICAwLjUgLyAobWF4WzFdIC0gbWluWzFdKSAqIE1hdGguY2JydChzdGF0ZS5zY2FsZSkgLyBzdGF0ZS5zY2FsZVxuICAgICAgICBdO1xuXG4gICAgICAgIGdsLmNsZWFyQ29sb3IoMC4wLCAwLjAsIDAuMCwgMC4wKTtcbiAgICAgICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgbG9jYXRpb24gY29sb3JzXG4gICAgICAgIGNvbnN0IGNvbG9ycyA9IG5ldyBVaW50OEFycmF5KGxvY2F0aW9ucy5sZW5ndGggKiA0KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29sb3JzWzQqaSArIGpdID0gbG9jYXRpb25zW2ldLmNvbG9yW2pdO1xuICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbnNbaV0uaWQgPT09IHN0YXRlLmhvdmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yc1s0KmkgKyBqXSAqPSAwLjg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sb3JzWzQqaSArIDNdID0gMjU1O1xuICAgICAgICB9XG4gICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRyaWFuZ2xlcy50ZXh0dXJlKTtcbiAgICAgICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBsb2NhdGlvbnMubGVuZ3RoLCAxLCAwLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBjb2xvcnMpO1xuXG4gICAgICAgIC8vIERyYXcgZmlsbFxuICAgICAgICBnbC51c2VQcm9ncmFtKGZpbGxfZGF0YS5zaGFkZXJfcHJvZ3JhbSk7XG4gICAgICAgIGdsLnVuaWZvcm0yZnYoZmlsbF9kYXRhLnNjYWxlX3VuaWZvcm0sIHNjYWxlKTtcbiAgICAgICAgZ2wudW5pZm9ybTFpKGZpbGxfZGF0YS5jb2xvcnNfdW5pZm9ybSwgMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRyaWFuZ2xlcy5wb3NpdGlvbl9idWZmZXIpO1xuICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGZpbGxfZGF0YS5wb3NpdGlvbl9hdHRyaWJ1dGUsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGZpbGxfZGF0YS5wb3NpdGlvbl9hdHRyaWJ1dGUpO1xuXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0cmlhbmdsZXMuY29sb3JfYnVmZmVyKTtcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihmaWxsX2RhdGEuY29sb3JfYXR0cmlidXRlLCAxLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShmaWxsX2RhdGEuY29sb3JfYXR0cmlidXRlKTtcblxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0cmlhbmdsZXMuaW5kZXhfYnVmZmVyKTtcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPD0gMTsgeCsrKSB7XG4gICAgICAgICAgICBnbC51bmlmb3JtMmZ2KGZpbGxfZGF0YS50cmFuc2xhdGVfdW5pZm9ybSwgdHJhbnNsYXRlKTtcbiAgICAgICAgICAgIGdsLmRyYXdFbGVtZW50cyhnbC5UUklBTkdMRVMsIHRyaWFuZ3VsYXRlZC50cmlhbmdsZXMubGVuZ3RoLCBnbC5VTlNJR05FRF9JTlQsIDApO1xuICAgICAgICAgICAgdHJhbnNsYXRlWzBdICs9IDIgKiBNYXRoLlBJO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRHJhdyBzdHJva2VcbiAgICAgICAgZ2wudXNlUHJvZ3JhbShzdHJva2VfZGF0YS5zaGFkZXJfcHJvZ3JhbSk7XG4gICAgICAgIGdsLnVuaWZvcm0yZnYoc3Ryb2tlX2RhdGEuc2NhbGVfdW5pZm9ybSwgc2NhbGUpO1xuICAgICAgICBnbC51bmlmb3JtMmZ2KHN0cm9rZV9kYXRhLnNjYWxlMl91bmlmb3JtLCBzdHJva2Vfc2NhbGUpO1xuICAgICAgICBnbC51bmlmb3JtMWYoc3Ryb2tlX2RhdGEud2lkdGhfdW5pZm9ybSwgMC4wMDI1KTtcbiAgICAgICAgZ2wudW5pZm9ybTNmdihzdHJva2VfZGF0YS5jb2xvcl91bmlmb3JtLCBbMC4yNzEsIDAuMzAyLCAwLjM4XSk7XG4gICAgICAgIFxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdHJpYW5nbGVzLm91dGxpbmVfbm9ybWFsX2J1ZmZlcik7XG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc3Ryb2tlX2RhdGEubm9ybWFsX2F0dHJpYnV0ZSwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoc3Ryb2tlX2RhdGEubm9ybWFsX2F0dHJpYnV0ZSk7XG5cbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRyaWFuZ2xlcy5vdXRsaW5lX3Bvc2l0aW9uX2J1ZmZlcik7XG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc3Ryb2tlX2RhdGEucG9zaXRpb25fYXR0cmlidXRlLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShzdHJva2VfZGF0YS5wb3NpdGlvbl9hdHRyaWJ1dGUpO1xuICAgICAgICB0cmFuc2xhdGVbMF0gLT0gNCAqIE1hdGguUEk7XG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDw9IDE7IHgrKykge1xuICAgICAgICAgICAgZ2wudW5pZm9ybTJmdihzdHJva2VfZGF0YS50cmFuc2xhdGVfdW5pZm9ybSwgdHJhbnNsYXRlKTtcbiAgICAgICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVTLCAwLCB0cmlhbmd1bGF0ZWQub3V0bGluZV90cmlhbmdsZXMubGVuZ3RoIC8gMik7XG4gICAgICAgICAgICB0cmFuc2xhdGVbMF0gKz0gMiAqIE1hdGguUEk7XG4gICAgICAgIH1cblxuICAgICAgICBnbC52aWV3cG9ydCgwLCAwLCB0aGlzLndlYmdsX2RhdGEuY2FudmFzLmNsaWVudFdpZHRoLCB0aGlzLndlYmdsX2RhdGEuY2FudmFzLmNsaWVudEhlaWdodCk7XG4gICAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XG4gICAgfVxuXG4gICAgcmVuZGVyTWFwSW5Db250ZXh0KGxvY2F0aW9ucywgdHJpYW5ndWxhdGVkLCBzdGF0ZSkge1xuICAgICAgICBjb25zdCBnbCA9IHRoaXMud2ViZ2xfZGF0YS5jb250ZXh0O1xuICAgICAgICBjb25zdCBlYXJ0aF9kYXRhID0gdGhpcy53ZWJnbF9kYXRhLmVhcnRoX2RhdGE7XG4gICAgICAgIGNvbnN0IFttaW4sIG1heF0gPSB0aGlzLmdlbmVyYXRlVGV4TWluTWF4KHN0YXRlKTtcblxuICAgICAgICB0aGlzLnJlbmRlclRvVGV4dHVyZShsb2NhdGlvbnMsIHRyaWFuZ3VsYXRlZCwgc3RhdGUsIG1pbiwgbWF4KTtcblxuICAgICAgICBnbC5jbGVhckNvbG9yKDAuMCwgMC4wLCAwLjAsIDAuMCk7XG4gICAgICAgIGdsLmNsZWFyRGVwdGgoMSk7XG4gICAgICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xuXG4gICAgICAgIC8vIERyYXcgZ2xvYmVcbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy53ZWJnbF9kYXRhLnRleHR1cmUpO1xuICAgICAgICBnbC51c2VQcm9ncmFtKGVhcnRoX2RhdGEuc2hhZGVyX3Byb2dyYW0pO1xuICAgICAgICBnbC51bmlmb3JtMmZ2KGVhcnRoX2RhdGEuc2NhbGVfdW5pZm9ybSwgdGhpcy5nZW5lcmF0ZVNjYWxlKHN0YXRlKSk7XG4gICAgICAgIGdsLnVuaWZvcm0yZnYoZWFydGhfZGF0YS5zY2FsZV91bmlmb3JtLCB0aGlzLmdlbmVyYXRlU2NhbGUoc3RhdGUpKTtcbiAgICAgICAgZ2wudW5pZm9ybTFmdihlYXJ0aF9kYXRhLnNjYWxlMl91bmlmb3JtLCBbc3RhdGUuc2NhbGVdKTtcbiAgICAgICAgZ2wudW5pZm9ybTFpKGVhcnRoX2RhdGEuc2FtcGxlcl91bmlmb3JtLCAwKTtcbiAgICAgICAgZ2wudW5pZm9ybTJmdihlYXJ0aF9kYXRhLnRleG1pbl91bmlmb3JtLCBtaW4pO1xuICAgICAgICBnbC51bmlmb3JtMmZ2KGVhcnRoX2RhdGEudGV4bWF4X3VuaWZvcm0sIG1heCk7XG4gICAgICAgIGdsLnVuaWZvcm1NYXRyaXgzZnYoZWFydGhfZGF0YS50cmFuc2Zvcm1fdW5pZm9ybSwgZmFsc2UsIHRoaXMuZ2VuZXJhdGVUcmFuc2Zvcm0oc3RhdGUpKTtcbiAgICAgICAgXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBlYXJ0aF9kYXRhLmdsX3Bvc2l0aW9uX2J1ZmZlcik7XG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoZWFydGhfZGF0YS5wb3NpdGlvbl9hdHRyaWJ1dGUsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGVhcnRoX2RhdGEucG9zaXRpb25fYXR0cmlidXRlKTtcblxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBlYXJ0aF9kYXRhLmdsX2luZGV4X2J1ZmZlcik7XG4gICAgICAgIGdsLmRyYXdFbGVtZW50cyhnbC5UUklBTkdMRVMsIGVhcnRoX2RhdGEudHJpYW5nbGVzLmxlbmd0aCwgZ2wuVU5TSUdORURfU0hPUlQsIDApO1xuICAgIH1cbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgXCJcXG5hdHRyaWJ1dGUgdmVjMiBhVmVydGV4UG9zaXRpb247XFxuXFxudW5pZm9ybSB2ZWMyIHVTY2FsZTtcXG5cXG52YXJ5aW5nIHZlYzIgdlBpeGVsUG9zO1xcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgdlBpeGVsUG9zID0gYVZlcnRleFBvc2l0aW9uO1xcbiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQodVNjYWxlICogYVZlcnRleFBvc2l0aW9uLCAwLjAsIDEuMCk7XFxufVxcblxcblwiOyIsImV4cG9ydCBkZWZhdWx0IFwiXFxuI2lmZGVmIEdMX0VTXFxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG4jZW5kaWZcXG5cXG4jZGVmaW5lIFBJIDMuMTQxNTkyNjUzOFxcblxcbnVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1xcbnVuaWZvcm0gdmVjMiB1VGV4TWluO1xcbnVuaWZvcm0gdmVjMiB1VGV4TWF4O1xcbnVuaWZvcm0gbWF0MyB1VHJhbnNmb3JtO1xcbnVuaWZvcm0gZmxvYXQgdVNjYWxlWjtcXG5cXG52YXJ5aW5nIHZlYzIgdlBpeGVsUG9zO1xcblxcbmZsb2F0IGZtb2QoZmxvYXQgYSwgZmxvYXQgYikge1xcbiAgICByZXR1cm4gYSAtIChiICogZmxvb3IoYSAvIGIpKTtcXG59XFxuXFxudmVjMiBub3JtYWxpemVQb3NpdGlvbih2ZWMyIHBvcykge1xcbiAgICBwb3MueSA9IGZtb2QocG9zLnkgKyBQSSwgMi4wICogUEkpO1xcbiAgICBwb3MueSA9IGZtb2QoMi4wICogUEkgKyBwb3MueSwgMi4wICogUEkpIC0gUEk7XFxuICAgIGlmIChwb3MueSA8IC1QSSAvIDIuMCkge1xcbiAgICAgICAgcG9zLnggKz0gUEk7XFxuICAgICAgICBwb3MueSA9IGFicygtUEkgLyAyLjAgLSBwb3MueSkgLSBQSSAvIDIuMDtcXG4gICAgfSBlbHNlIGlmIChwb3MueSA+IFBJIC8gMi4wKSB7XFxuICAgICAgICBwb3MueCArPSBQSTtcXG4gICAgICAgIHBvcy55ID0gUEkgLyAyLjAgLSBhYnMocG9zLnkgLSBQSSAvIDIuMCk7XFxuICAgIH1cXG4gICAgcG9zLnggPSBmbW9kKHBvcy54ICsgUEksIDIuMCAqIFBJKTtcXG4gICAgcG9zLnggPSBmbW9kKDIuMCAqIFBJICsgcG9zLngsIDIuMCAqIFBJKTtcXG4gICAgcmV0dXJuIHZlYzIocG9zLnggLSBQSSwgcG9zLnkpO1xcbn1cXG5cXG52ZWMzIHNwaGVyZVBvc2l0aW9uKCkge1xcbiAgICB2ZWMzIHBvcyA9IHZlYzModlBpeGVsUG9zLCAwLjApO1xcbiAgICBwb3MueiA9IDEuMCAtIHBvcy54KnBvcy54IC0gcG9zLnkqcG9zLnk7XFxuICAgIGlmIChwb3MueiA8IDAuMCkge1xcbiAgICAgICAgZmxvYXQgZGlzdCA9IHNxcnQocG9zLngqcG9zLnggKyBwb3MueSpwb3MueSk7XFxuICAgICAgICBwb3MueCAvPSBkaXN0O1xcbiAgICAgICAgcG9zLnkgLz0gZGlzdDtcXG4gICAgICAgIHBvcy56ID0gMC4wO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgICAgcG9zLnogPSBzcXJ0KHBvcy56KTtcXG4gICAgfVxcbiAgICByZXR1cm4gcG9zO1xcbn1cXG5cXG52ZWMyIHRleFBvc2l0aW9uKHZlYzMgcG9zKSB7XFxuICAgIHBvcyA9IHVUcmFuc2Zvcm0gKiBwb3M7XFxuICAgIHZlYzIgY29vcmQgPSB2ZWMyKFxcbiAgICAgICAgYXRhbihwb3MueCwgcG9zLnopLFxcbiAgICAgICAgYXRhbihwb3MueSwgc3FydChwb3MueCpwb3MueCArIHBvcy56KnBvcy56KSlcXG4gICAgKTtcXG4gICAgdmVjMiBsb25sYXQgPSBub3JtYWxpemVQb3NpdGlvbihjb29yZCk7XFxuICAgIHJldHVybiB2ZWMyKChsb25sYXQueCArIFBJKSAvICgyLjAgKiBQSSksIChsb25sYXQueSArIFBJIC8gMi4wKSAvIFBJKTtcXG59XFxuXFxuZmxvYXQgY29tcHV0ZUxpZ2h0KHZlYzMgcG9zLCBib29sIHdhdGVyKSB7XFxuICAgIHZlYzMgbGlnaHQgPSBub3JtYWxpemUodmVjMygtMS4wLCAxLjAsIDMuMCkpO1xcbiAgICBmbG9hdCBjID0gbWF4KDAuMCwgZG90KGxpZ2h0LCBwb3MpKTtcXG4gICAgZmxvYXQgYSA9IG1heCgwLjAsIGRvdCh2ZWMzKDAuMCwgMC4wLCAxLjApLCByZWZsZWN0KC1saWdodCwgcG9zKSkpO1xcbiAgICBhICo9IGE7XFxuICAgIGlmICh3YXRlcikge1xcbiAgICAgICAgcmV0dXJuIGMgKiAwLjcgKyBhICogMC4xICsgMC4yO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgICAgcmV0dXJuIGMgKiAwLjUgKyBhICogMC4zICsgMC4yO1xcbiAgICB9XFxufVxcblxcbnZlYzMgd2F0ZXJDb2xvcih2ZWMzIHBvcykge1xcbiAgICByZXR1cm4gdmVjMygwLjAsIDAuMiwgMC40KTtcXG59XFxuXFxudm9pZCBtYWluKCkge1xcbiAgICBib29sIHdhdGVyID0gZmFsc2U7XFxuICAgIHZlYzMgcG9zID0gc3BoZXJlUG9zaXRpb24oKTtcXG4gICAgZmxvYXQgZGlzdCA9IHZQaXhlbFBvcy54ICogdlBpeGVsUG9zLnggKyB2UGl4ZWxQb3MueSAqIHZQaXhlbFBvcy55O1xcbiAgICBmbG9hdCBlZGdlID0gKGRpc3QgLSAxLjApICogKGRpc3QgLSAxLjApO1xcbiAgICB2ZWMyIHRleENvb3JkID0gdGV4UG9zaXRpb24ocG9zKTtcXG4gICAgaWYgKHVUZXhNaW4ueCA8PSAxLjAgKyB0ZXhDb29yZC54ICYmIHVUZXhNYXgueCA+PSAxLjAgKyB0ZXhDb29yZC54KSB7XFxuICAgICAgICB2ZWMyIHRleFBvcyA9IHZlYzIoXFxuICAgICAgICAgICAgKHRleENvb3JkLnggKyAxLjAgLSB1VGV4TWluLngpIC8gKHVUZXhNYXgueCAtIHVUZXhNaW4ueCksXFxuICAgICAgICAgICAgKHRleENvb3JkLnkgLSB1VGV4TWluLnkpIC8gKHVUZXhNYXgueSAtIHVUZXhNaW4ueSlcXG4gICAgICAgICk7XFxuICAgICAgICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHRleFBvcyk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICB2ZWMyIHRleFBvcyA9IHZlYzIoXFxuICAgICAgICAgICAgKHRleENvb3JkLnggLSB1VGV4TWluLngpIC8gKHVUZXhNYXgueCAtIHVUZXhNaW4ueCksXFxuICAgICAgICAgICAgKHRleENvb3JkLnkgLSB1VGV4TWluLnkpIC8gKHVUZXhNYXgueSAtIHVUZXhNaW4ueSlcXG4gICAgICAgICk7XFxuICAgICAgICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHRleFBvcyk7XFxuICAgIH1cXG4gICAgaWYgKGxlbmd0aChnbF9GcmFnQ29sb3IpID09IDAuMCkge1xcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh3YXRlckNvbG9yKHBvcyksIDEuMCk7XFxuICAgICAgICB3YXRlciA9IHRydWU7XFxuICAgIH1cXG4gICAgaWYgKGRpc3QgPj0gMS4wKSB7XFxuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KDAuMCwgMC4wLCAwLjAsIDAuMCk7XFxuICAgIH1cXG4gICAgZmxvYXQgZiA9IDAuNSAqIGV4cCgtMS4wZTQgKiBlZGdlKTtcXG4gICAgZ2xfRnJhZ0NvbG9yID0gKDEuMCAtIGYpICogZ2xfRnJhZ0NvbG9yICsgZiAqIHZlYzQoMC41LCAwLjc1LCAxLjAsIDEuMCk7XFxuICAgIGlmIChkaXN0IDwgMS4wKSB7XFxuICAgICAgICBmbG9hdCBmID0gMC4xICogZXhwKC0xLjAgLyAoMi4wIC0gcG9zLnopICogdVNjYWxlWikgKyAwLjIgKiAoMS4wIC0gcG9zLnopO1xcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gKDEuMCAtIGYpICogZ2xfRnJhZ0NvbG9yICsgZiAqIHZlYzQoMC4wLCAwLjc1LCAxLjAsIDEuMCk7XFxuICAgIH1cXG4gICAgZ2xfRnJhZ0NvbG9yLnh5eiA9IGNvbXB1dGVMaWdodChwb3MsIHdhdGVyKSAqIGdsX0ZyYWdDb2xvci54eXo7XFxufVxcblxcblwiOyIsIlxuaW1wb3J0IHsgTGl0RWxlbWVudCwgaHRtbCwgY3NzIH0gZnJvbSAnbGl0JztcblxuaW1wb3J0IFdlYkdMUmVuZGVyZXIgZnJvbSAnLi93ZWJnbC1yZW5kZXJlcic7XG5pbXBvcnQgV2ViR0xSZW5kZXJlcjNkIGZyb20gJy4vd2ViZ2wtcmVuZGVyZXItM2QnO1xuXG5pbXBvcnQgeyBUcmlhbmd1bGF0ZWREYXRhIH0gZnJvbSAnLi4vLi4vcGtnL2luZGV4J1xuXG5jbGFzcyBNYXBCYWNrZW5kV2ViR2wgZXh0ZW5kcyBMaXRFbGVtZW50IHtcblxuICAgIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxvY2F0aW9uczogeyBhdHRyaWJ1dGU6IHRydWUgfSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgc3R5bGVzKCkge1xuICAgICAgICByZXR1cm4gY3NzYFxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAjbWFwIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1heC1oZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuICAgIH1cblxuICAgIG5ld1JlbmRlcmVyKCkge1xuICAgICAgICByZXR1cm4gbmV3IFdlYkdMUmVuZGVyZXIoKTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHRoaXMubmV3UmVuZGVyZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGNlbnRlcjogWzAsIDBdLFxuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICBtaW46IFswLCAwXSxcbiAgICAgICAgICAgIG1heDogWzAsIDBdLFxuICAgICAgICAgICAgc2l6ZTogWzAsIDBdLFxuICAgICAgICAgICAgaG92ZXI6IG51bGwsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZ2V0IGNlbnRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuY2VudGVyO1xuICAgIH1cblxuICAgIGdldCBzY2FsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuc2NhbGU7XG4gICAgfVxuXG4gICAgc2V0Q2VudGVyQW5kU2NhbGUoY2VudGVyLCBzY2FsZSkge1xuICAgICAgICB0aGlzLnN0YXRlLmNlbnRlciA9IGNlbnRlcjtcbiAgICAgICAgdGhpcy5zdGF0ZS5zY2FsZSA9IHNjYWxlO1xuICAgIH1cbiAgICBcbiAgICBjbGllbnRQb3NUb01hcFBvcyhjbGllbnRfcG9zKSB7XG4gICAgICAgIGNvbnN0IG1hcCA9IHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZCgnbWFwJyk7XG4gICAgICAgIGNvbnN0IG1hcF9wb3MgPSBtYXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLmNsaWVudFBvc1RvTWFwUG9zKGNsaWVudF9wb3MsIG1hcF9wb3MsIHRoaXMuc3RhdGUpO1xuICAgIH1cblxuICAgIGNsaWVudFBvc1RvUHJvalBvcyhjbGllbnRfcG9zKSB7XG4gICAgICAgIGNvbnN0IG1hcCA9IHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZCgnbWFwJyk7XG4gICAgICAgIGNvbnN0IG1hcF9wb3MgPSBtYXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLmNsaWVudFBvc1RvUHJvalBvcyhjbGllbnRfcG9zLCBtYXBfcG9zLCB0aGlzLnN0YXRlKTtcbiAgICB9XG4gICAgXG4gICAgcHJvalBvc1RvQ2xpZW50UG9zKGxvY2F0aW9uX3Bvcykge1xuICAgICAgICBjb25zdCBtYXAgPSB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpO1xuICAgICAgICBjb25zdCBtYXBfcG9zID0gbWFwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlci5wcm9qUG9zVG9DbGllbnRQb3MobG9jYXRpb25fcG9zLCBtYXBfcG9zLCB0aGlzLnN0YXRlKTtcbiAgICB9XG5cbiAgICBoYW5kbGVNb3VzZU1vdmUoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgcG9zID0gdGhpcy5jbGllbnRQb3NUb1Byb2pQb3MoW2V2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFldKTtcbiAgICAgICAgY29uc3QgaW50ZXIgPSB0aGlzLnRyaWFuZ3VsYXRlZD8uZ2V0X2ludGVyc2VjdGlvbihwb3MsIHRoaXMucmVuZGVyZXIucHJvamVjdCgpKTtcbiAgICAgICAgaWYgKGludGVyKSB7XG4gICAgICAgICAgICBjb25zdCBsb2MgPSB0aGlzLmxvY2F0aW9uc1tpbnRlclswXV07XG4gICAgICAgICAgICBjb25zdCBwb2x5Z29uID0gdGhpcy5yZW5kZXJlci5wcm9qZWN0KClcbiAgICAgICAgICAgICAgICA/IGxvYy5yYXcuZ2V0X3Byb2pfcG9seWdvbihpbnRlclsxXSlcbiAgICAgICAgICAgICAgICA6IGxvYy5yYXcuZ2V0X3BvbHlnb24oaW50ZXJbMV0pO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5ob3ZlciA9IGxvYy5pZDtcbiAgICAgICAgICAgIGNvbnN0IG15X2V2ZW50ID0gbmV3IEV2ZW50KCdob3ZlcicpO1xuICAgICAgICAgICAgbXlfZXZlbnQubG9jYXRpb24gPSBsb2M7XG4gICAgICAgICAgICBteV9ldmVudC5wb3NpdGlvbiA9IHRoaXMucHJvalBvc1RvQ2xpZW50UG9zKFtcbiAgICAgICAgICAgICAgICAocG9seWdvbi5taW5bMF0gKyBwb2x5Z29uLm1heFswXSkgLyAyLFxuICAgICAgICAgICAgICAgIChwb2x5Z29uLm1pblsxXSArIHBvbHlnb24ubWF4WzFdKSAvIDJcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG15X2V2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlTW91c2VPdXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZU1vdXNlT3V0KCkge1xuICAgICAgICB0aGlzLnN0YXRlLmhvdmVyID0gbnVsbDtcbiAgICAgICAgY29uc3QgbXlfZXZlbnQgPSBuZXcgRXZlbnQoJ2hvdmVyJyk7XG4gICAgICAgIG15X2V2ZW50LmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgbXlfZXZlbnQucG9zaXRpb24gPSBudWxsO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobXlfZXZlbnQpO1xuICAgIH1cbiAgICBcbiAgICBoYW5kbGVUb3VjaFN0YXJ0KGV2ZW50KSB7XG4gICAgICAgIGlmKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZU1vdXNlTW92ZSh7XG4gICAgICAgICAgICAgICAgY2xpZW50WDogZXZlbnQudG91Y2hlc1swXS5jbGllbnRYLFxuICAgICAgICAgICAgICAgIGNsaWVudFk6IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3VzZU91dChldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmVuZGVyTWFwSW5DYW52YXMoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICF0aGlzLmxhc3QgfHwgdGhpcy5sYXN0LmNlbnRlciAhPSB0aGlzLnN0YXRlLmNlbnRlclxuICAgICAgICAgICAgfHwgdGhpcy5sYXN0LnNjYWxlICE9IHRoaXMuc3RhdGUuc2NhbGVcbiAgICAgICAgICAgIHx8IHRoaXMubGFzdC5ob3ZlciAhPSB0aGlzLnN0YXRlLmhvdmVyXG4gICAgICAgICAgICB8fCB0aGlzLmxhc3Quc2l6ZSAhPSB0aGlzLnN0YXRlLnNpemVcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlck1hcEluQ29udGV4dCh0aGlzLmxvY2F0aW9ucywgdGhpcy50cmlhbmd1bGF0ZWQsIHRoaXMuc3RhdGUpXG4gICAgICAgICAgICB0aGlzLmxhc3QgPSB7IC4uLnRoaXMuc3RhdGUgfTtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucmVuZGVyTWFwSW5DYW52YXMuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgdXBkYXRlZCgpIHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKCdtYXAnKTtcbiAgICAgICAgaWYgKHRoaXMubGFzdF9jYW52YXMgIT0gY2FudmFzKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RfY2FudmFzID0gY2FudmFzO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5kZWluaXRSZXNvdXJjZXModGhpcy5sb2NhdGlvbnMsIHRoaXMudHJpYW5ndWxhdGVkKTtcbiAgICAgICAgICAgIGNvbnN0IGdsID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJykgfHwgY2FudmFzLmdldENvbnRleHQoJ2V4cGVyaW1lbnRhbC13ZWJnbCcpO1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlUmVzaXplID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgICBnbC52aWV3cG9ydCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2l6ZSA9IFtjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGhhbmRsZVJlc2l6ZSk7XG4gICAgICAgICAgICBoYW5kbGVSZXNpemUoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuaW5pdEZvckNvbnRleHQoY2FudmFzLCBnbCwgdGhpcy5sb2NhdGlvbnMsIHRoaXMudHJpYW5ndWxhdGVkKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTWFwSW5DYW52YXMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3QgPSBudWxsO1xuICAgIH1cblxuICAgIGJ1aWxkUmVuZGVyRGF0YSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyaWFuZ3VsYXRlZCkge1xuICAgICAgICAgICAgdGhpcy50cmlhbmd1bGF0ZWQgPSBUcmlhbmd1bGF0ZWREYXRhLm5ldygpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsb2Mgb2YgdGhpcy5sb2NhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWFuZ3VsYXRlZC5hZGRfbG9jYXRpb24obG9jLnJhdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRyaWFuZ3VsYXRlZC50cmlhbmd1bGF0ZSh0aGlzLnJlbmRlcmVyLnByb2plY3QoKSk7XG4gICAgICAgICAgICB0aGlzLnRyaWFuZ3VsYXRlZC5nZW5lcmF0ZV9vdXRsaW5lcyh0aGlzLnJlbmRlcmVyLnByb2plY3QoKSk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLm1pbiA9IHRoaXMudHJpYW5ndWxhdGVkLm1pbjtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubWF4ID0gdGhpcy50cmlhbmd1bGF0ZWQubWF4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLmJ1aWxkUmVuZGVyRGF0YSgpO1xuICAgICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgICAgIDxjYW52YXNcbiAgICAgICAgICAgICAgICBpZD1cIm1hcFwiXG4gICAgICAgICAgICAgICAgQG1vdXNlbW92ZT1cIiR7dGhpcy5oYW5kbGVNb3VzZU1vdmV9XCJcbiAgICAgICAgICAgICAgICBAd2hlZWw9XCIke3RoaXMuaGFuZGxlTW91c2VNb3ZlfVwiXG4gICAgICAgICAgICAgICAgQG1vdXNlb3V0PVwiJHt0aGlzLmhhbmRsZU1vdXNlT3V0fVwiXG4gICAgICAgICAgICAgICAgQHRvdWNoc3RhcnQ9XCIke3RoaXMuaGFuZGxlVG91Y2hTdGFydH1cIlxuICAgICAgICAgICAgICAgIEB0b3VjaG1vdmU9XCIke3RoaXMuaGFuZGxlVG91Y2hTdGFydH1cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9jYW52YXM+XG4gICAgICAgIGA7XG4gICAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ21hcC1iYWNrZW5kJywgTWFwQmFja2VuZFdlYkdsKTtcblxuY2xhc3MgTWFwQmFja2VuZFdlYkdsM2QgZXh0ZW5kcyBNYXBCYWNrZW5kV2ViR2wge1xuICAgIG5ld1JlbmRlcmVyKCkge1xuICAgICAgICByZXR1cm4gbmV3IFdlYkdMUmVuZGVyZXIzZCgpO1xuICAgIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdtYXAtYmFja2VuZC0zZCcsIE1hcEJhY2tlbmRXZWJHbDNkKTtcblxuIiwiaW1wb3J0IGdldFByb3RvdHlwZU9mIGZyb20gXCIuL2dldFByb3RvdHlwZU9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfc3VwZXJQcm9wQmFzZShvYmplY3QsIHByb3BlcnR5KSB7XG4gIHdoaWxlICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7XG4gICAgb2JqZWN0ID0gZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTtcbiAgICBpZiAob2JqZWN0ID09PSBudWxsKSBicmVhaztcbiAgfVxuXG4gIHJldHVybiBvYmplY3Q7XG59IiwiaW1wb3J0IHN1cGVyUHJvcEJhc2UgZnJvbSBcIi4vc3VwZXJQcm9wQmFzZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2dldCgpIHtcbiAgaWYgKHR5cGVvZiBSZWZsZWN0ICE9PSBcInVuZGVmaW5lZFwiICYmIFJlZmxlY3QuZ2V0KSB7XG4gICAgX2dldCA9IFJlZmxlY3QuZ2V0O1xuICB9IGVsc2Uge1xuICAgIF9nZXQgPSBmdW5jdGlvbiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyKSB7XG4gICAgICB2YXIgYmFzZSA9IHN1cGVyUHJvcEJhc2UodGFyZ2V0LCBwcm9wZXJ0eSk7XG4gICAgICBpZiAoIWJhc2UpIHJldHVybjtcbiAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiYXNlLCBwcm9wZXJ0eSk7XG5cbiAgICAgIGlmIChkZXNjLmdldCkge1xuICAgICAgICByZXR1cm4gZGVzYy5nZXQuY2FsbChhcmd1bWVudHMubGVuZ3RoIDwgMyA/IHRhcmdldCA6IHJlY2VpdmVyKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRlc2MudmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBfZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59IiwiaW1wb3J0IGFycmF5V2l0aEhvbGVzIGZyb20gXCIuL2FycmF5V2l0aEhvbGVzLmpzXCI7XG5pbXBvcnQgaXRlcmFibGVUb0FycmF5TGltaXQgZnJvbSBcIi4vaXRlcmFibGVUb0FycmF5TGltaXQuanNcIjtcbmltcG9ydCB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSBmcm9tIFwiLi91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheS5qc1wiO1xuaW1wb3J0IG5vbkl0ZXJhYmxlUmVzdCBmcm9tIFwiLi9ub25JdGVyYWJsZVJlc3QuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkge1xuICByZXR1cm4gYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBpdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgbm9uSXRlcmFibGVSZXN0KCk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHtcbiAgdmFyIF9pID0gYXJyID09IG51bGwgPyBudWxsIDogdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBhcnJbU3ltYm9sLml0ZXJhdG9yXSB8fCBhcnJbXCJAQGl0ZXJhdG9yXCJdO1xuXG4gIGlmIChfaSA9PSBudWxsKSByZXR1cm47XG4gIHZhciBfYXJyID0gW107XG4gIHZhciBfbiA9IHRydWU7XG4gIHZhciBfZCA9IGZhbHNlO1xuXG4gIHZhciBfcywgX2U7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKF9pID0gX2kuY2FsbChhcnIpOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7XG4gICAgICBfYXJyLnB1c2goX3MudmFsdWUpO1xuXG4gICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZCA9IHRydWU7XG4gICAgX2UgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0gIT0gbnVsbCkgX2lbXCJyZXR1cm5cIl0oKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kKSB0aHJvdyBfZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gX2Fycjtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufSJdLCJuYW1lcyI6WyJXZWJHTFJlbmRlcmVyIiwiY2xpZW50X3BvcyIsIm1hcF9wb3MiLCJzdGF0ZSIsInRoaXMiLCJnZW5lcmF0ZVRyYW5zbGF0ZUFuZFNjYWxlIiwic2NhbGUiLCJjbGllbnRfcG9zX25vcm0iLCJ4Iiwid2lkdGgiLCJ5IiwiaGVpZ2h0IiwiY2VudGVyIiwidHJhbnNmb3JtIiwibG9jYXRpb25fcG9zIiwibWluIiwibWF4Iiwic2l6ZSIsInpvb21fc2NhbGUiLCJNYXRoIiwiY2JydCIsImdsIiwidmVydGV4X3NoYWRlcl9zb3VyY2UiLCJmcmFnbWVudF9zaGFkZXJfc291cmNlIiwidmVydGV4X3NoYWRlciIsImNyZWF0ZVNoYWRlciIsIlZFUlRFWF9TSEFERVIiLCJzaGFkZXJTb3VyY2UiLCJjb21waWxlU2hhZGVyIiwiZnJhZ21lbnRfc2hhZGVyIiwiRlJBR01FTlRfU0hBREVSIiwic2hhZGVyX3Byb2dyYW0iLCJjcmVhdGVQcm9ncmFtIiwiYXR0YWNoU2hhZGVyIiwibGlua1Byb2dyYW0iLCJjYW52YXMiLCJsb2NhdGlvbnMiLCJ0cmlhbmd1bGF0ZWQiLCJnZXRFeHRlbnNpb24iLCJmaWxsX3NoYWRlcl9wcm9ncmFtIiwiY3JlYXRlU2hhZGVyUHJvZ3JhbSIsImZpbGxfcG9zaXRpb25fYXR0cmlidXRlIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJmaWxsX2NvbG9yX2F0dHJpYnV0ZSIsImZpbGxfdHJhbnNsYXRlX3VuaWZvcm0iLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJmaWxsX3NjYWxlX3VuaWZvcm0iLCJmaWxsX2NvbG9yc191bmlmb3JtIiwic3Ryb2tlX3NoYWRlcl9wcm9ncmFtIiwic3Ryb2tlX3Bvc2l0aW9uX2F0dHJpYnV0ZSIsInN0cm9rZV9ub3JtYWxfYXR0cmlidXRlIiwic3Ryb2tlX3RyYW5zbGF0ZV91bmlmb3JtIiwic3Ryb2tlX3NjYWxlX3VuaWZvcm0iLCJzdHJva2Vfc2NhbGUyX3VuaWZvcm0iLCJzdHJva2Vfd2lkdGhfdW5pZm9ybSIsInN0cm9rZV9jb2xvcl91bmlmb3JtIiwidGV4dHVyZSIsImNyZWF0ZVRleHR1cmUiLCJiaW5kVGV4dHVyZSIsIlRFWFRVUkVfMkQiLCJ0ZXhQYXJhbWV0ZXJpIiwiVEVYVFVSRV9NQUdfRklMVEVSIiwiTkVBUkVTVCIsIlRFWFRVUkVfTUlOX0ZJTFRFUiIsIlRFWFRVUkVfV1JBUF9TIiwiQ0xBTVBfVE9fRURHRSIsIlRFWFRVUkVfV1JBUF9UIiwicG9zaXRpb25fYnVmZmVyIiwiY3JlYXRlQnVmZmVyIiwiYmluZEJ1ZmZlciIsIkFSUkFZX0JVRkZFUiIsImJ1ZmZlckRhdGEiLCJ2ZXJ0ZXgiLCJTVEFUSUNfRFJBVyIsImNvbG9yX2J1ZmZlciIsImNvbG9yIiwiaW5kZXhfYnVmZmVyIiwiRUxFTUVOVF9BUlJBWV9CVUZGRVIiLCJ0cmlhbmdsZXMiLCJvdXRsaW5lX3Bvc2l0aW9uX2J1ZmZlciIsIm91dGxpbmVfdHJpYW5nbGVzIiwib3V0bGluZV9ub3JtYWxfYnVmZmVyIiwib3V0bGluZV9ub3JtYWxzIiwid2ViZ2xfZGF0YSIsImNvbnRleHQiLCJmaWxsX2RhdGEiLCJwb3NpdGlvbl9hdHRyaWJ1dGUiLCJjb2xvcl9hdHRyaWJ1dGUiLCJ0cmFuc2xhdGVfdW5pZm9ybSIsInNjYWxlX3VuaWZvcm0iLCJjb2xvcnNfdW5pZm9ybSIsInN0cm9rZV9kYXRhIiwibm9ybWFsX2F0dHJpYnV0ZSIsInNjYWxlMl91bmlmb3JtIiwid2lkdGhfdW5pZm9ybSIsImNvbG9yX3VuaWZvcm0iLCJfbG9jYXRpb25zIiwiX3RyaWFuZ3VsYXRlZCIsImRlbGV0ZVRleHR1cmUiLCJkZWxldGVCdWZmZXIiLCJnZXRBdHRhY2hlZFNoYWRlcnMiLCJmb3JFYWNoIiwicyIsImRlbGV0ZVNoYWRlciIsImRlbGV0ZVByb2dyYW0iLCJ0cmFuc2xhdGUiLCJzdHJva2Vfc2NhbGUiLCJjbGVhckNvbG9yIiwiY2xlYXIiLCJDT0xPUl9CVUZGRVJfQklUIiwiY29sb3JzIiwiVWludDhBcnJheSIsImxlbmd0aCIsImkiLCJqIiwiaWQiLCJob3ZlciIsInRleEltYWdlMkQiLCJSR0JBIiwiVU5TSUdORURfQllURSIsInVzZVByb2dyYW0iLCJ1bmlmb3JtMmZ2IiwidW5pZm9ybTFpIiwidmVydGV4QXR0cmliUG9pbnRlciIsIkZMT0FUIiwiZW5hYmxlVmVydGV4QXR0cmliQXJyYXkiLCJkcmF3RWxlbWVudHMiLCJUUklBTkdMRVMiLCJVTlNJR05FRF9JTlQiLCJ1bmlmb3JtMWYiLCJ1bmlmb3JtM2Z2IiwiZHJhd0FycmF5cyIsIldlYkdMUmVuZGVyZXIzZCIsImdlbmVyYXRlU2NhbGUiLCJwb3MiLCJkaXN0Iiwic3FydCIsImNsaWVudFBvc1RvU3BoZXJlUG9zIiwicG9zaXRpb24iLCJtYXQzVmVjTXVsIiwiZ2VuZXJhdGVUcmFuc2Zvcm0iLCJhdGFuMiIsImEiLCJQSSIsImZsb29yIiwiY29vcmQiLCJwcm9qIiwiY2xpZW50UG9zVG9Tb21lUG9zIiwibm9ybWFsaXplQXJvdW5kIiwibm9ybWFsaXplUG9zaXRpb24iLCJwcm9qX3BvcyIsImNvcyIsInNpbiIsImdlbmVyYXRlSW52ZXJzZVRyYW5zZm9ybSIsImIiLCJyZXMiLCJrIiwidiIsImF4aXMiLCJhbmdsZSIsIm1hdDNNdWwiLCJtYXQzUm90YXRpb24iLCJiZXRhIiwiZ2FtbWEiLCJhYnMiLCJzY3JlZW5fc2NhbGUiLCJzaXplX3giLCJzaXplX3kiLCJMSU5FQVIiLCJlYXJ0aF9zaGFkZXJfcHJvZ3JhbSIsImVhcnRoX3Bvc2l0aW9uX2F0dHJpYnV0ZSIsImVhcnRoX3NjYWxlX3VuaWZvcm0iLCJlYXJ0aF9zY2FsZTJfdW5pZm9ybSIsImVhcnRoX3NhbXBsZXJfdW5pZm9ybSIsImVhcnRoX3RleG1pbl91bmlmb3JtIiwiZWFydGhfdGV4bWF4X3VuaWZvcm0iLCJlYXJ0aF90cmFuc2Zvcm1fdW5pZm9ybSIsImVhcnRoX3ZlcnRpY2VzIiwiRmxvYXQzMkFycmF5IiwiZWFydGhfdHJpYW5nbGVzIiwiVWludDE2QXJyYXkiLCJlYXJ0aF9wb3NpdGlvbl9idWZmZXIiLCJlYXJ0aF9pbmRleF9idWZmZXIiLCJlYXJ0aF9kYXRhIiwic2FtcGxlcl91bmlmb3JtIiwidGV4bWluX3VuaWZvcm0iLCJ0ZXhtYXhfdW5pZm9ybSIsInRyYW5zZm9ybV91bmlmb3JtIiwidmVydGljZXMiLCJnbF9wb3NpdGlvbl9idWZmZXIiLCJnbF9pbmRleF9idWZmZXIiLCJmYiIsImNyZWF0ZUZyYW1lYnVmZmVyIiwiYmluZEZyYW1lYnVmZmVyIiwiRlJBTUVCVUZGRVIiLCJhdHRhY2htZW50IiwiQ09MT1JfQVRUQUNITUVOVDAiLCJmcmFtZWJ1ZmZlclRleHR1cmUyRCIsInZpZXdwb3J0IiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJnZW5lcmF0ZVRleE1pbk1heCIsInJlbmRlclRvVGV4dHVyZSIsImNsZWFyRGVwdGgiLCJ1bmlmb3JtMWZ2IiwidW5pZm9ybU1hdHJpeDNmdiIsIlVOU0lHTkVEX1NIT1JUIiwiTWFwQmFja2VuZFdlYkdsIiwicmVuZGVyZXIiLCJuZXdSZW5kZXJlciIsInNoYWRvd1Jvb3QiLCJnZXRFbGVtZW50QnlJZCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImNsaWVudFBvc1RvTWFwUG9zIiwiY2xpZW50UG9zVG9Qcm9qUG9zIiwicHJvalBvc1RvQ2xpZW50UG9zIiwiZXZlbnQiLCJjbGllbnRYIiwiY2xpZW50WSIsImludGVyIiwiZ2V0X2ludGVyc2VjdGlvbiIsInByb2plY3QiLCJsb2MiLCJwb2x5Z29uIiwicmF3IiwiZ2V0X3Byb2pfcG9seWdvbiIsImdldF9wb2x5Z29uIiwibXlfZXZlbnQiLCJFdmVudCIsImxvY2F0aW9uIiwiZGlzcGF0Y2hFdmVudCIsImhhbmRsZU1vdXNlT3V0IiwidG91Y2hlcyIsImhhbmRsZU1vdXNlTW92ZSIsImxhc3QiLCJyZW5kZXJNYXBJbkNvbnRleHQiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyZW5kZXJNYXBJbkNhbnZhcyIsImJpbmQiLCJsYXN0X2NhbnZhcyIsImRlaW5pdFJlc291cmNlcyIsImdldENvbnRleHQiLCJoYW5kbGVSZXNpemUiLCJhZGRFdmVudExpc3RlbmVyIiwiaW5pdEZvckNvbnRleHQiLCJUcmlhbmd1bGF0ZWREYXRhIiwiYWRkX2xvY2F0aW9uIiwidHJpYW5ndWxhdGUiLCJnZW5lcmF0ZV9vdXRsaW5lcyIsImJ1aWxkUmVuZGVyRGF0YSIsImh0bWwiLCJoYW5kbGVUb3VjaFN0YXJ0IiwiYXR0cmlidXRlIiwiY3NzIiwiTGl0RWxlbWVudCIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIiwiTWFwQmFja2VuZFdlYkdsM2QiLCJfc3VwZXJQcm9wQmFzZSIsIm9iamVjdCIsInByb3BlcnR5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZ2V0UHJvdG90eXBlT2YiLCJfZ2V0IiwiUmVmbGVjdCIsImdldCIsInRhcmdldCIsInJlY2VpdmVyIiwiYmFzZSIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJhcmd1bWVudHMiLCJ2YWx1ZSIsImFwcGx5IiwiX3NsaWNlZFRvQXJyYXkiLCJhcnIiLCJBcnJheSIsImlzQXJyYXkiLCJfaSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiX3MiLCJfZSIsIl9hcnIiLCJfbiIsIl9kIiwibmV4dCIsImRvbmUiLCJwdXNoIiwiZXJyIiwidW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJUeXBlRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9