"use strict";(self.webpackChunkgeo_draw=self.webpackChunkgeo_draw||[]).push([[238],{543:(e,t,r)=>{r.a(e,(async(e,n)=>{try{r.r(t);var a,o,i=r(168),s=r(942),l=r(671),u=r(144),f=r(340),c=r(215),h=r(120),d=r(392),_=r(533),v=r(710),m=r(65),g=e([m]);function x(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=P(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function P(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e){var t=A();return function(){var r,n=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}m=(g.then?(await g)():g)[0];var b=function(e){(0,f.Z)(r,e);var t=E(r);function r(){var e;return(0,l.Z)(this,r),(e=t.call(this)).renderer=e.newRenderer(),e.state={center:[0,0],scale:1,min:[0,0],max:[0,0],size:[0,0],hover:null},e}return(0,u.Z)(r,[{key:"newRenderer",value:function(){return new _.Z}},{key:"center",get:function(){return this.state.center}},{key:"scale",get:function(){return this.state.scale}},{key:"setCenterAndScale",value:function(e,t){this.state.center=e,this.state.scale=t}},{key:"clientPosToMapPos",value:function(e){var t=this.shadowRoot.getElementById("map").getBoundingClientRect();return this.renderer.clientPosToMapPos(e,t,this.state)}},{key:"clientPosToProjPos",value:function(e){var t=this.shadowRoot.getElementById("map").getBoundingClientRect();return this.renderer.clientPosToProjPos(e,t,this.state)}},{key:"projPosToClientPos",value:function(e){var t=this.shadowRoot.getElementById("map").getBoundingClientRect();return this.renderer.projPosToClientPos(e,t,this.state)}},{key:"handleMouseMove",value:function(e){var t,r=this.clientPosToProjPos([e.clientX,e.clientY]),n=null===(t=this.triangulated)||void 0===t?void 0:t.get_intersection(r,this.renderer.project());if(n){var a=this.locations[n[0]],o=this.renderer.project()?a.raw.get_proj_polygon(n[1]):a.raw.get_polygon(n[1]);this.state.hover=a.id;var i=new Event("hover");i.location=a,i.position=this.projPosToClientPos([(o.min[0]+o.max[0])/2,(o.min[1]+o.max[1])/2]),this.dispatchEvent(i)}else this.handleMouseOut()}},{key:"handleMouseOut",value:function(){this.state.hover=null;var e=new Event("hover");e.location=null,e.position=null,this.dispatchEvent(e)}},{key:"handleTouchStart",value:function(e){1===e.touches.length?this.handleMouseMove({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}):this.handleMouseOut(e)}},{key:"renderMapInCanvas",value:function(){this.last&&this.last.center==this.state.center&&this.last.scale==this.state.scale&&this.last.hover==this.state.hover&&this.last.size==this.state.size||(this.renderer.renderMapInContext(this.locations,this.triangulated,this.state),this.last=y({},this.state)),window.requestAnimationFrame(this.renderMapInCanvas.bind(this))}},{key:"updated",value:function(){var e=this,t=this.shadowRoot.getElementById("map");if(this.last_canvas!=t){this.last_canvas=t,this.renderer.deinitResources(this.locations,this.triangulated);var r=t.getContext("webgl")||t.getContext("experimental-webgl"),n=function(){t.width=t.clientWidth,t.height=t.clientHeight,r.viewport(0,0,t.width,t.height),e.state.size=[t.width,t.height]};window.addEventListener("resize",n),n(),this.renderer.initForContext(t,r,this.locations,this.triangulated),this.renderMapInCanvas()}this.last=null}},{key:"buildRenderData",value:function(){if(!this.triangulated){this.triangulated=m.e6.new();var e,t=x(this.locations);try{for(t.s();!(e=t.n()).done;){var r=e.value;this.triangulated.add_location(r.raw)}}catch(e){t.e(e)}finally{t.f()}this.triangulated.triangulate(this.renderer.project()),this.triangulated.generate_outlines(this.renderer.project()),this.state.min=this.triangulated.min,this.state.max=this.triangulated.max}}},{key:"render",value:function(){return this.buildRenderData(),(0,d.dy)(a||(a=(0,i.Z)(['\n            <canvas\n                id="map"\n                @mousemove="','"\n                @wheel="','"\n                @mouseout="','"\n                @touchstart="','"\n                @touchmove="','"\n            >\n            </canvas>\n        '])),this.handleMouseMove,this.handleMouseMove,this.handleMouseOut,this.handleTouchStart,this.handleTouchStart)}}],[{key:"properties",get:function(){return{locations:{attribute:!0}}}},{key:"styles",get:function(){return(0,d.iv)(o||(o=(0,i.Z)(["\n            :host {\n                width: 100%;\n                height: 100%;\n                position: relative;\n                display: block;\n            }\n            #map {\n                width: 100%;\n                height: 100%;\n                max-width: 100%;\n                max-height: 100%;\n                display: block;\n                position: absolute;\n            }\n        "])))}}]),r}(d.oi);customElements.define("map-backend",b);var p=function(e){(0,f.Z)(r,e);var t=E(r);function r(){return(0,l.Z)(this,r),t.apply(this,arguments)}return(0,u.Z)(r,[{key:"newRenderer",value:function(){return new v.Z}}]),r}(b);customElements.define("map-backend-3d",p),n()}catch(M){n(M)}}))},710:(e,t,r)=>{r.d(t,{Z:()=>f});var n=r(885),a=r(671),o=r(144),i=r(752),s=r(340),l=r(215),u=r(120);var f=function(e){(0,s.Z)(c,e);var t,r,f=(t=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(r){var a=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function c(){return(0,a.Z)(this,c),f.apply(this,arguments)}return(0,o.Z)(c,[{key:"project",value:function(){return!1}},{key:"clientPosToSpherePos",value:function(e,t,r){var n=this.generateScale(r),a=[(2*(e[0]-t.x)/t.width-1)/n[0],(1-2*(e[1]-t.y)/t.height)/n[1],0];if(a[2]=1-a[0]*a[0]-a[1]*a[1],a[2]<0){var o=Math.sqrt(a[0]*a[0]+a[1]*a[1]);a[0]/=o,a[1]/=o,a[2]=0}else a[2]=Math.sqrt(a[2]);return a}},{key:"clientPosToSomePos",value:function(e,t,r){var n=this.clientPosToSpherePos(e,t,r),a=this.mat3VecMul(this.generateTransform(r),n);return[Math.atan2(a[0],a[2]),Math.atan2(a[1],Math.sqrt(a[0]*a[0]+a[2]*a[2]))]}},{key:"normalizeAround",value:function(e,t){return e<t-Math.PI?e+2*Math.PI*Math.floor((t+Math.PI-e)/(2*Math.PI)):e>t+Math.PI?e-2*Math.PI*Math.floor((e+Math.PI-t)/(2*Math.PI)):e}},{key:"clientPosToMapPos",value:function(e,t,r){var n=r.center,a=this.clientPosToSpherePos(e,t,r),o=n[1]+Math.atan2(a[1],Math.sqrt(a[0]*a[0]+a[2]*a[2])),i=this.clientPosToSomePos(e,t,r);return[this.normalizeAround(i[0],n[0]),o]}},{key:"clientPosToProjPos",value:function(e,t,r){return this.normalizePosition(this.clientPosToSomePos(e,t,r))}},{key:"projPosToClientPos",value:function(e,t,r){var n=[Math.cos(e[1])*Math.sin(e[0]),Math.sin(e[1]),Math.cos(e[1])*Math.cos(e[0])],a=this.mat3VecMul(this.generateInverseTransform(r),n);if(a[2]<0){var o=Math.sqrt(a[0]*a[0]+a[1]*a[1]);a[0]/=o,a[1]/=o,a[2]=0}var i=this.generateScale(r);return[(a[0]*i[0]+1)/2*t.width+t.x,(1-a[1]*i[1])/2*t.height+t.y]}},{key:"generateScale",value:function(e){var t=e.size,r=e.scale;return t[0]<t[1]?[r,t[0]/t[1]*r]:[t[1]/t[0]*r,r]}},{key:"mat3Mul",value:function(e,t){for(var r=[0,0,0,0,0,0,0,0,0],n=0;n<3;n++)for(var a=0;a<3;a++)for(var o=0;o<3;o++)r[3*n+a]+=e[3*n+o]*t[3*o+a];return r}},{key:"mat3VecMul",value:function(e,t){for(var r=[0,0,0],n=0;n<3;n++)for(var a=0;a<3;a++)r[n]+=e[3*a+n]*t[a];return r}},{key:"mat3Rotation",value:function(e,t){var r=[0,0,0,0,0,0,0,0,0];return r[3*e+e]=1,r[(e+1)%3*3+(e+1)%3]=Math.cos(t),r[(e+2)%3*3+(e+1)%3]=Math.sin(t),r[(e+1)%3*3+(e+2)%3]=-Math.sin(t),r[(e+2)%3*3+(e+2)%3]=Math.cos(t),r}},{key:"generateTransform",value:function(e){var t=e.center;return this.mat3Mul(this.mat3Rotation(0,t[1]),this.mat3Rotation(1,-t[0]))}},{key:"generateInverseTransform",value:function(e){var t=e.center;return this.mat3Mul(this.mat3Rotation(1,t[0]),this.mat3Rotation(0,-t[1]))}},{key:"normalizePosition",value:function(e){var t=(0,n.Z)(e,2),r=t[0],a=t[1];return a=(a+Math.PI)%(2*Math.PI),(a=(2*Math.PI+a)%(2*Math.PI)-Math.PI)<-Math.PI/2?(r+=Math.PI,a=Math.abs(-Math.PI/2-a)-Math.PI/2):a>Math.PI/2&&(r+=Math.PI,a=Math.PI/2-Math.abs(a-Math.PI/2)),r=(r+Math.PI)%(2*Math.PI),[(r=(2*Math.PI+r)%(2*Math.PI))-Math.PI,a]}},{key:"generateTexMinMax",value:function(e){var t,r=e.center,a=this.generateScale(e),o=this.normalizePosition(r),i=(0,n.Z)(o,2),s=i[0],l=i[1];if(1/(a[0]*a[0])+1/(a[1]*a[1])>1)t=Math.abs(l)<.1?[[.5+s/Math.PI/2-.26,0],[.5+s/Math.PI/2+.26,1]]:l<0?[[0,0],[1,1+l/Math.PI]]:[[0,l/Math.PI],[1,1]];else if(.5-Math.abs(l)/Math.PI<Math.max(.05,.5/a[1]))t=l<0?[[0,0],[1,1+l/Math.PI]]:[[0,l/Math.PI],[1,1]];else{var u=Math.min(.25,.25*(1+(Math.abs(l)/Math.PI>.4?3:1)*Math.abs(l))/a[0]),f=Math.min(.25,.25*(1+Math.abs(l))/a[1]);t=[[.5+s/Math.PI/2-u,.5+l/Math.PI-2*f],[.5+s/Math.PI/2+u,.5+l/Math.PI+2*f]]}return t[0][0]=(1+t[0][0]%1)%1,t[1][0]=(1+t[1][0]%1)%1,t[1][0]<=t[0][0]&&(t[1][0]+=1),t[0][1]=Math.min(1,Math.max(0,t[0][1])),t[1][1]=Math.min(1,Math.max(0,t[1][1])),t}},{key:"initForContext",value:function(e,t,r,n){(0,i.Z)((0,u.Z)(c.prototype),"initForContext",this).call(this,e,t,r,n);var a=t.createTexture();t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,4096,2048,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);var o=this.createShaderProgram(t,"\nattribute vec2 aVertexPosition;\n\nuniform vec2 uScale;\n\nvarying vec2 vPixelPos;\n\nvoid main() {\n    vPixelPos = aVertexPosition;\n    gl_Position = vec4(uScale * aVertexPosition, 0.0, 1.0);\n}\n\n","\n#ifdef GL_ES\n    precision highp float;\n#endif\n\n#define PI 3.1415926538\n\nuniform sampler2D uSampler;\nuniform vec2 uTexMin;\nuniform vec2 uTexMax;\nuniform mat3 uTransform;\nuniform float uScaleZ;\n\nvarying vec2 vPixelPos;\n\nfloat fmod(float a, float b) {\n    return a - (b * floor(a / b));\n}\n\nvec2 normalizePosition(vec2 pos) {\n    pos.y = fmod(pos.y + PI, 2.0 * PI);\n    pos.y = fmod(2.0 * PI + pos.y, 2.0 * PI) - PI;\n    if (pos.y < -PI / 2.0) {\n        pos.x += PI;\n        pos.y = abs(-PI / 2.0 - pos.y) - PI / 2.0;\n    } else if (pos.y > PI / 2.0) {\n        pos.x += PI;\n        pos.y = PI / 2.0 - abs(pos.y - PI / 2.0);\n    }\n    pos.x = fmod(pos.x + PI, 2.0 * PI);\n    pos.x = fmod(2.0 * PI + pos.x, 2.0 * PI);\n    return vec2(pos.x - PI, pos.y);\n}\n\nvec3 spherePosition() {\n    vec3 pos = vec3(vPixelPos, 0.0);\n    pos.z = 1.0 - pos.x*pos.x - pos.y*pos.y;\n    if (pos.z < 0.0) {\n        float dist = sqrt(pos.x*pos.x + pos.y*pos.y);\n        pos.x /= dist;\n        pos.y /= dist;\n        pos.z = 0.0;\n    } else {\n        pos.z = sqrt(pos.z);\n    }\n    return pos;\n}\n\nvec2 texPosition(vec3 pos) {\n    pos = uTransform * pos;\n    vec2 coord = vec2(\n        atan(pos.x, pos.z),\n        atan(pos.y, sqrt(pos.x*pos.x + pos.z*pos.z))\n    );\n    vec2 lonlat = normalizePosition(coord);\n    return vec2((lonlat.x + PI) / (2.0 * PI), (lonlat.y + PI / 2.0) / PI);\n}\n\nfloat computeLight(vec3 pos, bool water) {\n    vec3 light = normalize(vec3(-1.0, 1.0, 3.0));\n    float c = max(0.0, dot(light, pos));\n    float a = max(0.0, dot(vec3(0.0, 0.0, 1.0), reflect(-light, pos)));\n    a *= a;\n    if (water) {\n        return c * 0.7 + a * 0.1 + 0.2;\n    } else {\n        return c * 0.5 + a * 0.3 + 0.2;\n    }\n}\n\nvec3 waterColor(vec3 pos) {\n    return vec3(0.0, 0.2, 0.4);\n}\n\nvoid main() {\n    bool water = false;\n    vec3 pos = spherePosition();\n    float dist = vPixelPos.x * vPixelPos.x + vPixelPos.y * vPixelPos.y;\n    float edge = (dist - 1.0) * (dist - 1.0);\n    vec2 texCoord = texPosition(pos);\n    if (uTexMin.x <= 1.0 + texCoord.x && uTexMax.x >= 1.0 + texCoord.x) {\n        vec2 texPos = vec2(\n            (texCoord.x + 1.0 - uTexMin.x) / (uTexMax.x - uTexMin.x),\n            (texCoord.y - uTexMin.y) / (uTexMax.y - uTexMin.y)\n        );\n        gl_FragColor = texture2D(uSampler, texPos);\n    } else {\n        vec2 texPos = vec2(\n            (texCoord.x - uTexMin.x) / (uTexMax.x - uTexMin.x),\n            (texCoord.y - uTexMin.y) / (uTexMax.y - uTexMin.y)\n        );\n        gl_FragColor = texture2D(uSampler, texPos);\n    }\n    if (length(gl_FragColor) == 0.0) {\n        gl_FragColor = vec4(waterColor(pos), 1.0);\n        water = true;\n    }\n    if (dist >= 1.0) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n    float f = 0.5 * exp(-1.0e4 * edge);\n    gl_FragColor = (1.0 - f) * gl_FragColor + f * vec4(0.5, 0.75, 1.0, 1.0);\n    if (dist < 1.0) {\n        float f = 0.1 * exp(-1.0 / (2.0 - pos.z) * uScaleZ) + 0.2 * (1.0 - pos.z);\n        gl_FragColor = (1.0 - f) * gl_FragColor + f * vec4(0.0, 0.75, 1.0, 1.0);\n    }\n    gl_FragColor.xyz = computeLight(pos, water) * gl_FragColor.xyz;\n}\n\n"),s=t.getAttribLocation(o,"aVertexPosition"),l=t.getUniformLocation(o,"uScale"),f=t.getUniformLocation(o,"uScaleZ"),h=t.getUniformLocation(o,"uSampler"),d=t.getUniformLocation(o,"uTexMin"),_=t.getUniformLocation(o,"uTexMax"),v=t.getUniformLocation(o,"uTransform"),m=new Float32Array([-2,2,2,2,2,-2,-2,-2]),g=new Uint16Array([0,1,2,2,3,0]),b=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,b),t.bufferData(t.ARRAY_BUFFER,m,t.STATIC_DRAW);var p=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,p),t.bufferData(t.ELEMENT_ARRAY_BUFFER,g,t.STATIC_DRAW),this.webgl_data.texture=a,this.webgl_data.earth_data={shader_program:o,position_attribute:s,scale_uniform:l,scale2_uniform:f,sampler_uniform:h,texmin_uniform:d,texmax_uniform:_,transform_uniform:v,vertices:m,triangles:g,gl_position_buffer:b,gl_index_buffer:p}}},{key:"deinitResources",value:function(e,t){var r;if(null!==(r=this.webgl_data)&&void 0!==r&&r.context){var n=this.webgl_data.context;n.deleteTexture(this.webgl_data.texture),n.deleteBuffer(this.webgl_data.earth_data.gl_position_buffer),n.deleteBuffer(this.webgl_data.earth_data.gl_index_buffer),n.getAttachedShaders(this.webgl_data.earth_data.shader_program).forEach((function(e){n.deleteShader(e)})),n.deleteProgram(this.webgl_data.earth_data.shader_program)}(0,i.Z)((0,u.Z)(c.prototype),"deinitResources",this).call(this,e,t)}},{key:"renderToTexture",value:function(e,t,r,n,a){var o=this.webgl_data.context,i=this.webgl_data.fill_data,s=this.webgl_data.stroke_data,l=this.webgl_data.triangles;o.bindTexture(o.TEXTURE_2D,this.webgl_data.texture);var u=o.createFramebuffer();o.bindFramebuffer(o.FRAMEBUFFER,u);var f=o.COLOR_ATTACHMENT0;o.framebufferTexture2D(o.FRAMEBUFFER,f,o.TEXTURE_2D,this.webgl_data.texture,0),o.viewport(0,0,4096,2048);var c=[2*Math.PI*(.5-(n[0]+a[0])/2),Math.PI*(.5-(n[1]+a[1])/2)],h=[1/(a[0]-n[0])/Math.PI,2/(a[1]-n[1])/Math.PI],d=[.5/(a[0]-n[0])*Math.cbrt(r.scale)/r.scale,.5/(a[1]-n[1])*Math.cbrt(r.scale)/r.scale];o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT);for(var _=new Uint8Array(4*e.length),v=0;v<e.length;v++){for(var m=0;m<3;m++)_[4*v+m]=e[v].color[m],e[v].id===r.hover&&(_[4*v+m]*=.8);_[4*v+3]=255}o.bindTexture(o.TEXTURE_2D,l.texture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,e.length,1,0,o.RGBA,o.UNSIGNED_BYTE,_),o.useProgram(i.shader_program),o.uniform2fv(i.scale_uniform,h),o.uniform1i(i.colors_uniform,0),o.bindBuffer(o.ARRAY_BUFFER,l.position_buffer),o.vertexAttribPointer(i.position_attribute,2,o.FLOAT,!1,0,0),o.enableVertexAttribArray(i.position_attribute),o.bindBuffer(o.ARRAY_BUFFER,l.color_buffer),o.vertexAttribPointer(i.color_attribute,1,o.FLOAT,!1,0,0),o.enableVertexAttribArray(i.color_attribute),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,l.index_buffer);for(var g=0;g<=1;g++)o.uniform2fv(i.translate_uniform,c),o.drawElements(o.TRIANGLES,t.triangles.length,o.UNSIGNED_INT,0),c[0]+=2*Math.PI;o.useProgram(s.shader_program),o.uniform2fv(s.scale_uniform,h),o.uniform2fv(s.scale2_uniform,d),o.uniform1f(s.width_uniform,.0025),o.uniform3fv(s.color_uniform,[.271,.302,.38]),o.bindBuffer(o.ARRAY_BUFFER,l.outline_normal_buffer),o.vertexAttribPointer(s.normal_attribute,2,o.FLOAT,!1,0,0),o.enableVertexAttribArray(s.normal_attribute),o.bindBuffer(o.ARRAY_BUFFER,l.outline_position_buffer),o.vertexAttribPointer(s.position_attribute,2,o.FLOAT,!1,0,0),o.enableVertexAttribArray(s.position_attribute),c[0]-=4*Math.PI;for(var b=0;b<=1;b++)o.uniform2fv(s.translate_uniform,c),o.drawArrays(o.TRIANGLES,0,t.outline_triangles.length/2),c[0]+=2*Math.PI;o.viewport(0,0,this.webgl_data.canvas.clientWidth,this.webgl_data.canvas.clientHeight),o.bindFramebuffer(o.FRAMEBUFFER,null)}},{key:"renderMapInContext",value:function(e,t,r){var a=this.webgl_data.context,o=this.webgl_data.earth_data,i=this.generateTexMinMax(r),s=(0,n.Z)(i,2),l=s[0],u=s[1];this.renderToTexture(e,t,r,l,u),a.clearColor(0,0,0,0),a.clearDepth(1),a.clear(a.COLOR_BUFFER_BIT),a.bindTexture(a.TEXTURE_2D,this.webgl_data.texture),a.useProgram(o.shader_program),a.uniform2fv(o.scale_uniform,this.generateScale(r)),a.uniform2fv(o.scale_uniform,this.generateScale(r)),a.uniform1fv(o.scale2_uniform,[r.scale]),a.uniform1i(o.sampler_uniform,0),a.uniform2fv(o.texmin_uniform,l),a.uniform2fv(o.texmax_uniform,u),a.uniformMatrix3fv(o.transform_uniform,!1,this.generateTransform(r)),a.bindBuffer(a.ARRAY_BUFFER,o.gl_position_buffer),a.vertexAttribPointer(o.position_attribute,2,a.FLOAT,!1,0,0),a.enableVertexAttribArray(o.position_attribute),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,o.gl_index_buffer),a.drawElements(a.TRIANGLES,o.triangles.length,a.UNSIGNED_SHORT,0)}}]),c}(r(533).Z)},533:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(885),a=r(671),o=r(144),i=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"project",value:function(){return!0}},{key:"clientPosToMapPos",value:function(e,t,r){var a=this.generateTranslateAndScale(r),o=(0,n.Z)(a,2),i=(o[0],o[1]),s=[2*(e[0]-t.x)/t.width-1,1-2*(e[1]-t.y)/t.height];return[s[0]/i[0]+r.center[0],s[1]/i[1]+r.center[1]]}},{key:"clientPosToProjPos",value:function(e,t,r){var a=this.generateTranslateAndScale(r),o=(0,n.Z)(a,2),i=o[0],s=o[1],l=[2*(e[0]-t.x)/t.width-1,1-2*(e[1]-t.y)/t.height];return[l[0]/s[0]-i[0],l[1]/s[1]-i[1]]}},{key:"projPosToClientPos",value:function(e,t,r){var a=this.generateTranslateAndScale(r),o=(0,n.Z)(a,2),i=o[0],s=o[1],l=[(e[0]+i[0])*s[0],(e[1]+i[1])*s[1]];return[(l[0]+1)/2*t.width+t.x,(1-l[1])/2*t.height+t.y]}},{key:"generateTranslateAndScale",value:function(e){var t=e.min,r=e.max,n=e.size,a=e.center,o=e.scale,i=r[0]-t[0],s=r[1]-t[1];return i/n[0]>s/n[1]?[[-t[0]-i/2-a[0],-t[1]-s/2-a[1]],[2/i*o,n[0]/n[1]*-2/i*o],[1*Math.cbrt(o),Math.cbrt(o)*-n[0]/n[1]]]:[[-t[0]-i/2-a[0],-t[1]-s/2-a[1]],[n[1]/n[0]*2/s*o,-2/s*o],[Math.cbrt(o)*n[1]/n[0],-1*Math.cbrt(o)]]}},{key:"createShaderProgram",value:function(e,t,r){var n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,t),e.compileShader(n);var a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,r),e.compileShader(a);var o=e.createProgram();return e.attachShader(o,n),e.attachShader(o,a),e.linkProgram(o),o}},{key:"initForContext",value:function(e,t,r,n){t.getExtension("OES_element_index_uint");var a=this.createShaderProgram(t,"\nattribute vec2 aVertexPosition;\nattribute float aVertexColor;\n\nuniform vec2 uTranslate;\nuniform vec2 uScale;\nuniform sampler2D uColors;\n\nvarying vec3 vPixelColor;\n\nvoid main() {\n    vPixelColor = texture2D(uColors, vec2(aVertexColor, 0.5)).xyz;\n    gl_Position = vec4((aVertexPosition + uTranslate) * uScale, 0.0, 1.0);\n}\n\n","\n#ifdef GL_ES\n    precision highp float;\n#endif\n\nvarying vec3 vPixelColor;\n\nvoid main() {\n    gl_FragColor = vec4(vPixelColor, 1.0);\n}\n\n"),o=t.getAttribLocation(a,"aVertexPosition"),i=t.getAttribLocation(a,"aVertexColor"),s=t.getUniformLocation(a,"uTranslate"),l=t.getUniformLocation(a,"uScale"),u=t.getUniformLocation(a,"uColors"),f=this.createShaderProgram(t,"\nattribute vec2 aVertexPosition;\nattribute vec2 aVertexNormal;\n\nuniform vec2 uTranslate;\nuniform vec2 uScale;\nuniform vec2 uStrokeScale;\nuniform float uWidth;\n\nvoid main() {\n    gl_Position = vec4(\n        (aVertexPosition + uTranslate) * uScale\n        + normalize(aVertexNormal) * uWidth * uStrokeScale,\n        0.0, 1.0\n    );\n}\n\n","\n#ifdef GL_ES\n    precision highp float;\n#endif\n\nuniform vec3 uStrokeColor;\n\nvoid main() {\n    gl_FragColor = vec4(uStrokeColor, 1.0);\n}\n\n"),c=t.getAttribLocation(f,"aVertexPosition"),h=t.getAttribLocation(f,"aVertexNormal"),d=t.getUniformLocation(f,"uTranslate"),_=t.getUniformLocation(f,"uScale"),v=t.getUniformLocation(f,"uStrokeScale"),m=t.getUniformLocation(f,"uWidth"),g=t.getUniformLocation(f,"uStrokeColor"),b=t.createTexture();t.bindTexture(t.TEXTURE_2D,b),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);var p=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,p),t.bufferData(t.ARRAY_BUFFER,n.vertex,t.STATIC_DRAW);var x=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,x),t.bufferData(t.ARRAY_BUFFER,n.color,t.STATIC_DRAW);var P=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,P),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n.triangles,t.STATIC_DRAW);var T=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,T),t.bufferData(t.ARRAY_BUFFER,n.outline_triangles,t.STATIC_DRAW);var R=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,R),t.bufferData(t.ARRAY_BUFFER,n.outline_normals,t.STATIC_DRAW),this.webgl_data={canvas:e,context:t,fill_data:{shader_program:a,position_attribute:o,color_attribute:i,translate_uniform:s,scale_uniform:l,colors_uniform:u},stroke_data:{shader_program:f,position_attribute:c,normal_attribute:h,translate_uniform:d,scale_uniform:_,scale2_uniform:v,width_uniform:m,color_uniform:g},triangles:{position_buffer:p,color_buffer:x,index_buffer:P,texture:b,outline_position_buffer:T,outline_normal_buffer:R}}}},{key:"deinitResources",value:function(e,t){var r;if(null!==(r=this.webgl_data)&&void 0!==r&&r.context){var n=this.webgl_data.context;n.deleteTexture(this.webgl_data.triangles.texture),n.deleteBuffer(this.webgl_data.triangles.position_buffer),n.deleteBuffer(this.webgl_data.triangles.color_buffer),n.deleteBuffer(this.webgl_data.triangles.index_buffer),n.deleteBuffer(this.webgl_data.triangles.outline_position_buffer),n.deleteBuffer(this.webgl_data.triangles.outline_normal_buffer),n.getAttachedShaders(this.webgl_data.fill_data.shader_program).forEach((function(e){n.deleteShader(e)})),n.deleteProgram(this.webgl_data.fill_data.shader_program),n.getAttachedShaders(this.webgl_data.stroke_data.shader_program).forEach((function(e){n.deleteShader(e)})),n.deleteProgram(this.webgl_data.stroke_data.shader_program)}}},{key:"renderMapInContext",value:function(e,t,r){var a=this.webgl_data.context,o=this.webgl_data.fill_data,i=this.webgl_data.stroke_data,s=this.webgl_data.triangles,l=this.generateTranslateAndScale(r),u=(0,n.Z)(l,3),f=u[0],c=u[1],h=u[2];a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT);for(var d=new Uint8Array(4*e.length),_=0;_<e.length;_++){for(var v=0;v<3;v++)d[4*_+v]=e[_].color[v],e[_].id===r.hover&&(d[4*_+v]*=.8);d[4*_+3]=255}a.bindTexture(a.TEXTURE_2D,s.texture),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,e.length,1,0,a.RGBA,a.UNSIGNED_BYTE,d),a.useProgram(o.shader_program),a.uniform2fv(o.translate_uniform,f),a.uniform2fv(o.scale_uniform,c),a.uniform1i(o.colors_uniform,0),a.bindBuffer(a.ARRAY_BUFFER,s.position_buffer),a.vertexAttribPointer(o.position_attribute,2,a.FLOAT,!1,0,0),a.enableVertexAttribArray(o.position_attribute),a.bindBuffer(a.ARRAY_BUFFER,s.color_buffer),a.vertexAttribPointer(o.color_attribute,1,a.FLOAT,!1,0,0),a.enableVertexAttribArray(o.color_attribute),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,s.index_buffer),a.drawElements(a.TRIANGLES,t.triangles.length,a.UNSIGNED_INT,0),a.useProgram(i.shader_program),a.uniform2fv(i.translate_uniform,f),a.uniform2fv(i.scale_uniform,c),a.uniform2fv(i.scale2_uniform,h),a.uniform1f(i.width_uniform,.0025),a.uniform3fv(i.color_uniform,[.271,.302,.38]),a.bindBuffer(a.ARRAY_BUFFER,s.outline_normal_buffer),a.vertexAttribPointer(i.normal_attribute,2,a.FLOAT,!1,0,0),a.enableVertexAttribArray(i.normal_attribute),a.bindBuffer(a.ARRAY_BUFFER,s.outline_position_buffer),a.vertexAttribPointer(i.position_attribute,2,a.FLOAT,!1,0,0),a.enableVertexAttribArray(i.position_attribute),a.drawArrays(a.TRIANGLES,0,t.outline_triangles.length/2)}}]),e}()},752:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(120);function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,n.Z)(e)););return e}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=a(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},o.apply(this,arguments)}},885:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(181);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}}(e,t)||(0,n.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUltTyxFQUFTQyxHQUdoREUsRUFBS0csUUFJVFQsRUFBS1UsTUFBTTFRLEtBQU13USxhLDRDQ2RYLFNBQVNHLEVBQWVDLEVBQUtoTCxHQUMxQyxPQ0xhLFNBQXlCZ0wsR0FDdEMsR0FBSUMsTUFBTUMsUUFBUUYsR0FBTSxPQUFPQSxFREl4QixDQUFlQSxJRUxULFNBQStCQSxFQUFLaEwsR0FDakQsSUFBSW1MLEVBQVksTUFBUEgsRUFBYyxLQUF5QixvQkFBWEksUUFBMEJKLEVBQUlJLE9BQU9DLFdBQWFMLEVBQUksY0FFM0YsR0FBVSxNQUFORyxFQUFKLENBQ0EsSUFJSUcsRUFBSUMsRUFKSkMsRUFBTyxHQUNQQyxHQUFLLEVBQ0xDLEdBQUssRUFJVCxJQUNFLElBQUtQLEVBQUtBLEVBQUdqQixLQUFLYyxLQUFRUyxHQUFNSCxFQUFLSCxFQUFHUSxRQUFRQyxRQUM5Q0osRUFBS0ssS0FBS1AsRUFBR1QsUUFFVDdLLEdBQUt3TCxFQUFLcFAsU0FBVzRELEdBSDRCeUwsR0FBSyxJQUs1RCxNQUFPSyxHQUNQSixHQUFLLEVBQ0xILEVBQUtPLEVBQ0wsUUFDQSxJQUNPTCxHQUFzQixNQUFoQk4sRUFBVyxRQUFXQSxFQUFXLFNBQzVDLFFBQ0EsR0FBSU8sRUFBSSxNQUFNSCxHQUlsQixPQUFPQyxHRnRCdUIsQ0FBcUJSLEVBQUtoTCxLQUFNLEVBQUErTCxFQUFBLEdBQTJCZixFQUFLaEwsSUdMakYsV0FDYixNQUFNLElBQUlnTSxVQUFVLDZJSElnRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dlby1kcmF3Ly4vc3JjL21hcC9tYXAtYmFja2VuZC13ZWJnbC5qcyIsIndlYnBhY2s6Ly9nZW8tZHJhdy8uL3NyYy9tYXAvd2ViZ2wtcmVuZGVyZXItM2QuanMiLCJ3ZWJwYWNrOi8vZ2VvLWRyYXcvLi9zcmMvbWFwL3NoYWRlcnMvZWFydGgtdmVydGV4LXNoYWRlci5nbHNsIiwid2VicGFjazovL2dlby1kcmF3Ly4vc3JjL21hcC9zaGFkZXJzL2VhcnRoLWZyYWdtZW50LXNoYWRlci5nbHNsIiwid2VicGFjazovL2dlby1kcmF3Ly4vc3JjL21hcC93ZWJnbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly9nZW8tZHJhdy8uL3NyYy9tYXAvc2hhZGVycy9maWxsLXZlcnRleC1zaGFkZXIuZ2xzbCIsIndlYnBhY2s6Ly9nZW8tZHJhdy8uL3NyYy9tYXAvc2hhZGVycy9maWxsLWZyYWdtZW50LXNoYWRlci5nbHNsIiwid2VicGFjazovL2dlby1kcmF3Ly4vc3JjL21hcC9zaGFkZXJzL3N0cm9rZS12ZXJ0ZXgtc2hhZGVyLmdsc2wiLCJ3ZWJwYWNrOi8vZ2VvLWRyYXcvLi9zcmMvbWFwL3NoYWRlcnMvc3Ryb2tlLWZyYWdtZW50LXNoYWRlci5nbHNsIiwid2VicGFjazovL2dlby1kcmF3Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3N1cGVyUHJvcEJhc2UuanMiLCJ3ZWJwYWNrOi8vZ2VvLWRyYXcvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0LmpzIiwid2VicGFjazovL2dlby1kcmF3Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vZ2VvLWRyYXcvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXJyYXlXaXRoSG9sZXMuanMiLCJ3ZWJwYWNrOi8vZ2VvLWRyYXcvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaXRlcmFibGVUb0FycmF5TGltaXQuanMiLCJ3ZWJwYWNrOi8vZ2VvLWRyYXcvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vbm9uSXRlcmFibGVSZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHsgTGl0RWxlbWVudCwgaHRtbCwgY3NzIH0gZnJvbSAnbGl0JztcblxuaW1wb3J0IFdlYkdMUmVuZGVyZXIgZnJvbSAnLi93ZWJnbC1yZW5kZXJlcic7XG5pbXBvcnQgV2ViR0xSZW5kZXJlcjNkIGZyb20gJy4vd2ViZ2wtcmVuZGVyZXItM2QnO1xuXG5pbXBvcnQgeyBUcmlhbmd1bGF0ZWREYXRhIH0gZnJvbSAnLi4vLi4vcGtnL2luZGV4J1xuXG5jbGFzcyBNYXBCYWNrZW5kV2ViR2wgZXh0ZW5kcyBMaXRFbGVtZW50IHtcblxuICAgIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxvY2F0aW9uczogeyBhdHRyaWJ1dGU6IHRydWUgfSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgc3R5bGVzKCkge1xuICAgICAgICByZXR1cm4gY3NzYFxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAjbWFwIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1heC1oZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuICAgIH1cblxuICAgIG5ld1JlbmRlcmVyKCkge1xuICAgICAgICByZXR1cm4gbmV3IFdlYkdMUmVuZGVyZXIoKTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHRoaXMubmV3UmVuZGVyZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGNlbnRlcjogWzAsIDBdLFxuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICBtaW46IFswLCAwXSxcbiAgICAgICAgICAgIG1heDogWzAsIDBdLFxuICAgICAgICAgICAgc2l6ZTogWzAsIDBdLFxuICAgICAgICAgICAgaG92ZXI6IG51bGwsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZ2V0IGNlbnRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuY2VudGVyO1xuICAgIH1cblxuICAgIGdldCBzY2FsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuc2NhbGU7XG4gICAgfVxuXG4gICAgc2V0Q2VudGVyQW5kU2NhbGUoY2VudGVyLCBzY2FsZSkge1xuICAgICAgICB0aGlzLnN0YXRlLmNlbnRlciA9IGNlbnRlcjtcbiAgICAgICAgdGhpcy5zdGF0ZS5zY2FsZSA9IHNjYWxlO1xuICAgIH1cbiAgICBcbiAgICBjbGllbnRQb3NUb01hcFBvcyhjbGllbnRfcG9zKSB7XG4gICAgICAgIGNvbnN0IG1hcCA9IHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZCgnbWFwJyk7XG4gICAgICAgIGNvbnN0IG1hcF9wb3MgPSBtYXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLmNsaWVudFBvc1RvTWFwUG9zKGNsaWVudF9wb3MsIG1hcF9wb3MsIHRoaXMuc3RhdGUpO1xuICAgIH1cblxuICAgIGNsaWVudFBvc1RvUHJvalBvcyhjbGllbnRfcG9zKSB7XG4gICAgICAgIGNvbnN0IG1hcCA9IHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZCgnbWFwJyk7XG4gICAgICAgIGNvbnN0IG1hcF9wb3MgPSBtYXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLmNsaWVudFBvc1RvUHJvalBvcyhjbGllbnRfcG9zLCBtYXBfcG9zLCB0aGlzLnN0YXRlKTtcbiAgICB9XG4gICAgXG4gICAgcHJvalBvc1RvQ2xpZW50UG9zKGxvY2F0aW9uX3Bvcykge1xuICAgICAgICBjb25zdCBtYXAgPSB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpO1xuICAgICAgICBjb25zdCBtYXBfcG9zID0gbWFwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlci5wcm9qUG9zVG9DbGllbnRQb3MobG9jYXRpb25fcG9zLCBtYXBfcG9zLCB0aGlzLnN0YXRlKTtcbiAgICB9XG5cbiAgICBoYW5kbGVNb3VzZU1vdmUoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgcG9zID0gdGhpcy5jbGllbnRQb3NUb1Byb2pQb3MoW2V2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFldKTtcbiAgICAgICAgY29uc3QgaW50ZXIgPSB0aGlzLnRyaWFuZ3VsYXRlZD8uZ2V0X2ludGVyc2VjdGlvbihwb3MsIHRoaXMucmVuZGVyZXIucHJvamVjdCgpKTtcbiAgICAgICAgaWYgKGludGVyKSB7XG4gICAgICAgICAgICBjb25zdCBsb2MgPSB0aGlzLmxvY2F0aW9uc1tpbnRlclswXV07XG4gICAgICAgICAgICBjb25zdCBwb2x5Z29uID0gdGhpcy5yZW5kZXJlci5wcm9qZWN0KClcbiAgICAgICAgICAgICAgICA/IGxvYy5yYXcuZ2V0X3Byb2pfcG9seWdvbihpbnRlclsxXSlcbiAgICAgICAgICAgICAgICA6IGxvYy5yYXcuZ2V0X3BvbHlnb24oaW50ZXJbMV0pO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5ob3ZlciA9IGxvYy5pZDtcbiAgICAgICAgICAgIGNvbnN0IG15X2V2ZW50ID0gbmV3IEV2ZW50KCdob3ZlcicpO1xuICAgICAgICAgICAgbXlfZXZlbnQubG9jYXRpb24gPSBsb2M7XG4gICAgICAgICAgICBteV9ldmVudC5wb3NpdGlvbiA9IHRoaXMucHJvalBvc1RvQ2xpZW50UG9zKFtcbiAgICAgICAgICAgICAgICAocG9seWdvbi5taW5bMF0gKyBwb2x5Z29uLm1heFswXSkgLyAyLFxuICAgICAgICAgICAgICAgIChwb2x5Z29uLm1pblsxXSArIHBvbHlnb24ubWF4WzFdKSAvIDJcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG15X2V2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlTW91c2VPdXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZU1vdXNlT3V0KCkge1xuICAgICAgICB0aGlzLnN0YXRlLmhvdmVyID0gbnVsbDtcbiAgICAgICAgY29uc3QgbXlfZXZlbnQgPSBuZXcgRXZlbnQoJ2hvdmVyJyk7XG4gICAgICAgIG15X2V2ZW50LmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgbXlfZXZlbnQucG9zaXRpb24gPSBudWxsO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobXlfZXZlbnQpO1xuICAgIH1cbiAgICBcbiAgICBoYW5kbGVUb3VjaFN0YXJ0KGV2ZW50KSB7XG4gICAgICAgIGlmKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZU1vdXNlTW92ZSh7XG4gICAgICAgICAgICAgICAgY2xpZW50WDogZXZlbnQudG91Y2hlc1swXS5jbGllbnRYLFxuICAgICAgICAgICAgICAgIGNsaWVudFk6IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3VzZU91dChldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmVuZGVyTWFwSW5DYW52YXMoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICF0aGlzLmxhc3QgfHwgdGhpcy5sYXN0LmNlbnRlciAhPSB0aGlzLnN0YXRlLmNlbnRlclxuICAgICAgICAgICAgfHwgdGhpcy5sYXN0LnNjYWxlICE9IHRoaXMuc3RhdGUuc2NhbGVcbiAgICAgICAgICAgIHx8IHRoaXMubGFzdC5ob3ZlciAhPSB0aGlzLnN0YXRlLmhvdmVyXG4gICAgICAgICAgICB8fCB0aGlzLmxhc3Quc2l6ZSAhPSB0aGlzLnN0YXRlLnNpemVcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlck1hcEluQ29udGV4dCh0aGlzLmxvY2F0aW9ucywgdGhpcy50cmlhbmd1bGF0ZWQsIHRoaXMuc3RhdGUpXG4gICAgICAgICAgICB0aGlzLmxhc3QgPSB7IC4uLnRoaXMuc3RhdGUgfTtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucmVuZGVyTWFwSW5DYW52YXMuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgdXBkYXRlZCgpIHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKCdtYXAnKTtcbiAgICAgICAgaWYgKHRoaXMubGFzdF9jYW52YXMgIT0gY2FudmFzKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RfY2FudmFzID0gY2FudmFzO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5kZWluaXRSZXNvdXJjZXModGhpcy5sb2NhdGlvbnMsIHRoaXMudHJpYW5ndWxhdGVkKTtcbiAgICAgICAgICAgIGNvbnN0IGdsID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJykgfHwgY2FudmFzLmdldENvbnRleHQoJ2V4cGVyaW1lbnRhbC13ZWJnbCcpO1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlUmVzaXplID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgICBnbC52aWV3cG9ydCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2l6ZSA9IFtjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGhhbmRsZVJlc2l6ZSk7XG4gICAgICAgICAgICBoYW5kbGVSZXNpemUoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuaW5pdEZvckNvbnRleHQoY2FudmFzLCBnbCwgdGhpcy5sb2NhdGlvbnMsIHRoaXMudHJpYW5ndWxhdGVkKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTWFwSW5DYW52YXMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3QgPSBudWxsO1xuICAgIH1cblxuICAgIGJ1aWxkUmVuZGVyRGF0YSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyaWFuZ3VsYXRlZCkge1xuICAgICAgICAgICAgdGhpcy50cmlhbmd1bGF0ZWQgPSBUcmlhbmd1bGF0ZWREYXRhLm5ldygpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsb2Mgb2YgdGhpcy5sb2NhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWFuZ3VsYXRlZC5hZGRfbG9jYXRpb24obG9jLnJhdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRyaWFuZ3VsYXRlZC50cmlhbmd1bGF0ZSh0aGlzLnJlbmRlcmVyLnByb2plY3QoKSk7XG4gICAgICAgICAgICB0aGlzLnRyaWFuZ3VsYXRlZC5nZW5lcmF0ZV9vdXRsaW5lcyh0aGlzLnJlbmRlcmVyLnByb2plY3QoKSk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLm1pbiA9IHRoaXMudHJpYW5ndWxhdGVkLm1pbjtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubWF4ID0gdGhpcy50cmlhbmd1bGF0ZWQubWF4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLmJ1aWxkUmVuZGVyRGF0YSgpO1xuICAgICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgICAgIDxjYW52YXNcbiAgICAgICAgICAgICAgICBpZD1cIm1hcFwiXG4gICAgICAgICAgICAgICAgQG1vdXNlbW92ZT1cIiR7dGhpcy5oYW5kbGVNb3VzZU1vdmV9XCJcbiAgICAgICAgICAgICAgICBAd2hlZWw9XCIke3RoaXMuaGFuZGxlTW91c2VNb3ZlfVwiXG4gICAgICAgICAgICAgICAgQG1vdXNlb3V0PVwiJHt0aGlzLmhhbmRsZU1vdXNlT3V0fVwiXG4gICAgICAgICAgICAgICAgQHRvdWNoc3RhcnQ9XCIke3RoaXMuaGFuZGxlVG91Y2hTdGFydH1cIlxuICAgICAgICAgICAgICAgIEB0b3VjaG1vdmU9XCIke3RoaXMuaGFuZGxlVG91Y2hTdGFydH1cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9jYW52YXM+XG4gICAgICAgIGA7XG4gICAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ21hcC1iYWNrZW5kJywgTWFwQmFja2VuZFdlYkdsKTtcblxuY2xhc3MgTWFwQmFja2VuZFdlYkdsM2QgZXh0ZW5kcyBNYXBCYWNrZW5kV2ViR2wge1xuICAgIG5ld1JlbmRlcmVyKCkge1xuICAgICAgICByZXR1cm4gbmV3IFdlYkdMUmVuZGVyZXIzZCgpO1xuICAgIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdtYXAtYmFja2VuZC0zZCcsIE1hcEJhY2tlbmRXZWJHbDNkKTtcblxuIiwiXG5pbXBvcnQgRWFydGhGcmFnbWVudFNoYWRlciBmcm9tICcuL3NoYWRlcnMvZWFydGgtZnJhZ21lbnQtc2hhZGVyLmdsc2wnO1xuaW1wb3J0IEVhcnRoVmVydGV4U2hhZGVyIGZyb20gJy4vc2hhZGVycy9lYXJ0aC12ZXJ0ZXgtc2hhZGVyLmdsc2wnO1xuXG5pbXBvcnQgV2ViR0xSZW5kZXJlciBmcm9tICcuL3dlYmdsLXJlbmRlcmVyJztcblxuY29uc3QgVEVYVFVSRV9IRUlHSFQgPSAyMDQ4O1xuY29uc3QgVEVYVFVSRV9XSURUSCA9IDQwOTY7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYkdMUmVuZGVyZXIzZCBleHRlbmRzIFdlYkdMUmVuZGVyZXIge1xuICAgIHByb2plY3QoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjbGllbnRQb3NUb1NwaGVyZVBvcyhjbGllbnRfcG9zLCBtYXBfcG9zLCBzdGF0ZSkge1xuICAgICAgICBjb25zdCBzY2FsZSA9IHRoaXMuZ2VuZXJhdGVTY2FsZShzdGF0ZSk7XG4gICAgICAgIGNvbnN0IHBvcyA9IFtcbiAgICAgICAgICAgICgyICogKGNsaWVudF9wb3NbMF0gLSBtYXBfcG9zLngpIC8gbWFwX3Bvcy53aWR0aCAtIDEuMCkgLyBzY2FsZVswXSxcbiAgICAgICAgICAgICgxLjAgLSAyICogKGNsaWVudF9wb3NbMV0gLSBtYXBfcG9zLnkpIC8gbWFwX3Bvcy5oZWlnaHQpIC8gc2NhbGVbMV0sXG4gICAgICAgICAgICAwXG4gICAgICAgIF07XG4gICAgICAgIHBvc1syXSA9IDEgLSBwb3NbMF0gKiBwb3NbMF0gLSBwb3NbMV0gKiBwb3NbMV07XG4gICAgICAgIGlmIChwb3NbMl0gPCAwKSB7XG4gICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5zcXJ0KHBvc1swXSpwb3NbMF0gKyBwb3NbMV0qcG9zWzFdKTtcbiAgICAgICAgICAgIHBvc1swXSAvPSBkaXN0O1xuICAgICAgICAgICAgcG9zWzFdIC89IGRpc3Q7XG4gICAgICAgICAgICBwb3NbMl0gPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcG9zWzJdID0gTWF0aC5zcXJ0KHBvc1syXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICB9XG5cbiAgICBjbGllbnRQb3NUb1NvbWVQb3MoY2xpZW50X3BvcywgbWFwX3Bvcywgc3RhdGUpIHtcbiAgICAgICAgY29uc3QgcG9zID0gdGhpcy5jbGllbnRQb3NUb1NwaGVyZVBvcyhjbGllbnRfcG9zLCBtYXBfcG9zLCBzdGF0ZSlcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLm1hdDNWZWNNdWwodGhpcy5nZW5lcmF0ZVRyYW5zZm9ybShzdGF0ZSksIHBvcylcbiAgICAgICAgY29uc3QgY29vcmQgPSBbXG4gICAgICAgICAgICBNYXRoLmF0YW4yKHBvc2l0aW9uWzBdLCBwb3NpdGlvblsyXSksXG4gICAgICAgICAgICBNYXRoLmF0YW4yKHBvc2l0aW9uWzFdLCBNYXRoLnNxcnQocG9zaXRpb25bMF0gKiBwb3NpdGlvblswXSArIHBvc2l0aW9uWzJdICogcG9zaXRpb25bMl0pKSxcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuIGNvb3JkO1xuICAgIH1cblxuICAgIG5vcm1hbGl6ZUFyb3VuZCh4LCBhKSB7XG4gICAgICAgIGlmICh4IDwgYSAtIE1hdGguUEkpIHtcbiAgICAgICAgICAgIHJldHVybiB4ICsgMiAqIE1hdGguUEkgKiBNYXRoLmZsb29yKChhICsgTWF0aC5QSSAtIHgpIC8gKDIgKiBNYXRoLlBJKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoeCA+IGEgKyBNYXRoLlBJKSB7XG4gICAgICAgICAgICByZXR1cm4geCAtIDIgKiBNYXRoLlBJICogTWF0aC5mbG9vcigoeCArIE1hdGguUEkgLSBhKSAvICgyICogTWF0aC5QSSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGllbnRQb3NUb01hcFBvcyhjbGllbnRfcG9zLCBtYXBfcG9zLCBzdGF0ZSkge1xuICAgICAgICBjb25zdCB7IGNlbnRlciB9ID0gc3RhdGU7XG4gICAgICAgIGNvbnN0IHBvcyA9IHRoaXMuY2xpZW50UG9zVG9TcGhlcmVQb3MoY2xpZW50X3BvcywgbWFwX3Bvcywgc3RhdGUpXG4gICAgICAgIGNvbnN0IGNvb3JkID0gY2VudGVyWzFdICsgTWF0aC5hdGFuMihwb3NbMV0sIE1hdGguc3FydChwb3NbMF0gKiBwb3NbMF0gKyBwb3NbMl0gKiBwb3NbMl0pKTtcbiAgICAgICAgY29uc3QgcHJvaiA9IHRoaXMuY2xpZW50UG9zVG9Tb21lUG9zKGNsaWVudF9wb3MsIG1hcF9wb3MsIHN0YXRlKTtcbiAgICAgICAgcmV0dXJuIFt0aGlzLm5vcm1hbGl6ZUFyb3VuZChwcm9qWzBdLCBjZW50ZXJbMF0pLCBjb29yZF07XG4gICAgfVxuXG4gICAgY2xpZW50UG9zVG9Qcm9qUG9zKGNsaWVudF9wb3MsIG1hcF9wb3MsIHN0YXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZVBvc2l0aW9uKHRoaXMuY2xpZW50UG9zVG9Tb21lUG9zKGNsaWVudF9wb3MsIG1hcF9wb3MsIHN0YXRlKSk7XG4gICAgfVxuXG4gICAgcHJvalBvc1RvQ2xpZW50UG9zKHByb2pfcG9zLCBtYXBfcG9zLCBzdGF0ZSkge1xuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IFtcbiAgICAgICAgICAgIE1hdGguY29zKHByb2pfcG9zWzFdKSAqIE1hdGguc2luKHByb2pfcG9zWzBdKSxcbiAgICAgICAgICAgIE1hdGguc2luKHByb2pfcG9zWzFdKSxcbiAgICAgICAgICAgIE1hdGguY29zKHByb2pfcG9zWzFdKSAqIE1hdGguY29zKHByb2pfcG9zWzBdKSxcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgcG9zID0gdGhpcy5tYXQzVmVjTXVsKHRoaXMuZ2VuZXJhdGVJbnZlcnNlVHJhbnNmb3JtKHN0YXRlKSwgcG9zaXRpb24pXG4gICAgICAgIGlmIChwb3NbMl0gPCAwKSB7XG4gICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5zcXJ0KHBvc1swXSpwb3NbMF0gKyBwb3NbMV0qcG9zWzFdKTtcbiAgICAgICAgICAgIHBvc1swXSAvPSBkaXN0O1xuICAgICAgICAgICAgcG9zWzFdIC89IGRpc3Q7XG4gICAgICAgICAgICBwb3NbMl0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5nZW5lcmF0ZVNjYWxlKHN0YXRlKTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIChwb3NbMF0gKiBzY2FsZVswXSArIDEpIC8gMiAqIG1hcF9wb3Mud2lkdGggKyBtYXBfcG9zLngsXG4gICAgICAgICAgICAoMSAtIHBvc1sxXSAqIHNjYWxlWzFdKSAvIDIgKiBtYXBfcG9zLmhlaWdodCArIG1hcF9wb3MueVxuICAgICAgICBdO1xuICAgIH1cbiAgICBcbiAgICBnZW5lcmF0ZVNjYWxlKHtzaXplLCBzY2FsZTogem9vbV9zY2FsZX0pIHtcbiAgICAgICAgbGV0IHNjYWxlO1xuICAgICAgICBpZihzaXplWzBdIDwgc2l6ZVsxXSkge1xuICAgICAgICAgICAgc2NhbGUgPSBbem9vbV9zY2FsZSwgKHNpemVbMF0gLyBzaXplWzFdKSAqIHpvb21fc2NhbGVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2NhbGUgPSBbKHNpemVbMV0gLyBzaXplWzBdKSAqIHpvb21fc2NhbGUsIHpvb21fc2NhbGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzY2FsZTtcbiAgICB9XG5cbiAgICBtYXQzTXVsKGEsIGIpIHtcbiAgICAgICAgY29uc3QgcmVzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IDM7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICByZXNbMyppICsgal0gKz0gYVszKmkgKyBrXSAqIGJbMyprICsgal07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgbWF0M1ZlY011bChhLCB2KSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IFswLCAwLCAwXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgICAgICAgICAgcmVzW2ldICs9IGFbMypqICsgaV0gKiB2W2pdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgbWF0M1JvdGF0aW9uKGF4aXMsIGFuZ2xlKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTtcbiAgICAgICAgcmVzWzMqYXhpcyArIGF4aXNdID0gMTtcbiAgICAgICAgcmVzWzMqKChheGlzICsgMSkgJSAzKSArIChheGlzICsgMSkgJSAzXSA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICAgICAgcmVzWzMqKChheGlzICsgMikgJSAzKSArIChheGlzICsgMSkgJSAzXSA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICAgICAgcmVzWzMqKChheGlzICsgMSkgJSAzKSArIChheGlzICsgMikgJSAzXSA9IC1NYXRoLnNpbihhbmdsZSk7XG4gICAgICAgIHJlc1szKigoYXhpcyArIDIpICUgMykgKyAoYXhpcyArIDIpICUgM10gPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVUcmFuc2Zvcm0oc3RhdGUpIHtcbiAgICAgICAgY29uc3QgeyBjZW50ZXIgfSA9IHN0YXRlO1xuICAgICAgICByZXR1cm4gdGhpcy5tYXQzTXVsKHRoaXMubWF0M1JvdGF0aW9uKDAsIGNlbnRlclsxXSksIHRoaXMubWF0M1JvdGF0aW9uKDEsIC1jZW50ZXJbMF0pKVxuICAgIH1cblxuICAgIGdlbmVyYXRlSW52ZXJzZVRyYW5zZm9ybShzdGF0ZSkge1xuICAgICAgICBjb25zdCB7IGNlbnRlciB9ID0gc3RhdGU7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdDNNdWwodGhpcy5tYXQzUm90YXRpb24oMSwgY2VudGVyWzBdKSwgdGhpcy5tYXQzUm90YXRpb24oMCwgLWNlbnRlclsxXSkpXG4gICAgfVxuXG4gICAgbm9ybWFsaXplUG9zaXRpb24oW2JldGEsIGdhbW1hXSkge1xuICAgICAgICBnYW1tYSA9IChnYW1tYSArIE1hdGguUEkpICUgKDIgKiBNYXRoLlBJKTtcbiAgICAgICAgZ2FtbWEgPSAoMiAqIE1hdGguUEkgKyBnYW1tYSkgJSAoMiAqIE1hdGguUEkpIC0gTWF0aC5QSTtcbiAgICAgICAgaWYgKGdhbW1hIDwgLU1hdGguUEkgLyAyKSB7XG4gICAgICAgICAgICBiZXRhICs9IE1hdGguUEk7XG4gICAgICAgICAgICBnYW1tYSA9IE1hdGguYWJzKC1NYXRoLlBJIC8gMiAtIGdhbW1hKSAtIE1hdGguUEkgLyAyO1xuICAgICAgICB9IGVsc2UgaWYgKGdhbW1hID4gTWF0aC5QSSAvIDIpIHtcbiAgICAgICAgICAgIGJldGEgKz0gTWF0aC5QSTtcbiAgICAgICAgICAgIGdhbW1hID0gTWF0aC5QSSAvIDIgLSBNYXRoLmFicyhnYW1tYSAtIE1hdGguUEkgLyAyKTtcbiAgICAgICAgfVxuICAgICAgICBiZXRhID0gKGJldGEgKyBNYXRoLlBJKSAlICgyICogTWF0aC5QSSk7XG4gICAgICAgIGJldGEgPSAoMiAqIE1hdGguUEkgKyBiZXRhKSAlICgyICogTWF0aC5QSSk7XG4gICAgICAgIHJldHVybiBbYmV0YSAtIE1hdGguUEksIGdhbW1hXTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZVRleE1pbk1heChzdGF0ZSkge1xuICAgICAgICBjb25zdCB7IGNlbnRlciB9ID0gc3RhdGU7XG4gICAgICAgIGNvbnN0IHNjcmVlbl9zY2FsZSA9IHRoaXMuZ2VuZXJhdGVTY2FsZShzdGF0ZSk7XG4gICAgICAgIGNvbnN0IFtiZXRhLCBnYW1tYV0gPSB0aGlzLm5vcm1hbGl6ZVBvc2l0aW9uKGNlbnRlcik7XG4gICAgICAgIGxldCByZXM7XG4gICAgICAgIGlmICgxIC8gKHNjcmVlbl9zY2FsZVswXSAqIHNjcmVlbl9zY2FsZVswXSkgKyAxIC8gKHNjcmVlbl9zY2FsZVsxXSAqIHNjcmVlbl9zY2FsZVsxXSkgPiAxKSB7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZ2FtbWEpIDwgMC4xKSB7XG4gICAgICAgICAgICAgICAgcmVzID0gW1xuICAgICAgICAgICAgICAgICAgICBbMC41ICsgYmV0YSAvIE1hdGguUEkgLyAyIC0gMC4yNiwgMF0sXG4gICAgICAgICAgICAgICAgICAgIFswLjUgKyBiZXRhIC8gTWF0aC5QSSAvIDIgKyAwLjI2LCAxXVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGdhbW1hIDwgMCkge1xuICAgICAgICAgICAgICAgIHJlcyA9IFtbMCwgMF0sIFsxLCAxICsgZ2FtbWEgLyBNYXRoLlBJXV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcyA9IFtbMCwgZ2FtbWEgLyBNYXRoLlBJXSwgWzEsIDFdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICgwLjUgLSBNYXRoLmFicyhnYW1tYSkgLyBNYXRoLlBJIDwgTWF0aC5tYXgoMC4wNSwgMC41IC8gc2NyZWVuX3NjYWxlWzFdKSkge1xuICAgICAgICAgICAgaWYgKGdhbW1hIDwgMCkge1xuICAgICAgICAgICAgICAgIHJlcyA9IFtbMCwgMF0sIFsxLCAxICsgZ2FtbWEgLyBNYXRoLlBJXV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcyA9IFtbMCwgZ2FtbWEgLyBNYXRoLlBJXSwgWzEsIDFdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNpemVfeCA9IE1hdGgubWluKDAuMjUsIDAuMjUgKiAoMSArIChNYXRoLmFicyhnYW1tYSkgLyBNYXRoLlBJID4gMC40ID8gMyA6IDEpICogTWF0aC5hYnMoZ2FtbWEpKSAvIHNjcmVlbl9zY2FsZVswXSk7XG4gICAgICAgICAgICBjb25zdCBzaXplX3kgPSBNYXRoLm1pbigwLjI1LCAwLjI1ICogKDEgKyBNYXRoLmFicyhnYW1tYSkpIC8gc2NyZWVuX3NjYWxlWzFdKTtcbiAgICAgICAgICAgIHJlcyA9IFtcbiAgICAgICAgICAgICAgICBbMC41ICsgYmV0YSAvIE1hdGguUEkgLyAyIC0gc2l6ZV94LCAwLjUgKyBnYW1tYSAvIE1hdGguUEkgLSAyICogc2l6ZV95XSxcbiAgICAgICAgICAgICAgICBbMC41ICsgYmV0YSAvIE1hdGguUEkgLyAyICsgc2l6ZV94LCAwLjUgKyBnYW1tYSAvIE1hdGguUEkgKyAyICogc2l6ZV95XVxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICByZXNbMF1bMF0gPSAoMSArIChyZXNbMF1bMF0gJSAxKSkgJSAxO1xuICAgICAgICByZXNbMV1bMF0gPSAoMSArIChyZXNbMV1bMF0gJSAxKSkgJSAxO1xuICAgICAgICBpZiAocmVzWzFdWzBdIDw9IHJlc1swXVswXSkge1xuICAgICAgICAgICAgcmVzWzFdWzBdICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmVzWzBdWzFdID0gTWF0aC5taW4oMSwgTWF0aC5tYXgoMCwgcmVzWzBdWzFdKSk7XG4gICAgICAgIHJlc1sxXVsxXSA9IE1hdGgubWluKDEsIE1hdGgubWF4KDAsIHJlc1sxXVsxXSkpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIGluaXRGb3JDb250ZXh0KGNhbnZhcywgZ2wsIGxvY2F0aW9ucywgdHJpYW5ndWxhdGVkKSB7XG4gICAgICAgIHN1cGVyLmluaXRGb3JDb250ZXh0KGNhbnZhcywgZ2wsIGxvY2F0aW9ucywgdHJpYW5ndWxhdGVkKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUpO1xuICAgICAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIFRFWFRVUkVfV0lEVEgsIFRFWFRVUkVfSEVJR0hULCAwLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBudWxsKTtcbiAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLkxJTkVBUik7XG4gICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcblxuICAgICAgICBjb25zdCBlYXJ0aF9zaGFkZXJfcHJvZ3JhbSA9IHRoaXMuY3JlYXRlU2hhZGVyUHJvZ3JhbShnbCwgRWFydGhWZXJ0ZXhTaGFkZXIsIEVhcnRoRnJhZ21lbnRTaGFkZXIpO1xuICAgICAgICBjb25zdCBlYXJ0aF9wb3NpdGlvbl9hdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihlYXJ0aF9zaGFkZXJfcHJvZ3JhbSwgJ2FWZXJ0ZXhQb3NpdGlvbicpO1xuICAgICAgICBjb25zdCBlYXJ0aF9zY2FsZV91bmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKGVhcnRoX3NoYWRlcl9wcm9ncmFtLCAndVNjYWxlJyk7XG4gICAgICAgIGNvbnN0IGVhcnRoX3NjYWxlMl91bmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKGVhcnRoX3NoYWRlcl9wcm9ncmFtLCAndVNjYWxlWicpO1xuICAgICAgICBjb25zdCBlYXJ0aF9zYW1wbGVyX3VuaWZvcm0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oZWFydGhfc2hhZGVyX3Byb2dyYW0sICd1U2FtcGxlcicpO1xuICAgICAgICBjb25zdCBlYXJ0aF90ZXhtaW5fdW5pZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihlYXJ0aF9zaGFkZXJfcHJvZ3JhbSwgJ3VUZXhNaW4nKTtcbiAgICAgICAgY29uc3QgZWFydGhfdGV4bWF4X3VuaWZvcm0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oZWFydGhfc2hhZGVyX3Byb2dyYW0sICd1VGV4TWF4Jyk7XG4gICAgICAgIGNvbnN0IGVhcnRoX3RyYW5zZm9ybV91bmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKGVhcnRoX3NoYWRlcl9wcm9ncmFtLCAndVRyYW5zZm9ybScpO1xuXG4gICAgICAgIGNvbnN0IGVhcnRoX3ZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheShbXG4gICAgICAgICAgICAtMiwgMiwgICAyLCAyLCAgIDIsIC0yLCAgIC0yLCAtMixcbiAgICAgICAgXSk7XG4gICAgICAgIGNvbnN0IGVhcnRoX3RyaWFuZ2xlcyA9IG5ldyBVaW50MTZBcnJheShbXG4gICAgICAgICAgICAwLCAxLCAyLCAgIDIsIDMsIDAsXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCBlYXJ0aF9wb3NpdGlvbl9idWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGVhcnRoX3Bvc2l0aW9uX2J1ZmZlcik7XG4gICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBlYXJ0aF92ZXJ0aWNlcywgZ2wuU1RBVElDX0RSQVcpO1xuICAgICAgICBjb25zdCBlYXJ0aF9pbmRleF9idWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgZWFydGhfaW5kZXhfYnVmZmVyKTtcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgZWFydGhfdHJpYW5nbGVzLCBnbC5TVEFUSUNfRFJBVyk7XG5cbiAgICAgICAgdGhpcy53ZWJnbF9kYXRhLnRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICB0aGlzLndlYmdsX2RhdGEuZWFydGhfZGF0YSA9IHtcbiAgICAgICAgICAgIHNoYWRlcl9wcm9ncmFtOiBlYXJ0aF9zaGFkZXJfcHJvZ3JhbSxcbiAgICAgICAgICAgIHBvc2l0aW9uX2F0dHJpYnV0ZTogZWFydGhfcG9zaXRpb25fYXR0cmlidXRlLFxuICAgICAgICAgICAgc2NhbGVfdW5pZm9ybTogZWFydGhfc2NhbGVfdW5pZm9ybSxcbiAgICAgICAgICAgIHNjYWxlMl91bmlmb3JtOiBlYXJ0aF9zY2FsZTJfdW5pZm9ybSxcbiAgICAgICAgICAgIHNhbXBsZXJfdW5pZm9ybTogZWFydGhfc2FtcGxlcl91bmlmb3JtLFxuICAgICAgICAgICAgdGV4bWluX3VuaWZvcm06IGVhcnRoX3RleG1pbl91bmlmb3JtLFxuICAgICAgICAgICAgdGV4bWF4X3VuaWZvcm06IGVhcnRoX3RleG1heF91bmlmb3JtLFxuICAgICAgICAgICAgdHJhbnNmb3JtX3VuaWZvcm06IGVhcnRoX3RyYW5zZm9ybV91bmlmb3JtLFxuICAgICAgICAgICAgdmVydGljZXM6IGVhcnRoX3ZlcnRpY2VzLFxuICAgICAgICAgICAgdHJpYW5nbGVzOiBlYXJ0aF90cmlhbmdsZXMsXG4gICAgICAgICAgICBnbF9wb3NpdGlvbl9idWZmZXI6IGVhcnRoX3Bvc2l0aW9uX2J1ZmZlcixcbiAgICAgICAgICAgIGdsX2luZGV4X2J1ZmZlcjogZWFydGhfaW5kZXhfYnVmZmVyLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGRlaW5pdFJlc291cmNlcyhsb2NhdGlvbnMsIHRyaWFuZ3VsYXRlZCkge1xuICAgICAgICBpZiAodGhpcy53ZWJnbF9kYXRhPy5jb250ZXh0KSB7XG4gICAgICAgICAgICBjb25zdCBnbCA9IHRoaXMud2ViZ2xfZGF0YS5jb250ZXh0O1xuICAgICAgICAgICAgZ2wuZGVsZXRlVGV4dHVyZSh0aGlzLndlYmdsX2RhdGEudGV4dHVyZSk7XG4gICAgICAgICAgICBnbC5kZWxldGVCdWZmZXIodGhpcy53ZWJnbF9kYXRhLmVhcnRoX2RhdGEuZ2xfcG9zaXRpb25fYnVmZmVyKTtcbiAgICAgICAgICAgIGdsLmRlbGV0ZUJ1ZmZlcih0aGlzLndlYmdsX2RhdGEuZWFydGhfZGF0YS5nbF9pbmRleF9idWZmZXIpO1xuICAgICAgICAgICAgZ2wuZ2V0QXR0YWNoZWRTaGFkZXJzKHRoaXMud2ViZ2xfZGF0YS5lYXJ0aF9kYXRhLnNoYWRlcl9wcm9ncmFtKS5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgICAgICAgIGdsLmRlbGV0ZVNoYWRlcihzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZ2wuZGVsZXRlUHJvZ3JhbSh0aGlzLndlYmdsX2RhdGEuZWFydGhfZGF0YS5zaGFkZXJfcHJvZ3JhbSk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuZGVpbml0UmVzb3VyY2VzKGxvY2F0aW9ucywgdHJpYW5ndWxhdGVkKTtcbiAgICB9XG5cbiAgICByZW5kZXJUb1RleHR1cmUobG9jYXRpb25zLCB0cmlhbmd1bGF0ZWQsIHN0YXRlLCBtaW4sIG1heCkge1xuICAgICAgICBjb25zdCBnbCA9IHRoaXMud2ViZ2xfZGF0YS5jb250ZXh0O1xuICAgICAgICBjb25zdCBmaWxsX2RhdGEgPSB0aGlzLndlYmdsX2RhdGEuZmlsbF9kYXRhO1xuICAgICAgICBjb25zdCBzdHJva2VfZGF0YSA9IHRoaXMud2ViZ2xfZGF0YS5zdHJva2VfZGF0YTtcbiAgICAgICAgY29uc3QgdHJpYW5nbGVzID0gdGhpcy53ZWJnbF9kYXRhLnRyaWFuZ2xlcztcblxuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLndlYmdsX2RhdGEudGV4dHVyZSk7XG4gICAgICAgIGNvbnN0IGZiID0gZ2wuY3JlYXRlRnJhbWVidWZmZXIoKTtcbiAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBmYik7XG4gICAgICAgIGNvbnN0IGF0dGFjaG1lbnQgPSBnbC5DT0xPUl9BVFRBQ0hNRU5UMDtcbiAgICAgICAgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoZ2wuRlJBTUVCVUZGRVIsIGF0dGFjaG1lbnQsIGdsLlRFWFRVUkVfMkQsIHRoaXMud2ViZ2xfZGF0YS50ZXh0dXJlLCAwKTtcbiAgICAgICAgZ2wudmlld3BvcnQoMCwgMCwgVEVYVFVSRV9XSURUSCwgVEVYVFVSRV9IRUlHSFQpO1xuXG4gICAgICAgIGNvbnN0IHRyYW5zbGF0ZSA9IFtcbiAgICAgICAgICAgIDIgKiBNYXRoLlBJICogKDAuNSAtIChtaW5bMF0gKyBtYXhbMF0pIC8gMiksXG4gICAgICAgICAgICBNYXRoLlBJICogKDAuNSAtIChtaW5bMV0gKyBtYXhbMV0pIC8gMiksXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IHNjYWxlID0gWzEgLyAobWF4WzBdIC0gbWluWzBdKSAvIE1hdGguUEksIDIgLyAobWF4WzFdIC0gbWluWzFdKSAvIE1hdGguUEldO1xuICAgICAgICBjb25zdCBzdHJva2Vfc2NhbGUgPSBbXG4gICAgICAgICAgICAwLjUgLyAobWF4WzBdIC0gbWluWzBdKSAqIE1hdGguY2JydChzdGF0ZS5zY2FsZSkgLyBzdGF0ZS5zY2FsZSxcbiAgICAgICAgICAgIDAuNSAvIChtYXhbMV0gLSBtaW5bMV0pICogTWF0aC5jYnJ0KHN0YXRlLnNjYWxlKSAvIHN0YXRlLnNjYWxlXG4gICAgICAgIF07XG5cbiAgICAgICAgZ2wuY2xlYXJDb2xvcigwLjAsIDAuMCwgMC4wLCAwLjApO1xuICAgICAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBsb2NhdGlvbiBjb2xvcnNcbiAgICAgICAgY29uc3QgY29sb3JzID0gbmV3IFVpbnQ4QXJyYXkobG9jYXRpb25zLmxlbmd0aCAqIDQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2F0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb2xvcnNbNCppICsgal0gPSBsb2NhdGlvbnNbaV0uY29sb3Jbal07XG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uc1tpXS5pZCA9PT0gc3RhdGUuaG92ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3JzWzQqaSArIGpdICo9IDAuODtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2xvcnNbNCppICsgM10gPSAyNTU7XG4gICAgICAgIH1cbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdHJpYW5nbGVzLnRleHR1cmUpO1xuICAgICAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIGxvY2F0aW9ucy5sZW5ndGgsIDEsIDAsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIGNvbG9ycyk7XG5cbiAgICAgICAgLy8gRHJhdyBmaWxsXG4gICAgICAgIGdsLnVzZVByb2dyYW0oZmlsbF9kYXRhLnNoYWRlcl9wcm9ncmFtKTtcbiAgICAgICAgZ2wudW5pZm9ybTJmdihmaWxsX2RhdGEuc2NhbGVfdW5pZm9ybSwgc2NhbGUpO1xuICAgICAgICBnbC51bmlmb3JtMWkoZmlsbF9kYXRhLmNvbG9yc191bmlmb3JtLCAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdHJpYW5nbGVzLnBvc2l0aW9uX2J1ZmZlcik7XG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoZmlsbF9kYXRhLnBvc2l0aW9uX2F0dHJpYnV0ZSwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoZmlsbF9kYXRhLnBvc2l0aW9uX2F0dHJpYnV0ZSk7XG5cbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRyaWFuZ2xlcy5jb2xvcl9idWZmZXIpO1xuICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGZpbGxfZGF0YS5jb2xvcl9hdHRyaWJ1dGUsIDEsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGZpbGxfZGF0YS5jb2xvcl9hdHRyaWJ1dGUpO1xuXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHRyaWFuZ2xlcy5pbmRleF9idWZmZXIpO1xuICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8PSAxOyB4KyspIHtcbiAgICAgICAgICAgIGdsLnVuaWZvcm0yZnYoZmlsbF9kYXRhLnRyYW5zbGF0ZV91bmlmb3JtLCB0cmFuc2xhdGUpO1xuICAgICAgICAgICAgZ2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUywgdHJpYW5ndWxhdGVkLnRyaWFuZ2xlcy5sZW5ndGgsIGdsLlVOU0lHTkVEX0lOVCwgMCk7XG4gICAgICAgICAgICB0cmFuc2xhdGVbMF0gKz0gMiAqIE1hdGguUEk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEcmF3IHN0cm9rZVxuICAgICAgICBnbC51c2VQcm9ncmFtKHN0cm9rZV9kYXRhLnNoYWRlcl9wcm9ncmFtKTtcbiAgICAgICAgZ2wudW5pZm9ybTJmdihzdHJva2VfZGF0YS5zY2FsZV91bmlmb3JtLCBzY2FsZSk7XG4gICAgICAgIGdsLnVuaWZvcm0yZnYoc3Ryb2tlX2RhdGEuc2NhbGUyX3VuaWZvcm0sIHN0cm9rZV9zY2FsZSk7XG4gICAgICAgIGdsLnVuaWZvcm0xZihzdHJva2VfZGF0YS53aWR0aF91bmlmb3JtLCAwLjAwMjUpO1xuICAgICAgICBnbC51bmlmb3JtM2Z2KHN0cm9rZV9kYXRhLmNvbG9yX3VuaWZvcm0sIFswLjI3MSwgMC4zMDIsIDAuMzhdKTtcbiAgICAgICAgXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0cmlhbmdsZXMub3V0bGluZV9ub3JtYWxfYnVmZmVyKTtcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzdHJva2VfZGF0YS5ub3JtYWxfYXR0cmlidXRlLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShzdHJva2VfZGF0YS5ub3JtYWxfYXR0cmlidXRlKTtcblxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdHJpYW5nbGVzLm91dGxpbmVfcG9zaXRpb25fYnVmZmVyKTtcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzdHJva2VfZGF0YS5wb3NpdGlvbl9hdHRyaWJ1dGUsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHN0cm9rZV9kYXRhLnBvc2l0aW9uX2F0dHJpYnV0ZSk7XG4gICAgICAgIHRyYW5zbGF0ZVswXSAtPSA0ICogTWF0aC5QSTtcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPD0gMTsgeCsrKSB7XG4gICAgICAgICAgICBnbC51bmlmb3JtMmZ2KHN0cm9rZV9kYXRhLnRyYW5zbGF0ZV91bmlmb3JtLCB0cmFuc2xhdGUpO1xuICAgICAgICAgICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRVMsIDAsIHRyaWFuZ3VsYXRlZC5vdXRsaW5lX3RyaWFuZ2xlcy5sZW5ndGggLyAyKTtcbiAgICAgICAgICAgIHRyYW5zbGF0ZVswXSArPSAyICogTWF0aC5QSTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIHRoaXMud2ViZ2xfZGF0YS5jYW52YXMuY2xpZW50V2lkdGgsIHRoaXMud2ViZ2xfZGF0YS5jYW52YXMuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBudWxsKTtcbiAgICB9XG5cbiAgICByZW5kZXJNYXBJbkNvbnRleHQobG9jYXRpb25zLCB0cmlhbmd1bGF0ZWQsIHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IGdsID0gdGhpcy53ZWJnbF9kYXRhLmNvbnRleHQ7XG4gICAgICAgIGNvbnN0IGVhcnRoX2RhdGEgPSB0aGlzLndlYmdsX2RhdGEuZWFydGhfZGF0YTtcbiAgICAgICAgY29uc3QgW21pbiwgbWF4XSA9IHRoaXMuZ2VuZXJhdGVUZXhNaW5NYXgoc3RhdGUpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyVG9UZXh0dXJlKGxvY2F0aW9ucywgdHJpYW5ndWxhdGVkLCBzdGF0ZSwgbWluLCBtYXgpO1xuXG4gICAgICAgIGdsLmNsZWFyQ29sb3IoMC4wLCAwLjAsIDAuMCwgMC4wKTtcbiAgICAgICAgZ2wuY2xlYXJEZXB0aCgxKTtcbiAgICAgICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG5cbiAgICAgICAgLy8gRHJhdyBnbG9iZVxuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLndlYmdsX2RhdGEudGV4dHVyZSk7XG4gICAgICAgIGdsLnVzZVByb2dyYW0oZWFydGhfZGF0YS5zaGFkZXJfcHJvZ3JhbSk7XG4gICAgICAgIGdsLnVuaWZvcm0yZnYoZWFydGhfZGF0YS5zY2FsZV91bmlmb3JtLCB0aGlzLmdlbmVyYXRlU2NhbGUoc3RhdGUpKTtcbiAgICAgICAgZ2wudW5pZm9ybTJmdihlYXJ0aF9kYXRhLnNjYWxlX3VuaWZvcm0sIHRoaXMuZ2VuZXJhdGVTY2FsZShzdGF0ZSkpO1xuICAgICAgICBnbC51bmlmb3JtMWZ2KGVhcnRoX2RhdGEuc2NhbGUyX3VuaWZvcm0sIFtzdGF0ZS5zY2FsZV0pO1xuICAgICAgICBnbC51bmlmb3JtMWkoZWFydGhfZGF0YS5zYW1wbGVyX3VuaWZvcm0sIDApO1xuICAgICAgICBnbC51bmlmb3JtMmZ2KGVhcnRoX2RhdGEudGV4bWluX3VuaWZvcm0sIG1pbik7XG4gICAgICAgIGdsLnVuaWZvcm0yZnYoZWFydGhfZGF0YS50ZXhtYXhfdW5pZm9ybSwgbWF4KTtcbiAgICAgICAgZ2wudW5pZm9ybU1hdHJpeDNmdihlYXJ0aF9kYXRhLnRyYW5zZm9ybV91bmlmb3JtLCBmYWxzZSwgdGhpcy5nZW5lcmF0ZVRyYW5zZm9ybShzdGF0ZSkpO1xuICAgICAgICBcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGVhcnRoX2RhdGEuZ2xfcG9zaXRpb25fYnVmZmVyKTtcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihlYXJ0aF9kYXRhLnBvc2l0aW9uX2F0dHJpYnV0ZSwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoZWFydGhfZGF0YS5wb3NpdGlvbl9hdHRyaWJ1dGUpO1xuXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGVhcnRoX2RhdGEuZ2xfaW5kZXhfYnVmZmVyKTtcbiAgICAgICAgZ2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUywgZWFydGhfZGF0YS50cmlhbmdsZXMubGVuZ3RoLCBnbC5VTlNJR05FRF9TSE9SVCwgMCk7XG4gICAgfVxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBcIlxcbmF0dHJpYnV0ZSB2ZWMyIGFWZXJ0ZXhQb3NpdGlvbjtcXG5cXG51bmlmb3JtIHZlYzIgdVNjYWxlO1xcblxcbnZhcnlpbmcgdmVjMiB2UGl4ZWxQb3M7XFxuXFxudm9pZCBtYWluKCkge1xcbiAgICB2UGl4ZWxQb3MgPSBhVmVydGV4UG9zaXRpb247XFxuICAgIGdsX1Bvc2l0aW9uID0gdmVjNCh1U2NhbGUgKiBhVmVydGV4UG9zaXRpb24sIDAuMCwgMS4wKTtcXG59XFxuXFxuXCI7IiwiZXhwb3J0IGRlZmF1bHQgXCJcXG4jaWZkZWYgR0xfRVNcXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbiNlbmRpZlxcblxcbiNkZWZpbmUgUEkgMy4xNDE1OTI2NTM4XFxuXFxudW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XFxudW5pZm9ybSB2ZWMyIHVUZXhNaW47XFxudW5pZm9ybSB2ZWMyIHVUZXhNYXg7XFxudW5pZm9ybSBtYXQzIHVUcmFuc2Zvcm07XFxudW5pZm9ybSBmbG9hdCB1U2NhbGVaO1xcblxcbnZhcnlpbmcgdmVjMiB2UGl4ZWxQb3M7XFxuXFxuZmxvYXQgZm1vZChmbG9hdCBhLCBmbG9hdCBiKSB7XFxuICAgIHJldHVybiBhIC0gKGIgKiBmbG9vcihhIC8gYikpO1xcbn1cXG5cXG52ZWMyIG5vcm1hbGl6ZVBvc2l0aW9uKHZlYzIgcG9zKSB7XFxuICAgIHBvcy55ID0gZm1vZChwb3MueSArIFBJLCAyLjAgKiBQSSk7XFxuICAgIHBvcy55ID0gZm1vZCgyLjAgKiBQSSArIHBvcy55LCAyLjAgKiBQSSkgLSBQSTtcXG4gICAgaWYgKHBvcy55IDwgLVBJIC8gMi4wKSB7XFxuICAgICAgICBwb3MueCArPSBQSTtcXG4gICAgICAgIHBvcy55ID0gYWJzKC1QSSAvIDIuMCAtIHBvcy55KSAtIFBJIC8gMi4wO1xcbiAgICB9IGVsc2UgaWYgKHBvcy55ID4gUEkgLyAyLjApIHtcXG4gICAgICAgIHBvcy54ICs9IFBJO1xcbiAgICAgICAgcG9zLnkgPSBQSSAvIDIuMCAtIGFicyhwb3MueSAtIFBJIC8gMi4wKTtcXG4gICAgfVxcbiAgICBwb3MueCA9IGZtb2QocG9zLnggKyBQSSwgMi4wICogUEkpO1xcbiAgICBwb3MueCA9IGZtb2QoMi4wICogUEkgKyBwb3MueCwgMi4wICogUEkpO1xcbiAgICByZXR1cm4gdmVjMihwb3MueCAtIFBJLCBwb3MueSk7XFxufVxcblxcbnZlYzMgc3BoZXJlUG9zaXRpb24oKSB7XFxuICAgIHZlYzMgcG9zID0gdmVjMyh2UGl4ZWxQb3MsIDAuMCk7XFxuICAgIHBvcy56ID0gMS4wIC0gcG9zLngqcG9zLnggLSBwb3MueSpwb3MueTtcXG4gICAgaWYgKHBvcy56IDwgMC4wKSB7XFxuICAgICAgICBmbG9hdCBkaXN0ID0gc3FydChwb3MueCpwb3MueCArIHBvcy55KnBvcy55KTtcXG4gICAgICAgIHBvcy54IC89IGRpc3Q7XFxuICAgICAgICBwb3MueSAvPSBkaXN0O1xcbiAgICAgICAgcG9zLnogPSAwLjA7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICBwb3MueiA9IHNxcnQocG9zLnopO1xcbiAgICB9XFxuICAgIHJldHVybiBwb3M7XFxufVxcblxcbnZlYzIgdGV4UG9zaXRpb24odmVjMyBwb3MpIHtcXG4gICAgcG9zID0gdVRyYW5zZm9ybSAqIHBvcztcXG4gICAgdmVjMiBjb29yZCA9IHZlYzIoXFxuICAgICAgICBhdGFuKHBvcy54LCBwb3MueiksXFxuICAgICAgICBhdGFuKHBvcy55LCBzcXJ0KHBvcy54KnBvcy54ICsgcG9zLnoqcG9zLnopKVxcbiAgICApO1xcbiAgICB2ZWMyIGxvbmxhdCA9IG5vcm1hbGl6ZVBvc2l0aW9uKGNvb3JkKTtcXG4gICAgcmV0dXJuIHZlYzIoKGxvbmxhdC54ICsgUEkpIC8gKDIuMCAqIFBJKSwgKGxvbmxhdC55ICsgUEkgLyAyLjApIC8gUEkpO1xcbn1cXG5cXG5mbG9hdCBjb21wdXRlTGlnaHQodmVjMyBwb3MsIGJvb2wgd2F0ZXIpIHtcXG4gICAgdmVjMyBsaWdodCA9IG5vcm1hbGl6ZSh2ZWMzKC0xLjAsIDEuMCwgMy4wKSk7XFxuICAgIGZsb2F0IGMgPSBtYXgoMC4wLCBkb3QobGlnaHQsIHBvcykpO1xcbiAgICBmbG9hdCBhID0gbWF4KDAuMCwgZG90KHZlYzMoMC4wLCAwLjAsIDEuMCksIHJlZmxlY3QoLWxpZ2h0LCBwb3MpKSk7XFxuICAgIGEgKj0gYTtcXG4gICAgaWYgKHdhdGVyKSB7XFxuICAgICAgICByZXR1cm4gYyAqIDAuNyArIGEgKiAwLjEgKyAwLjI7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICByZXR1cm4gYyAqIDAuNSArIGEgKiAwLjMgKyAwLjI7XFxuICAgIH1cXG59XFxuXFxudmVjMyB3YXRlckNvbG9yKHZlYzMgcG9zKSB7XFxuICAgIHJldHVybiB2ZWMzKDAuMCwgMC4yLCAwLjQpO1xcbn1cXG5cXG52b2lkIG1haW4oKSB7XFxuICAgIGJvb2wgd2F0ZXIgPSBmYWxzZTtcXG4gICAgdmVjMyBwb3MgPSBzcGhlcmVQb3NpdGlvbigpO1xcbiAgICBmbG9hdCBkaXN0ID0gdlBpeGVsUG9zLnggKiB2UGl4ZWxQb3MueCArIHZQaXhlbFBvcy55ICogdlBpeGVsUG9zLnk7XFxuICAgIGZsb2F0IGVkZ2UgPSAoZGlzdCAtIDEuMCkgKiAoZGlzdCAtIDEuMCk7XFxuICAgIHZlYzIgdGV4Q29vcmQgPSB0ZXhQb3NpdGlvbihwb3MpO1xcbiAgICBpZiAodVRleE1pbi54IDw9IDEuMCArIHRleENvb3JkLnggJiYgdVRleE1heC54ID49IDEuMCArIHRleENvb3JkLngpIHtcXG4gICAgICAgIHZlYzIgdGV4UG9zID0gdmVjMihcXG4gICAgICAgICAgICAodGV4Q29vcmQueCArIDEuMCAtIHVUZXhNaW4ueCkgLyAodVRleE1heC54IC0gdVRleE1pbi54KSxcXG4gICAgICAgICAgICAodGV4Q29vcmQueSAtIHVUZXhNaW4ueSkgLyAodVRleE1heC55IC0gdVRleE1pbi55KVxcbiAgICAgICAgKTtcXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh1U2FtcGxlciwgdGV4UG9zKTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIHZlYzIgdGV4UG9zID0gdmVjMihcXG4gICAgICAgICAgICAodGV4Q29vcmQueCAtIHVUZXhNaW4ueCkgLyAodVRleE1heC54IC0gdVRleE1pbi54KSxcXG4gICAgICAgICAgICAodGV4Q29vcmQueSAtIHVUZXhNaW4ueSkgLyAodVRleE1heC55IC0gdVRleE1pbi55KVxcbiAgICAgICAgKTtcXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh1U2FtcGxlciwgdGV4UG9zKTtcXG4gICAgfVxcbiAgICBpZiAobGVuZ3RoKGdsX0ZyYWdDb2xvcikgPT0gMC4wKSB7XFxuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHdhdGVyQ29sb3IocG9zKSwgMS4wKTtcXG4gICAgICAgIHdhdGVyID0gdHJ1ZTtcXG4gICAgfVxcbiAgICBpZiAoZGlzdCA+PSAxLjApIHtcXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMC4wKTtcXG4gICAgfVxcbiAgICBmbG9hdCBmID0gMC41ICogZXhwKC0xLjBlNCAqIGVkZ2UpO1xcbiAgICBnbF9GcmFnQ29sb3IgPSAoMS4wIC0gZikgKiBnbF9GcmFnQ29sb3IgKyBmICogdmVjNCgwLjUsIDAuNzUsIDEuMCwgMS4wKTtcXG4gICAgaWYgKGRpc3QgPCAxLjApIHtcXG4gICAgICAgIGZsb2F0IGYgPSAwLjEgKiBleHAoLTEuMCAvICgyLjAgLSBwb3MueikgKiB1U2NhbGVaKSArIDAuMiAqICgxLjAgLSBwb3Mueik7XFxuICAgICAgICBnbF9GcmFnQ29sb3IgPSAoMS4wIC0gZikgKiBnbF9GcmFnQ29sb3IgKyBmICogdmVjNCgwLjAsIDAuNzUsIDEuMCwgMS4wKTtcXG4gICAgfVxcbiAgICBnbF9GcmFnQ29sb3IueHl6ID0gY29tcHV0ZUxpZ2h0KHBvcywgd2F0ZXIpICogZ2xfRnJhZ0NvbG9yLnh5ejtcXG59XFxuXFxuXCI7IiwiXG5pbXBvcnQgRmlsbEZyYWdtZW50U2hhZGVyIGZyb20gJy4vc2hhZGVycy9maWxsLWZyYWdtZW50LXNoYWRlci5nbHNsJztcbmltcG9ydCBGaWxsVmVydGV4U2hhZGVyIGZyb20gJy4vc2hhZGVycy9maWxsLXZlcnRleC1zaGFkZXIuZ2xzbCc7XG5pbXBvcnQgU3Ryb2tlRnJhZ21lbnRTaGFkZXIgZnJvbSAnLi9zaGFkZXJzL3N0cm9rZS1mcmFnbWVudC1zaGFkZXIuZ2xzbCc7XG5pbXBvcnQgU3Ryb2tlVmVydGV4U2hhZGVyIGZyb20gJy4vc2hhZGVycy9zdHJva2UtdmVydGV4LXNoYWRlci5nbHNsJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2ViR0xSZW5kZXJlciB7XG4gICAgcHJvamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY2xpZW50UG9zVG9NYXBQb3MoY2xpZW50X3BvcywgbWFwX3Bvcywgc3RhdGUpIHtcbiAgICAgICAgY29uc3QgW18sIHNjYWxlXSA9IHRoaXMuZ2VuZXJhdGVUcmFuc2xhdGVBbmRTY2FsZShzdGF0ZSk7XG4gICAgICAgIGNvbnN0IGNsaWVudF9wb3Nfbm9ybSA9IFtcbiAgICAgICAgICAgIDIgKiAoY2xpZW50X3Bvc1swXSAtIG1hcF9wb3MueCkgLyBtYXBfcG9zLndpZHRoIC0gMS4wLFxuICAgICAgICAgICAgMS4wIC0gMiAqIChjbGllbnRfcG9zWzFdIC0gbWFwX3Bvcy55KSAvIG1hcF9wb3MuaGVpZ2h0LFxuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgY2xpZW50X3Bvc19ub3JtWzBdIC8gc2NhbGVbMF0gKyBzdGF0ZS5jZW50ZXJbMF0sXG4gICAgICAgICAgICBjbGllbnRfcG9zX25vcm1bMV0gLyBzY2FsZVsxXSArIHN0YXRlLmNlbnRlclsxXSxcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBjbGllbnRQb3NUb1Byb2pQb3MoY2xpZW50X3BvcywgbWFwX3Bvcywgc3RhdGUpIHtcbiAgICAgICAgY29uc3QgW3RyYW5zZm9ybSwgc2NhbGVdID0gdGhpcy5nZW5lcmF0ZVRyYW5zbGF0ZUFuZFNjYWxlKHN0YXRlKTtcbiAgICAgICAgY29uc3QgY2xpZW50X3Bvc19ub3JtID0gW1xuICAgICAgICAgICAgMiAqIChjbGllbnRfcG9zWzBdIC0gbWFwX3Bvcy54KSAvIG1hcF9wb3Mud2lkdGggLSAxLjAsXG4gICAgICAgICAgICAxLjAgLSAyICogKGNsaWVudF9wb3NbMV0gLSBtYXBfcG9zLnkpIC8gbWFwX3Bvcy5oZWlnaHQsXG4gICAgICAgIF07XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBjbGllbnRfcG9zX25vcm1bMF0gLyBzY2FsZVswXSAtIHRyYW5zZm9ybVswXSxcbiAgICAgICAgICAgIGNsaWVudF9wb3Nfbm9ybVsxXSAvIHNjYWxlWzFdIC0gdHJhbnNmb3JtWzFdLFxuICAgICAgICBdO1xuICAgIH1cblxuICAgIHByb2pQb3NUb0NsaWVudFBvcyhsb2NhdGlvbl9wb3MsIG1hcF9wb3MsIHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IFt0cmFuc2Zvcm0sIHNjYWxlXSA9IHRoaXMuZ2VuZXJhdGVUcmFuc2xhdGVBbmRTY2FsZShzdGF0ZSk7XG4gICAgICAgIGNvbnN0IGNsaWVudF9wb3Nfbm9ybSA9IFtcbiAgICAgICAgICAgIChsb2NhdGlvbl9wb3NbMF0gKyB0cmFuc2Zvcm1bMF0pICogc2NhbGVbMF0sXG4gICAgICAgICAgICAobG9jYXRpb25fcG9zWzFdICsgdHJhbnNmb3JtWzFdKSAqIHNjYWxlWzFdLFxuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgKGNsaWVudF9wb3Nfbm9ybVswXSArIDEuMCkgLyAyICogbWFwX3Bvcy53aWR0aCArIG1hcF9wb3MueCxcbiAgICAgICAgICAgICgxLjAgLSBjbGllbnRfcG9zX25vcm1bMV0pIC8gMiAqIG1hcF9wb3MuaGVpZ2h0ICsgbWFwX3Bvcy55LFxuICAgICAgICBdO1xuICAgIH1cblxuICAgIGdlbmVyYXRlVHJhbnNsYXRlQW5kU2NhbGUoe21pbiwgbWF4LCBzaXplLCBjZW50ZXIsIHNjYWxlOiB6b29tX3NjYWxlfSkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IG1heFswXSAtIG1pblswXTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gbWF4WzFdIC0gbWluWzFdO1xuICAgICAgICBpZih3aWR0aCAvIHNpemVbMF0gPiBoZWlnaHQgLyBzaXplWzFdKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2xhdGUgPSBbXG4gICAgICAgICAgICAgICAgLW1pblswXSAtIHdpZHRoIC8gMiAtIGNlbnRlclswXSxcbiAgICAgICAgICAgICAgICAtbWluWzFdIC0gaGVpZ2h0IC8gMiAtIGNlbnRlclsxXSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjb25zdCBzY2FsZSA9IFtcbiAgICAgICAgICAgICAgICAyIC8gd2lkdGggKiB6b29tX3NjYWxlLFxuICAgICAgICAgICAgICAgIC0yICogKHNpemVbMF0gLyBzaXplWzFdKSAvIHdpZHRoICogem9vbV9zY2FsZSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjb25zdCBzdHJva2Vfc2NhbGUgPSBbXG4gICAgICAgICAgICAgICAgTWF0aC5jYnJ0KHpvb21fc2NhbGUpICogMSxcbiAgICAgICAgICAgICAgICBNYXRoLmNicnQoem9vbV9zY2FsZSkgKiAtc2l6ZVswXSAvIHNpemVbMV0sXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgcmV0dXJuIFt0cmFuc2xhdGUsIHNjYWxlLCBzdHJva2Vfc2NhbGVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNsYXRlID0gW1xuICAgICAgICAgICAgICAgIC1taW5bMF0gLSB3aWR0aCAvIDIgLSBjZW50ZXJbMF0sXG4gICAgICAgICAgICAgICAgLW1pblsxXSAtIGhlaWdodCAvIDIgLSBjZW50ZXJbMV0sXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSBbXG4gICAgICAgICAgICAgICAgMiAqIChzaXplWzFdIC8gc2l6ZVswXSkgLyBoZWlnaHQgKiB6b29tX3NjYWxlLFxuICAgICAgICAgICAgICAgIC0yIC8gIGhlaWdodCAqIHpvb21fc2NhbGUsXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgY29uc3Qgc3Ryb2tlX3NjYWxlID0gW1xuICAgICAgICAgICAgICAgIE1hdGguY2JydCh6b29tX3NjYWxlKSAqIHNpemVbMV0gLyBzaXplWzBdLFxuICAgICAgICAgICAgICAgIE1hdGguY2JydCh6b29tX3NjYWxlKSAqIC0xLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHJldHVybiBbdHJhbnNsYXRlLCBzY2FsZSwgc3Ryb2tlX3NjYWxlXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjcmVhdGVTaGFkZXJQcm9ncmFtKGdsLCB2ZXJ0ZXhfc2hhZGVyX3NvdXJjZSwgZnJhZ21lbnRfc2hhZGVyX3NvdXJjZSkge1xuICAgICAgICBjb25zdCB2ZXJ0ZXhfc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKGdsLlZFUlRFWF9TSEFERVIpO1xuICAgICAgICBnbC5zaGFkZXJTb3VyY2UodmVydGV4X3NoYWRlciwgdmVydGV4X3NoYWRlcl9zb3VyY2UpO1xuICAgICAgICBnbC5jb21waWxlU2hhZGVyKHZlcnRleF9zaGFkZXIpO1xuICAgICAgICBjb25zdCBmcmFnbWVudF9zaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTtcbiAgICAgICAgZ2wuc2hhZGVyU291cmNlKGZyYWdtZW50X3NoYWRlciwgZnJhZ21lbnRfc2hhZGVyX3NvdXJjZSk7XG4gICAgICAgIGdsLmNvbXBpbGVTaGFkZXIoZnJhZ21lbnRfc2hhZGVyKTtcbiAgICAgICAgY29uc3Qgc2hhZGVyX3Byb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgICAgIGdsLmF0dGFjaFNoYWRlcihzaGFkZXJfcHJvZ3JhbSwgdmVydGV4X3NoYWRlcik7XG4gICAgICAgIGdsLmF0dGFjaFNoYWRlcihzaGFkZXJfcHJvZ3JhbSwgZnJhZ21lbnRfc2hhZGVyKTtcbiAgICAgICAgZ2wubGlua1Byb2dyYW0oc2hhZGVyX3Byb2dyYW0pO1xuICAgICAgICByZXR1cm4gc2hhZGVyX3Byb2dyYW07XG4gICAgfVxuXG4gICAgaW5pdEZvckNvbnRleHQoY2FudmFzLCBnbCwgbG9jYXRpb25zLCB0cmlhbmd1bGF0ZWQpIHtcbiAgICAgICAgZ2wuZ2V0RXh0ZW5zaW9uKFwiT0VTX2VsZW1lbnRfaW5kZXhfdWludFwiKTtcblxuICAgICAgICBjb25zdCBmaWxsX3NoYWRlcl9wcm9ncmFtID0gdGhpcy5jcmVhdGVTaGFkZXJQcm9ncmFtKGdsLCBGaWxsVmVydGV4U2hhZGVyLCBGaWxsRnJhZ21lbnRTaGFkZXIpO1xuICAgICAgICBjb25zdCBmaWxsX3Bvc2l0aW9uX2F0dHJpYnV0ZSA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKGZpbGxfc2hhZGVyX3Byb2dyYW0sICdhVmVydGV4UG9zaXRpb24nKTtcbiAgICAgICAgY29uc3QgZmlsbF9jb2xvcl9hdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihmaWxsX3NoYWRlcl9wcm9ncmFtLCAnYVZlcnRleENvbG9yJyk7XG4gICAgICAgIGNvbnN0IGZpbGxfdHJhbnNsYXRlX3VuaWZvcm0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oZmlsbF9zaGFkZXJfcHJvZ3JhbSwgJ3VUcmFuc2xhdGUnKTtcbiAgICAgICAgY29uc3QgZmlsbF9zY2FsZV91bmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKGZpbGxfc2hhZGVyX3Byb2dyYW0sICd1U2NhbGUnKTtcbiAgICAgICAgY29uc3QgZmlsbF9jb2xvcnNfdW5pZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihmaWxsX3NoYWRlcl9wcm9ncmFtLCAndUNvbG9ycycpO1xuXG4gICAgICAgIGNvbnN0IHN0cm9rZV9zaGFkZXJfcHJvZ3JhbSA9IHRoaXMuY3JlYXRlU2hhZGVyUHJvZ3JhbShnbCwgU3Ryb2tlVmVydGV4U2hhZGVyLCBTdHJva2VGcmFnbWVudFNoYWRlcik7XG4gICAgICAgIGNvbnN0IHN0cm9rZV9wb3NpdGlvbl9hdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzdHJva2Vfc2hhZGVyX3Byb2dyYW0sICdhVmVydGV4UG9zaXRpb24nKTtcbiAgICAgICAgY29uc3Qgc3Ryb2tlX25vcm1hbF9hdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzdHJva2Vfc2hhZGVyX3Byb2dyYW0sICdhVmVydGV4Tm9ybWFsJyk7XG4gICAgICAgIGNvbnN0IHN0cm9rZV90cmFuc2xhdGVfdW5pZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzdHJva2Vfc2hhZGVyX3Byb2dyYW0sICd1VHJhbnNsYXRlJyk7XG4gICAgICAgIGNvbnN0IHN0cm9rZV9zY2FsZV91bmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHN0cm9rZV9zaGFkZXJfcHJvZ3JhbSwgJ3VTY2FsZScpO1xuICAgICAgICBjb25zdCBzdHJva2Vfc2NhbGUyX3VuaWZvcm0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oc3Ryb2tlX3NoYWRlcl9wcm9ncmFtLCAndVN0cm9rZVNjYWxlJyk7XG4gICAgICAgIGNvbnN0IHN0cm9rZV93aWR0aF91bmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHN0cm9rZV9zaGFkZXJfcHJvZ3JhbSwgJ3VXaWR0aCcpO1xuICAgICAgICBjb25zdCBzdHJva2VfY29sb3JfdW5pZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzdHJva2Vfc2hhZGVyX3Byb2dyYW0sICd1U3Ryb2tlQ29sb3InKTtcblxuICAgICAgICBjb25zdCB0ZXh0dXJlID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcbiAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpO1xuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcblxuICAgICAgICBjb25zdCBwb3NpdGlvbl9idWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHBvc2l0aW9uX2J1ZmZlcik7XG4gICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB0cmlhbmd1bGF0ZWQudmVydGV4LCBnbC5TVEFUSUNfRFJBVyk7XG4gICAgICAgIGNvbnN0IGNvbG9yX2J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgY29sb3JfYnVmZmVyKTtcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHRyaWFuZ3VsYXRlZC5jb2xvciwgZ2wuU1RBVElDX0RSQVcpO1xuICAgICAgICBjb25zdCBpbmRleF9idWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgaW5kZXhfYnVmZmVyKTtcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdHJpYW5ndWxhdGVkLnRyaWFuZ2xlcywgZ2wuU1RBVElDX0RSQVcpO1xuICAgICAgICBjb25zdCBvdXRsaW5lX3Bvc2l0aW9uX2J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgb3V0bGluZV9wb3NpdGlvbl9idWZmZXIpO1xuICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdHJpYW5ndWxhdGVkLm91dGxpbmVfdHJpYW5nbGVzLCBnbC5TVEFUSUNfRFJBVyk7XG4gICAgICAgIGNvbnN0IG91dGxpbmVfbm9ybWFsX2J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgb3V0bGluZV9ub3JtYWxfYnVmZmVyKTtcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHRyaWFuZ3VsYXRlZC5vdXRsaW5lX25vcm1hbHMsIGdsLlNUQVRJQ19EUkFXKTtcblxuICAgICAgICB0aGlzLndlYmdsX2RhdGEgPSB7XG4gICAgICAgICAgICBjYW52YXM6IGNhbnZhcyxcbiAgICAgICAgICAgIGNvbnRleHQ6IGdsLFxuICAgICAgICAgICAgZmlsbF9kYXRhOiB7XG4gICAgICAgICAgICAgICAgc2hhZGVyX3Byb2dyYW06IGZpbGxfc2hhZGVyX3Byb2dyYW0sXG4gICAgICAgICAgICAgICAgcG9zaXRpb25fYXR0cmlidXRlOiBmaWxsX3Bvc2l0aW9uX2F0dHJpYnV0ZSxcbiAgICAgICAgICAgICAgICBjb2xvcl9hdHRyaWJ1dGU6IGZpbGxfY29sb3JfYXR0cmlidXRlLFxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZV91bmlmb3JtOiBmaWxsX3RyYW5zbGF0ZV91bmlmb3JtLFxuICAgICAgICAgICAgICAgIHNjYWxlX3VuaWZvcm06IGZpbGxfc2NhbGVfdW5pZm9ybSxcbiAgICAgICAgICAgICAgICBjb2xvcnNfdW5pZm9ybTogZmlsbF9jb2xvcnNfdW5pZm9ybSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdHJva2VfZGF0YToge1xuICAgICAgICAgICAgICAgIHNoYWRlcl9wcm9ncmFtOiBzdHJva2Vfc2hhZGVyX3Byb2dyYW0sXG4gICAgICAgICAgICAgICAgcG9zaXRpb25fYXR0cmlidXRlOiBzdHJva2VfcG9zaXRpb25fYXR0cmlidXRlLFxuICAgICAgICAgICAgICAgIG5vcm1hbF9hdHRyaWJ1dGU6IHN0cm9rZV9ub3JtYWxfYXR0cmlidXRlLFxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZV91bmlmb3JtOiBzdHJva2VfdHJhbnNsYXRlX3VuaWZvcm0sXG4gICAgICAgICAgICAgICAgc2NhbGVfdW5pZm9ybTogc3Ryb2tlX3NjYWxlX3VuaWZvcm0sXG4gICAgICAgICAgICAgICAgc2NhbGUyX3VuaWZvcm06IHN0cm9rZV9zY2FsZTJfdW5pZm9ybSxcbiAgICAgICAgICAgICAgICB3aWR0aF91bmlmb3JtOiBzdHJva2Vfd2lkdGhfdW5pZm9ybSxcbiAgICAgICAgICAgICAgICBjb2xvcl91bmlmb3JtOiBzdHJva2VfY29sb3JfdW5pZm9ybSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0cmlhbmdsZXM6IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbl9idWZmZXIsIGNvbG9yX2J1ZmZlciwgaW5kZXhfYnVmZmVyLCB0ZXh0dXJlLFxuICAgICAgICAgICAgICAgIG91dGxpbmVfcG9zaXRpb25fYnVmZmVyLCBvdXRsaW5lX25vcm1hbF9idWZmZXIsXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZGVpbml0UmVzb3VyY2VzKF9sb2NhdGlvbnMsIF90cmlhbmd1bGF0ZWQpIHtcbiAgICAgICAgaWYgKHRoaXMud2ViZ2xfZGF0YT8uY29udGV4dCkge1xuICAgICAgICAgICAgY29uc3QgZ2wgPSB0aGlzLndlYmdsX2RhdGEuY29udGV4dDtcbiAgICAgICAgICAgIGdsLmRlbGV0ZVRleHR1cmUodGhpcy53ZWJnbF9kYXRhLnRyaWFuZ2xlcy50ZXh0dXJlKTtcbiAgICAgICAgICAgIGdsLmRlbGV0ZUJ1ZmZlcih0aGlzLndlYmdsX2RhdGEudHJpYW5nbGVzLnBvc2l0aW9uX2J1ZmZlcik7XG4gICAgICAgICAgICBnbC5kZWxldGVCdWZmZXIodGhpcy53ZWJnbF9kYXRhLnRyaWFuZ2xlcy5jb2xvcl9idWZmZXIpO1xuICAgICAgICAgICAgZ2wuZGVsZXRlQnVmZmVyKHRoaXMud2ViZ2xfZGF0YS50cmlhbmdsZXMuaW5kZXhfYnVmZmVyKTtcbiAgICAgICAgICAgIGdsLmRlbGV0ZUJ1ZmZlcih0aGlzLndlYmdsX2RhdGEudHJpYW5nbGVzLm91dGxpbmVfcG9zaXRpb25fYnVmZmVyKTtcbiAgICAgICAgICAgIGdsLmRlbGV0ZUJ1ZmZlcih0aGlzLndlYmdsX2RhdGEudHJpYW5nbGVzLm91dGxpbmVfbm9ybWFsX2J1ZmZlcik7XG4gICAgICAgICAgICBnbC5nZXRBdHRhY2hlZFNoYWRlcnModGhpcy53ZWJnbF9kYXRhLmZpbGxfZGF0YS5zaGFkZXJfcHJvZ3JhbSkuZm9yRWFjaChzID0+IHtcbiAgICAgICAgICAgICAgICBnbC5kZWxldGVTaGFkZXIocyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGdsLmRlbGV0ZVByb2dyYW0odGhpcy53ZWJnbF9kYXRhLmZpbGxfZGF0YS5zaGFkZXJfcHJvZ3JhbSk7XG4gICAgICAgICAgICBnbC5nZXRBdHRhY2hlZFNoYWRlcnModGhpcy53ZWJnbF9kYXRhLnN0cm9rZV9kYXRhLnNoYWRlcl9wcm9ncmFtKS5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgICAgICAgIGdsLmRlbGV0ZVNoYWRlcihzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZ2wuZGVsZXRlUHJvZ3JhbSh0aGlzLndlYmdsX2RhdGEuc3Ryb2tlX2RhdGEuc2hhZGVyX3Byb2dyYW0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyTWFwSW5Db250ZXh0KGxvY2F0aW9ucywgdHJpYW5ndWxhdGVkLCBzdGF0ZSkge1xuICAgICAgICBjb25zdCBnbCA9IHRoaXMud2ViZ2xfZGF0YS5jb250ZXh0O1xuICAgICAgICBjb25zdCBmaWxsX2RhdGEgPSB0aGlzLndlYmdsX2RhdGEuZmlsbF9kYXRhO1xuICAgICAgICBjb25zdCBzdHJva2VfZGF0YSA9IHRoaXMud2ViZ2xfZGF0YS5zdHJva2VfZGF0YTtcbiAgICAgICAgY29uc3QgdHJpYW5nbGVzID0gdGhpcy53ZWJnbF9kYXRhLnRyaWFuZ2xlcztcblxuICAgICAgICBjb25zdCBbdHJhbnNsYXRlLCBzY2FsZSwgc3Ryb2tlX3NjYWxlXSA9IHRoaXMuZ2VuZXJhdGVUcmFuc2xhdGVBbmRTY2FsZShzdGF0ZSk7XG5cbiAgICAgICAgZ2wuY2xlYXJDb2xvcigwLjAsIDAuMCwgMC4wLCAwLjApO1xuICAgICAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBsb2NhdGlvbiBjb2xvcnNcbiAgICAgICAgY29uc3QgY29sb3JzID0gbmV3IFVpbnQ4QXJyYXkobG9jYXRpb25zLmxlbmd0aCAqIDQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2F0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb2xvcnNbNCppICsgal0gPSBsb2NhdGlvbnNbaV0uY29sb3Jbal07XG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uc1tpXS5pZCA9PT0gc3RhdGUuaG92ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3JzWzQqaSArIGpdICo9IDAuODtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2xvcnNbNCppICsgM10gPSAyNTU7XG4gICAgICAgIH1cbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdHJpYW5nbGVzLnRleHR1cmUpO1xuICAgICAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIGxvY2F0aW9ucy5sZW5ndGgsIDEsIDAsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIGNvbG9ycyk7XG5cbiAgICAgICAgLy8gRHJhdyBmaWxsXG4gICAgICAgIGdsLnVzZVByb2dyYW0oZmlsbF9kYXRhLnNoYWRlcl9wcm9ncmFtKTtcbiAgICAgICAgZ2wudW5pZm9ybTJmdihmaWxsX2RhdGEudHJhbnNsYXRlX3VuaWZvcm0sIHRyYW5zbGF0ZSk7XG4gICAgICAgIGdsLnVuaWZvcm0yZnYoZmlsbF9kYXRhLnNjYWxlX3VuaWZvcm0sIHNjYWxlKTtcbiAgICAgICAgZ2wudW5pZm9ybTFpKGZpbGxfZGF0YS5jb2xvcnNfdW5pZm9ybSwgMCk7XG4gICAgICAgIFxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdHJpYW5nbGVzLnBvc2l0aW9uX2J1ZmZlcik7XG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoZmlsbF9kYXRhLnBvc2l0aW9uX2F0dHJpYnV0ZSwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoZmlsbF9kYXRhLnBvc2l0aW9uX2F0dHJpYnV0ZSk7XG5cbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRyaWFuZ2xlcy5jb2xvcl9idWZmZXIpO1xuICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGZpbGxfZGF0YS5jb2xvcl9hdHRyaWJ1dGUsIDEsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGZpbGxfZGF0YS5jb2xvcl9hdHRyaWJ1dGUpO1xuXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHRyaWFuZ2xlcy5pbmRleF9idWZmZXIpO1xuICAgICAgICBnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLCB0cmlhbmd1bGF0ZWQudHJpYW5nbGVzLmxlbmd0aCwgZ2wuVU5TSUdORURfSU5ULCAwKTtcblxuICAgICAgICAvLyBEcmF3IHN0cm9rZVxuICAgICAgICBnbC51c2VQcm9ncmFtKHN0cm9rZV9kYXRhLnNoYWRlcl9wcm9ncmFtKTtcbiAgICAgICAgZ2wudW5pZm9ybTJmdihzdHJva2VfZGF0YS50cmFuc2xhdGVfdW5pZm9ybSwgdHJhbnNsYXRlKTtcbiAgICAgICAgZ2wudW5pZm9ybTJmdihzdHJva2VfZGF0YS5zY2FsZV91bmlmb3JtLCBzY2FsZSk7XG4gICAgICAgIGdsLnVuaWZvcm0yZnYoc3Ryb2tlX2RhdGEuc2NhbGUyX3VuaWZvcm0sIHN0cm9rZV9zY2FsZSk7XG4gICAgICAgIGdsLnVuaWZvcm0xZihzdHJva2VfZGF0YS53aWR0aF91bmlmb3JtLCAwLjAwMjUpO1xuICAgICAgICBnbC51bmlmb3JtM2Z2KHN0cm9rZV9kYXRhLmNvbG9yX3VuaWZvcm0sIFswLjI3MSwgMC4zMDIsIDAuMzhdKTtcbiAgICAgICAgXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0cmlhbmdsZXMub3V0bGluZV9ub3JtYWxfYnVmZmVyKTtcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzdHJva2VfZGF0YS5ub3JtYWxfYXR0cmlidXRlLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShzdHJva2VfZGF0YS5ub3JtYWxfYXR0cmlidXRlKTtcblxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdHJpYW5nbGVzLm91dGxpbmVfcG9zaXRpb25fYnVmZmVyKTtcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzdHJva2VfZGF0YS5wb3NpdGlvbl9hdHRyaWJ1dGUsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHN0cm9rZV9kYXRhLnBvc2l0aW9uX2F0dHJpYnV0ZSk7XG5cbiAgICAgICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRVMsIDAsIHRyaWFuZ3VsYXRlZC5vdXRsaW5lX3RyaWFuZ2xlcy5sZW5ndGggLyAyKTtcbiAgICB9XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IFwiXFxuYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1xcbmF0dHJpYnV0ZSBmbG9hdCBhVmVydGV4Q29sb3I7XFxuXFxudW5pZm9ybSB2ZWMyIHVUcmFuc2xhdGU7XFxudW5pZm9ybSB2ZWMyIHVTY2FsZTtcXG51bmlmb3JtIHNhbXBsZXIyRCB1Q29sb3JzO1xcblxcbnZhcnlpbmcgdmVjMyB2UGl4ZWxDb2xvcjtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgIHZQaXhlbENvbG9yID0gdGV4dHVyZTJEKHVDb2xvcnMsIHZlYzIoYVZlcnRleENvbG9yLCAwLjUpKS54eXo7XFxuICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgoYVZlcnRleFBvc2l0aW9uICsgdVRyYW5zbGF0ZSkgKiB1U2NhbGUsIDAuMCwgMS4wKTtcXG59XFxuXFxuXCI7IiwiZXhwb3J0IGRlZmF1bHQgXCJcXG4jaWZkZWYgR0xfRVNcXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbiNlbmRpZlxcblxcbnZhcnlpbmcgdmVjMyB2UGl4ZWxDb2xvcjtcXG5cXG52b2lkIG1haW4oKSB7XFxuICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQodlBpeGVsQ29sb3IsIDEuMCk7XFxufVxcblxcblwiOyIsImV4cG9ydCBkZWZhdWx0IFwiXFxuYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIGFWZXJ0ZXhOb3JtYWw7XFxuXFxudW5pZm9ybSB2ZWMyIHVUcmFuc2xhdGU7XFxudW5pZm9ybSB2ZWMyIHVTY2FsZTtcXG51bmlmb3JtIHZlYzIgdVN0cm9rZVNjYWxlO1xcbnVuaWZvcm0gZmxvYXQgdVdpZHRoO1xcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgZ2xfUG9zaXRpb24gPSB2ZWM0KFxcbiAgICAgICAgKGFWZXJ0ZXhQb3NpdGlvbiArIHVUcmFuc2xhdGUpICogdVNjYWxlXFxuICAgICAgICArIG5vcm1hbGl6ZShhVmVydGV4Tm9ybWFsKSAqIHVXaWR0aCAqIHVTdHJva2VTY2FsZSxcXG4gICAgICAgIDAuMCwgMS4wXFxuICAgICk7XFxufVxcblxcblwiOyIsImV4cG9ydCBkZWZhdWx0IFwiXFxuI2lmZGVmIEdMX0VTXFxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG4jZW5kaWZcXG5cXG51bmlmb3JtIHZlYzMgdVN0cm9rZUNvbG9yO1xcblxcbnZvaWQgbWFpbigpIHtcXG4gICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh1U3Ryb2tlQ29sb3IsIDEuMCk7XFxufVxcblxcblwiOyIsImltcG9ydCBnZXRQcm90b3R5cGVPZiBmcm9tIFwiLi9nZXRQcm90b3R5cGVPZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3N1cGVyUHJvcEJhc2Uob2JqZWN0LCBwcm9wZXJ0eSkge1xuICB3aGlsZSAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSkge1xuICAgIG9iamVjdCA9IGdldFByb3RvdHlwZU9mKG9iamVjdCk7XG4gICAgaWYgKG9iamVjdCA9PT0gbnVsbCkgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gb2JqZWN0O1xufSIsImltcG9ydCBzdXBlclByb3BCYXNlIGZyb20gXCIuL3N1cGVyUHJvcEJhc2UuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9nZXQoKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBSZWZsZWN0LmdldCkge1xuICAgIF9nZXQgPSBSZWZsZWN0LmdldDtcbiAgfSBlbHNlIHtcbiAgICBfZ2V0ID0gZnVuY3Rpb24gX2dldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlcikge1xuICAgICAgdmFyIGJhc2UgPSBzdXBlclByb3BCYXNlKHRhcmdldCwgcHJvcGVydHkpO1xuICAgICAgaWYgKCFiYXNlKSByZXR1cm47XG4gICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYmFzZSwgcHJvcGVydHkpO1xuXG4gICAgICBpZiAoZGVzYy5nZXQpIHtcbiAgICAgICAgcmV0dXJuIGRlc2MuZ2V0LmNhbGwoYXJndW1lbnRzLmxlbmd0aCA8IDMgPyB0YXJnZXQgOiByZWNlaXZlcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkZXNjLnZhbHVlO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gX2dldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufSIsImltcG9ydCBhcnJheVdpdGhIb2xlcyBmcm9tIFwiLi9hcnJheVdpdGhIb2xlcy5qc1wiO1xuaW1wb3J0IGl0ZXJhYmxlVG9BcnJheUxpbWl0IGZyb20gXCIuL2l0ZXJhYmxlVG9BcnJheUxpbWl0LmpzXCI7XG5pbXBvcnQgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkgZnJvbSBcIi4vdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkuanNcIjtcbmltcG9ydCBub25JdGVyYWJsZVJlc3QgZnJvbSBcIi4vbm9uSXRlcmFibGVSZXN0LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHtcbiAgcmV0dXJuIGFycmF5V2l0aEhvbGVzKGFycikgfHwgaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IG5vbkl0ZXJhYmxlUmVzdCgpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7XG4gIHZhciBfaSA9IGFyciA9PSBudWxsID8gbnVsbCA6IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgYXJyW1N5bWJvbC5pdGVyYXRvcl0gfHwgYXJyW1wiQEBpdGVyYXRvclwiXTtcblxuICBpZiAoX2kgPT0gbnVsbCkgcmV0dXJuO1xuICB2YXIgX2FyciA9IFtdO1xuICB2YXIgX24gPSB0cnVlO1xuICB2YXIgX2QgPSBmYWxzZTtcblxuICB2YXIgX3MsIF9lO1xuXG4gIHRyeSB7XG4gICAgZm9yIChfaSA9IF9pLmNhbGwoYXJyKTsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkge1xuICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTtcblxuICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2QgPSB0cnVlO1xuICAgIF9lID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdICE9IG51bGwpIF9pW1wicmV0dXJuXCJdKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZCkgdGhyb3cgX2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIF9hcnI7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn0iXSwibmFtZXMiOlsiTWFwQmFja2VuZFdlYkdsIiwicmVuZGVyZXIiLCJuZXdSZW5kZXJlciIsInN0YXRlIiwiY2VudGVyIiwic2NhbGUiLCJtaW4iLCJtYXgiLCJzaXplIiwiaG92ZXIiLCJXZWJHTFJlbmRlcmVyIiwidGhpcyIsImNsaWVudF9wb3MiLCJtYXBfcG9zIiwic2hhZG93Um9vdCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xpZW50UG9zVG9NYXBQb3MiLCJjbGllbnRQb3NUb1Byb2pQb3MiLCJsb2NhdGlvbl9wb3MiLCJwcm9qUG9zVG9DbGllbnRQb3MiLCJldmVudCIsInBvcyIsImNsaWVudFgiLCJjbGllbnRZIiwiaW50ZXIiLCJ0cmlhbmd1bGF0ZWQiLCJnZXRfaW50ZXJzZWN0aW9uIiwicHJvamVjdCIsImxvYyIsImxvY2F0aW9ucyIsInBvbHlnb24iLCJyYXciLCJnZXRfcHJval9wb2x5Z29uIiwiZ2V0X3BvbHlnb24iLCJpZCIsIm15X2V2ZW50IiwiRXZlbnQiLCJsb2NhdGlvbiIsInBvc2l0aW9uIiwiZGlzcGF0Y2hFdmVudCIsImhhbmRsZU1vdXNlT3V0IiwidG91Y2hlcyIsImxlbmd0aCIsImhhbmRsZU1vdXNlTW92ZSIsImxhc3QiLCJyZW5kZXJNYXBJbkNvbnRleHQiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyZW5kZXJNYXBJbkNhbnZhcyIsImJpbmQiLCJjYW52YXMiLCJsYXN0X2NhbnZhcyIsImRlaW5pdFJlc291cmNlcyIsImdsIiwiZ2V0Q29udGV4dCIsImhhbmRsZVJlc2l6ZSIsIndpZHRoIiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJ2aWV3cG9ydCIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbml0Rm9yQ29udGV4dCIsIlRyaWFuZ3VsYXRlZERhdGEiLCJhZGRfbG9jYXRpb24iLCJ0cmlhbmd1bGF0ZSIsImdlbmVyYXRlX291dGxpbmVzIiwiYnVpbGRSZW5kZXJEYXRhIiwiaHRtbCIsImhhbmRsZVRvdWNoU3RhcnQiLCJhdHRyaWJ1dGUiLCJjc3MiLCJMaXRFbGVtZW50IiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJNYXBCYWNrZW5kV2ViR2wzZCIsIldlYkdMUmVuZGVyZXIzZCIsImdlbmVyYXRlU2NhbGUiLCJ4IiwieSIsImRpc3QiLCJNYXRoIiwic3FydCIsImNsaWVudFBvc1RvU3BoZXJlUG9zIiwibWF0M1ZlY011bCIsImdlbmVyYXRlVHJhbnNmb3JtIiwiYXRhbjIiLCJhIiwiUEkiLCJmbG9vciIsImNvb3JkIiwicHJvaiIsImNsaWVudFBvc1RvU29tZVBvcyIsIm5vcm1hbGl6ZUFyb3VuZCIsIm5vcm1hbGl6ZVBvc2l0aW9uIiwicHJval9wb3MiLCJjb3MiLCJzaW4iLCJnZW5lcmF0ZUludmVyc2VUcmFuc2Zvcm0iLCJ6b29tX3NjYWxlIiwiYiIsInJlcyIsImkiLCJqIiwiayIsInYiLCJheGlzIiwiYW5nbGUiLCJtYXQzTXVsIiwibWF0M1JvdGF0aW9uIiwiYmV0YSIsImdhbW1hIiwiYWJzIiwic2NyZWVuX3NjYWxlIiwic2l6ZV94Iiwic2l6ZV95IiwidGV4dHVyZSIsImNyZWF0ZVRleHR1cmUiLCJiaW5kVGV4dHVyZSIsIlRFWFRVUkVfMkQiLCJ0ZXhJbWFnZTJEIiwiUkdCQSIsIlVOU0lHTkVEX0JZVEUiLCJ0ZXhQYXJhbWV0ZXJpIiwiVEVYVFVSRV9NSU5fRklMVEVSIiwiTElORUFSIiwiVEVYVFVSRV9XUkFQX1MiLCJDTEFNUF9UT19FREdFIiwiVEVYVFVSRV9XUkFQX1QiLCJlYXJ0aF9zaGFkZXJfcHJvZ3JhbSIsImNyZWF0ZVNoYWRlclByb2dyYW0iLCJlYXJ0aF9wb3NpdGlvbl9hdHRyaWJ1dGUiLCJnZXRBdHRyaWJMb2NhdGlvbiIsImVhcnRoX3NjYWxlX3VuaWZvcm0iLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJlYXJ0aF9zY2FsZTJfdW5pZm9ybSIsImVhcnRoX3NhbXBsZXJfdW5pZm9ybSIsImVhcnRoX3RleG1pbl91bmlmb3JtIiwiZWFydGhfdGV4bWF4X3VuaWZvcm0iLCJlYXJ0aF90cmFuc2Zvcm1fdW5pZm9ybSIsImVhcnRoX3ZlcnRpY2VzIiwiRmxvYXQzMkFycmF5IiwiZWFydGhfdHJpYW5nbGVzIiwiVWludDE2QXJyYXkiLCJlYXJ0aF9wb3NpdGlvbl9idWZmZXIiLCJjcmVhdGVCdWZmZXIiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIlNUQVRJQ19EUkFXIiwiZWFydGhfaW5kZXhfYnVmZmVyIiwiRUxFTUVOVF9BUlJBWV9CVUZGRVIiLCJ3ZWJnbF9kYXRhIiwiZWFydGhfZGF0YSIsInNoYWRlcl9wcm9ncmFtIiwicG9zaXRpb25fYXR0cmlidXRlIiwic2NhbGVfdW5pZm9ybSIsInNjYWxlMl91bmlmb3JtIiwic2FtcGxlcl91bmlmb3JtIiwidGV4bWluX3VuaWZvcm0iLCJ0ZXhtYXhfdW5pZm9ybSIsInRyYW5zZm9ybV91bmlmb3JtIiwidmVydGljZXMiLCJ0cmlhbmdsZXMiLCJnbF9wb3NpdGlvbl9idWZmZXIiLCJnbF9pbmRleF9idWZmZXIiLCJjb250ZXh0IiwiZGVsZXRlVGV4dHVyZSIsImRlbGV0ZUJ1ZmZlciIsImdldEF0dGFjaGVkU2hhZGVycyIsImZvckVhY2giLCJzIiwiZGVsZXRlU2hhZGVyIiwiZGVsZXRlUHJvZ3JhbSIsImZpbGxfZGF0YSIsInN0cm9rZV9kYXRhIiwiZmIiLCJjcmVhdGVGcmFtZWJ1ZmZlciIsImJpbmRGcmFtZWJ1ZmZlciIsIkZSQU1FQlVGRkVSIiwiYXR0YWNobWVudCIsIkNPTE9SX0FUVEFDSE1FTlQwIiwiZnJhbWVidWZmZXJUZXh0dXJlMkQiLCJ0cmFuc2xhdGUiLCJzdHJva2Vfc2NhbGUiLCJjYnJ0IiwiY2xlYXJDb2xvciIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsImNvbG9ycyIsIlVpbnQ4QXJyYXkiLCJjb2xvciIsInVzZVByb2dyYW0iLCJ1bmlmb3JtMmZ2IiwidW5pZm9ybTFpIiwiY29sb3JzX3VuaWZvcm0iLCJwb3NpdGlvbl9idWZmZXIiLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsImNvbG9yX2J1ZmZlciIsImNvbG9yX2F0dHJpYnV0ZSIsImluZGV4X2J1ZmZlciIsInRyYW5zbGF0ZV91bmlmb3JtIiwiZHJhd0VsZW1lbnRzIiwiVFJJQU5HTEVTIiwiVU5TSUdORURfSU5UIiwidW5pZm9ybTFmIiwid2lkdGhfdW5pZm9ybSIsInVuaWZvcm0zZnYiLCJjb2xvcl91bmlmb3JtIiwib3V0bGluZV9ub3JtYWxfYnVmZmVyIiwibm9ybWFsX2F0dHJpYnV0ZSIsIm91dGxpbmVfcG9zaXRpb25fYnVmZmVyIiwiZHJhd0FycmF5cyIsIm91dGxpbmVfdHJpYW5nbGVzIiwiZ2VuZXJhdGVUZXhNaW5NYXgiLCJyZW5kZXJUb1RleHR1cmUiLCJjbGVhckRlcHRoIiwidW5pZm9ybTFmdiIsInVuaWZvcm1NYXRyaXgzZnYiLCJVTlNJR05FRF9TSE9SVCIsImdlbmVyYXRlVHJhbnNsYXRlQW5kU2NhbGUiLCJjbGllbnRfcG9zX25vcm0iLCJ0cmFuc2Zvcm0iLCJ2ZXJ0ZXhfc2hhZGVyX3NvdXJjZSIsImZyYWdtZW50X3NoYWRlcl9zb3VyY2UiLCJ2ZXJ0ZXhfc2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwiVkVSVEVYX1NIQURFUiIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJmcmFnbWVudF9zaGFkZXIiLCJGUkFHTUVOVF9TSEFERVIiLCJjcmVhdGVQcm9ncmFtIiwiYXR0YWNoU2hhZGVyIiwibGlua1Byb2dyYW0iLCJnZXRFeHRlbnNpb24iLCJmaWxsX3NoYWRlcl9wcm9ncmFtIiwiZmlsbF9wb3NpdGlvbl9hdHRyaWJ1dGUiLCJmaWxsX2NvbG9yX2F0dHJpYnV0ZSIsImZpbGxfdHJhbnNsYXRlX3VuaWZvcm0iLCJmaWxsX3NjYWxlX3VuaWZvcm0iLCJmaWxsX2NvbG9yc191bmlmb3JtIiwic3Ryb2tlX3NoYWRlcl9wcm9ncmFtIiwic3Ryb2tlX3Bvc2l0aW9uX2F0dHJpYnV0ZSIsInN0cm9rZV9ub3JtYWxfYXR0cmlidXRlIiwic3Ryb2tlX3RyYW5zbGF0ZV91bmlmb3JtIiwic3Ryb2tlX3NjYWxlX3VuaWZvcm0iLCJzdHJva2Vfc2NhbGUyX3VuaWZvcm0iLCJzdHJva2Vfd2lkdGhfdW5pZm9ybSIsInN0cm9rZV9jb2xvcl91bmlmb3JtIiwiVEVYVFVSRV9NQUdfRklMVEVSIiwiTkVBUkVTVCIsInZlcnRleCIsIm91dGxpbmVfbm9ybWFscyIsIl9sb2NhdGlvbnMiLCJfdHJpYW5ndWxhdGVkIiwiX3N1cGVyUHJvcEJhc2UiLCJvYmplY3QiLCJwcm9wZXJ0eSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImdldFByb3RvdHlwZU9mIiwiX2dldCIsIlJlZmxlY3QiLCJnZXQiLCJ0YXJnZXQiLCJyZWNlaXZlciIsImJhc2UiLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiYXJndW1lbnRzIiwidmFsdWUiLCJhcHBseSIsIl9zbGljZWRUb0FycmF5IiwiYXJyIiwiQXJyYXkiLCJpc0FycmF5IiwiX2kiLCJTeW1ib2wiLCJpdGVyYXRvciIsIl9zIiwiX2UiLCJfYXJyIiwiX24iLCJfZCIsIm5leHQiLCJkb25lIiwicHVzaCIsImVyciIsInVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwiVHlwZUVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==