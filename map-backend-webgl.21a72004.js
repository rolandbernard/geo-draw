(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{48:function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,u,l,s,c,v,x,y=e&&e.length,d=y?e[0]*n:t.length,p=i(t,0,d,n,!0),_=[];if(!p||p.next===p.prev)return _;if(y&&(p=function(t,e,n,r){var a,u,l,s,c,v=[];for(a=0,u=e.length;a<u;a++)l=e[a]*r,s=a<u-1?e[a+1]*r:t.length,(c=i(t,l,s,r,!1))===c.next&&(c.steiner=!0),v.push(m(c));for(v.sort(f),a=0;a<v.length;a++)h(v[a],n),n=o(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=l=t[0],u=s=t[1];for(var g=n;g<d;g+=n)(c=t[g])<r&&(r=c),(v=t[g+1])<u&&(u=v),c>l&&(l=c),v>s&&(s=v);x=0!==(x=Math.max(l-r,s-u))?1/x:0}return a(p,_,n,r,u,x),_}function i(t,e,n,r,i){var o,a;if(i===T(t,e,n,r)>0)for(o=e;o<n;o+=r)a=S(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=S(o,t[o],t[o+1],a);return a&&_(a,a.next)&&(z(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!_(r,r.next)&&0!==p(r.prev,r,r.next))r=r.next;else{if(z(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,f,h){if(t){!h&&f&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=x(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,u,l,s=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,u=0,e=0;e<s&&(u++,r=r.nextZ);e++);for(l=s;u>0||l>0&&r;)0!==u&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,s*=2}while(a>1)}(i)}(t,r,i,f);for(var v,m,y=t;t.prev!==t.next;)if(v=t.prev,m=t.next,f?l(t,r,i,f):u(t))e.push(v.i/n),e.push(t.i/n),e.push(m.i/n),z(t),t=m.next,y=m.next;else if((t=m)===y){h?1===h?a(t=s(o(t),e,n),e,n,r,i,f,2):2===h&&c(t,e,n,r,i,f):a(o(t),e,n,r,i,f,1);break}}}function u(t){var e=t.prev,n=t,r=t.next;if(p(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(y(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&p(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function l(t,e,n,r){var i=t.prev,o=t,a=t.next;if(p(i,o,a)>=0)return!1;for(var u=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=x(u,l,e,n,r),h=x(s,c,e,n,r),v=t.prevZ,m=t.nextZ;v&&v.z>=f&&m&&m.z<=h;){if(v!==t.prev&&v!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,v.x,v.y)&&p(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,m!==t.prev&&m!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,m.x,m.y)&&p(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;v&&v.z>=f;){if(v!==t.prev&&v!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,v.x,v.y)&&p(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;m&&m.z<=h;){if(m!==t.prev&&m!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,m.x,m.y)&&p(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function s(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!_(i,a)&&g(i,r,r.next,a)&&R(i,a)&&R(a,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(a.i/n),z(r),z(r.next),r=t=a),r=r.next}while(r!==t);return o(r)}function c(t,e,n,r,i,u){var l=t;do{for(var s=l.next.next;s!==l.prev;){if(l.i!==s.i&&d(l,s)){var c=w(l,s);return l=o(l,l.next),c=o(c,c.next),a(l,e,n,r,i,u),void a(c,e,n,r,i,u)}s=s.next}l=l.next}while(l!==t)}function f(t,e){return t.x-e.x}function h(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var u=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(u<=i&&u>a){if(a=u,u===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var l,s=n,c=n.x,f=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&y(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),R(r,t)&&(l<h||l===h&&(r.x>n.x||r.x===n.x&&v(n,r)))&&(n=r,h=l)),r=r.next}while(r!==s);return n}(t,e)){var n=w(e,t);o(e,e.next),o(n,n.next)}}function v(t,e){return p(t.prev,t,e.prev)<0&&p(e.next,t,t.next)<0}function x(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function m(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,r,i,o,a,u){return(i-a)*(e-u)-(t-a)*(o-u)>=0&&(t-a)*(r-u)-(n-a)*(e-u)>=0&&(n-a)*(o-u)-(i-a)*(r-u)>=0}function d(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&g(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(R(t,e)&&R(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(p(t.prev,t,e.prev)||p(t,e.prev,e))||_(t,e)&&p(t.prev,t,t.next)>0&&p(e.prev,e,e.next)>0)}function p(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function g(t,e,n,r){var i=A(p(t,e,n)),o=A(p(t,e,r)),a=A(p(n,r,t)),u=A(p(n,r,e));return i!==o&&a!==u||(!(0!==i||!b(t,n,e))||(!(0!==o||!b(t,r,e))||(!(0!==a||!b(n,t,r))||!(0!==u||!b(n,e,r)))))}function b(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function R(t,e){return p(t.prev,t,t.next)<0?p(t,e,t.next)>=0&&p(t,t.prev,e)>=0:p(t,e,t.prev)<0||p(t,t.next,e)<0}function w(t,e){var n=new E(t.i,t.x,t.y),r=new E(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function S(t,e,n,r){var i=new E(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function z(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function E(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=r,t.exports.default=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(T(t,0,o,n));if(i)for(var u=0,l=e.length;u<l;u++){var s=e[u]*n,c=u<l-1?e[u+1]*n:t.length;a-=Math.abs(T(t,s,c,n))}var f=0;for(u=0;u<r.length;u+=3){var h=r[u]*n,v=r[u+1]*n,x=r[u+2]*n;f+=Math.abs((t[h]-t[x])*(t[v+1]-t[h+1])-(t[h]-t[v])*(t[x+1]-t[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},50:function(t,e,n){"use strict";n.r(e);var r=n(21),i=n.n(r),o=n(10),a=n.n(o),u=n(12),l=n.n(u),s=n(13),c=n.n(s),f=n(18),h=n.n(f),v=n(19),x=n.n(v),m=n(17),y=n.n(m),d=n(11),p=n(48),_=n.n(p);n(29);function g(){var t=a()(['\n            <canvas\n                id="map"\n                @mousemove="','"\n                @wheel="','"\n                @mouseout="','"\n                @touchstart="','"\n                @touchmove="','"\n            >\n            </canvas>\n        ']);return g=function(){return t},t}function b(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function R(){var t=a()(["\n            :host {\n                width: 100%;\n                height: 100%;\n                position: relative;\n                display: block;\n            }\n            #map {\n                width: 100%;\n                height: 100%;\n                max-width: 100%;\n                max-height: 100%;\n                display: block;\n                position: absolute;\n            }\n        "]);return R=function(){return t},t}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y()(t);if(e){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var S={},z=function(t){h()(n,t);var e=w(n);function n(){var t;return l()(this,n),(t=e.call(this)).zoom_scale=1,t.zoom_center=[0,0],t.min=[0,0],t.max=[0,0],t.current_hover=null,t}return c()(n,null,[{key:"properties",get:function(){return{locations:{type:Array}}}},{key:"styles",get:function(){return Object(d.b)(R())}}]),c()(n,[{key:"setCenterAndScale",value:function(t,e){this.zoom_center=t,this.zoom_scale=e}},{key:"clientPosToMapPos",value:function(t){var e=this.shadowRoot.getElementById("map").getBoundingClientRect(),n=this.generateTranslateAndScale(),r=i()(n,2),o=(r[0],r[1]),a=[2*(t[0]-e.x)/e.width-1,1-2*(t[1]-e.y)/e.height];return[a[0]/o[0]+this.zoom_center[0],a[1]/o[1]+this.zoom_center[1]]}},{key:"clientPosToLocationPos",value:function(t){var e=this.shadowRoot.getElementById("map").getBoundingClientRect(),n=this.generateTranslateAndScale(),r=i()(n,2),o=r[0],a=r[1],u=[2*(t[0]-e.x)/e.width-1,1-2*(t[1]-e.y)/e.height];return[u[0]/a[0]-o[0],u[1]/a[1]-o[1]]}},{key:"locationPosToClientPos",value:function(t){var e=this.shadowRoot.getElementById("map").getBoundingClientRect(),n=this.generateTranslateAndScale(),r=i()(n,2),o=r[0],a=r[1],u=[(t[0]+o[0])*a[0],(t[1]+o[1])*a[1]];return[(u[0]+1)/2*e.width+e.x,(1-u[1])/2*e.height+e.y]}},{key:"handleMouseMove",value:function(t){var e,n=this.clientPosToLocationPos([t.clientX,t.clientY]),r=b(this.locations);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.min[0]<=n[0]&&i.min[1]<=n[1]&&i.max[0]>=n[0]&&i.max[1]>=n[1]){var o,a=b(S[i.id].polygons);try{for(a.s();!(o=a.n()).done;){var u=o.value;if(u.min[0]<=n[0]&&u.min[1]<=n[1]&&u.max[0]>=n[0]&&u.max[1]>=n[1])for(var l=0;l<u.triangles.length;l+=3){var s=[u.vertices[2*u.triangles[l]],u.vertices[2*u.triangles[l]+1]],c=[u.vertices[2*u.triangles[l+1]],u.vertices[2*u.triangles[l+1]+1]],f=[u.vertices[2*u.triangles[l+2]],u.vertices[2*u.triangles[l+2]+1]];function h(t,e,n){return(t[0]-n[0])*(e[1]-n[1])-(e[0]-n[0])*(t[1]-n[1])}var v=h(n,s,c),x=h(n,c,f),m=h(n,f,s);if(!(v<0||x<0||m<0)||!(v>0||x>0||m>0)){this.current_hover=i.id;var y=new Event("hover");return y.location=i,y.position=this.locationPosToClientPos([(u.min[0]+u.max[0])/2,(u.min[1]+u.max[1])/2]),void this.dispatchEvent(y)}}}}catch(t){a.e(t)}finally{a.f()}}}}catch(t){r.e(t)}finally{r.f()}this.handleMouseOut()}},{key:"handleMouseOut",value:function(){this.current_hover=null;var t=new Event("hover");t.location=null,t.position=null,this.dispatchEvent(t)}},{key:"handleTouchStart",value:function(t){1===t.touches.length?this.handleMouseMove({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}):this.handleMouseOut(t)}},{key:"generateTranslateAndScale",value:function(){var t=this.max[0]-this.min[0],e=this.max[1]-this.min[1];return t/this.current_size[0]>e/this.current_size[1]?[[-this.min[0]-t/2-this.zoom_center[0],-this.min[1]-e/2-this.zoom_center[1]],[2/t*this.zoom_scale,this.current_size[0]/this.current_size[1]*-2/t*this.zoom_scale],[1,-this.current_size[0]/this.current_size[1]]]:[[-this.min[0]-t/2-this.zoom_center[0],-this.min[1]-e/2-this.zoom_center[1]],[this.current_size[1]/this.current_size[0]*2/e*this.zoom_scale,-2/e*this.zoom_scale],[this.current_size[1]/this.current_size[0],-1]]}},{key:"renderMapInCanvas",value:function(){if(this.last_center!=this.zoom_center||this.last_scale!=this.zoom_scale||this.last_hover!=this.current_hover||this.last_size!=this.current_size){var t=this.webgl_data.context,e=this.webgl_data.fill_data,n=this.webgl_data.stroke_data,r=this.generateTranslateAndScale(),o=i()(r,3),a=o[0],u=o[1],l=o[2];t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT);var s,c=b(this.locations);try{for(c.s();!(s=c.n()).done;){var f=s.value,h=S[f.id];t.useProgram(n.shader_program),t.uniform2fv(n.translate_uniform,a),t.uniform2fv(n.scale_uniform,u),t.uniform2fv(n.scale2_uniform,l),t.uniform1f(n.width_uniform,.005),t.uniform3fv(n.color_uniform,[.271,.302,.38]);var v,x=b(h.polygons);try{for(x.s();!(v=x.n()).done;){var m=v.value;t.bindBuffer(t.ARRAY_BUFFER,m.gl_outline_position_buffer),t.vertexAttribPointer(n.position_attribute,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n.position_attribute),t.bindBuffer(t.ARRAY_BUFFER,m.gl_outline_normal_buffer),t.vertexAttribPointer(n.normal_attribute,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n.normal_attribute);var y,d=0,p=b(m.coords);try{for(p.s();!(y=p.n()).done;){var _=y.value;t.drawArrays(t.TRIANGLE_STRIP,4*d,4*(_.length+1)),d+=_.length+1}}catch(t){p.e(t)}finally{p.f()}}}catch(t){x.e(t)}finally{x.f()}t.useProgram(e.shader_program),t.uniform2fv(e.translate_uniform,a),t.uniform2fv(e.scale_uniform,u),f.id===this.current_hover?t.uniform3fv(e.color_uniform,f.color.map((function(t){return.8*t}))):t.uniform3fv(e.color_uniform,f.color);var g,A=b(h.polygons);try{for(A.s();!(g=A.n()).done;){var R=g.value;t.bindBuffer(t.ARRAY_BUFFER,R.gl_position_buffer),t.vertexAttribPointer(e.position_attribute,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(e.position_attribute),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,R.gl_index_buffer),t.drawElements(t.TRIANGLES,R.triangles.length,t.UNSIGNED_SHORT,0)}}catch(t){A.e(t)}finally{A.f()}}}catch(t){c.e(t)}finally{c.f()}this.last_center=this.zoom_center,this.last_scale=this.zoom_scale,this.last_hover=this.current_hover,this.last_size=this.current_size}window.requestAnimationFrame(this.renderMapInCanvas.bind(this))}},{key:"firstUpdated",value:function(){var t=this,e=this.shadowRoot.getElementById("map");this.current_size=[e.width,e.height];var n=e.getContext("webgl")||e.getContext("experimental-webgl");function r(t,e){var r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,t),n.compileShader(r);var i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(i,e),n.compileShader(i);var o=n.createProgram();return n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),o}var i,o=r("\nattribute vec2 aVertexPosition;\n\nuniform vec2 uTranslate;\nuniform vec2 uScale;\n\nvoid main() {\n    gl_Position = vec4((aVertexPosition + uTranslate) * uScale, 0.0, 1.0);\n}\n","\n#ifdef GL_ES\n    precision highp float;\n#endif\n    \nuniform vec3 uFillColor;\n\nvoid main() {\n    gl_FragColor = vec4(uFillColor, 1.0);\n}\n"),a=n.getAttribLocation(o,"aVertexPosition"),u=n.getUniformLocation(o,"uTranslate"),l=n.getUniformLocation(o,"uScale"),s=n.getUniformLocation(o,"uFillColor"),c=r("\nattribute vec2 aVertexPosition;\nattribute vec2 aVertexNormal;\n\nuniform vec2 uTranslate;\nuniform vec2 uScale;\nuniform vec2 uStrokeScale;\nuniform float uWidth;\n\nvoid main() {\n    gl_Position = vec4(\n        (aVertexPosition + uTranslate) * uScale + normalize(aVertexNormal) * uWidth * uStrokeScale,\n        0.0, 1.0);\n}\n","\n#ifdef GL_ES\n    precision highp float;\n#endif\n    \nuniform vec3 uStrokeColor;\n\nvoid main() {\n    gl_FragColor = vec4(uStrokeColor, 1.0);\n}\n    "),f=n.getAttribLocation(c,"aVertexPosition"),h=n.getAttribLocation(c,"aVertexNormal"),v=n.getUniformLocation(c,"uTranslate"),x=n.getUniformLocation(c,"uScale"),m=n.getUniformLocation(c,"uStrokeScale"),y=n.getUniformLocation(c,"uWidth"),d=n.getUniformLocation(c,"uStrokeColor"),p=b(this.locations);try{for(p.s();!(i=p.n()).done;){var _,g=i.value,A=b(S[g.id].polygons);try{for(A.s();!(_=A.n()).done;){var R=_.value,w=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,w),n.bufferData(n.ARRAY_BUFFER,new Float32Array(R.vertices),n.STATIC_DRAW);var z=n.createBuffer();n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,z),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(R.triangles),n.STATIC_DRAW);var E=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,E),n.bufferData(n.ARRAY_BUFFER,new Float32Array(R.outline_vertices),n.STATIC_DRAW);var T=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,T),n.bufferData(n.ARRAY_BUFFER,new Float32Array(R.outline_normals),n.STATIC_DRAW),R.gl_position_buffer=w,R.gl_index_buffer=z,R.gl_outline_position_buffer=E,R.gl_outline_normal_buffer=T}}catch(t){A.e(t)}finally{A.f()}}}catch(t){p.e(t)}finally{p.f()}var F=function(){e.width=e.clientWidth,e.height=e.clientHeight,n.viewport(0,0,e.width,e.height),t.current_size=[e.width,e.height]};window.addEventListener("resize",F),F(),this.webgl_data={canvas:e,context:n,fill_data:{shader_program:o,position_attribute:a,translate_uniform:u,scale_uniform:l,color_uniform:s},stroke_data:{shader_program:c,position_attribute:f,normal_attribute:h,translate_uniform:v,scale_uniform:x,scale2_uniform:m,width_uniform:y,color_uniform:d}},this.renderMapInCanvas()}},{key:"render",value:function(){var t=this.locations.filter((function(t){return t})).map((function(t){return t.min})).reduce((function(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]})),e=this.locations.filter((function(t){return t})).map((function(t){return t.max})).reduce((function(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}));return this.min=t,this.max=e,this.locations.forEach((function(t){t.color=t.color.map((function(t){return t/255})),t&&!S[t.id]&&(S[t.id]={polygons:t.coords.map((function(t){var e=_.a.flatten(t),n=_()(e.vertices,e.holes,e.dimensions);return{coords:t,vertices:e.vertices,triangles:n,outline_vertices:t.map((function(t){return t.reduce((function(t,e){return t.concat([e,e,e,e])}),[]).concat([t[0],t[0],t[0],t[0]])})).flat(3),outline_normals:t.map((function(t){return t.reduce((function(e,n,r){var i=t[(t.length+r-1)%t.length],o=[n[0]-i[0],n[1]-i[1]],a=t[(r+1)%t.length],u=[a[0]-n[0],a[1]-n[1]];return e.concat([[o[1],-o[0]],[-o[1],o[0]],[u[1],-u[0]],[-u[1],u[0]]])}),[]).concat((e=t[0],n=t[t.length-1],r=[e[0]-n[0],e[1]-n[1]],i=t[1],o=[i[0]-e[0],i[1]-e[1]],[[r[1],-r[0]],[-r[1],r[0]],[o[1],-o[0]],[-o[1],o[0]]]));var e,n,r,i,o})).flat(3),min:t.flat().reduce((function(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]})),max:t.flat().reduce((function(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}))}}))})})),Object(d.c)(g(),this.handleMouseMove,this.handleMouseMove,this.handleMouseOut,this.handleTouchStart,this.handleTouchStart)}},{key:"center",get:function(){return this.zoom_center}},{key:"scale",get:function(){return this.zoom_scale}}]),n}(d.a);customElements.define("map-backend",z)}}]);