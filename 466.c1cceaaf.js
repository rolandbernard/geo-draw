"use strict";(self.webpackChunkgeo_draw=self.webpackChunkgeo_draw||[]).push([[466],{466:(n,e,t)=>{t.d(e,{Z:()=>X});var o,r,a,i,l,s,c,d,u,h,p,f,m,v,g,y,b,x,w=t(885),k=t(861),M=t(168),Z=t(942),P=t(671),_=t(144),C=t(340),D=t(215),R=t(120),E=t(757),O=t.n(E),B=t(392),I=t(959),j=t(458),S=t(845),T=(t(129),t(293));function Y(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function L(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(t),!0).forEach((function(e){(0,Z.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}(0,T.C)()?Promise.all([t.e(9),t.e(238)]).then(t.bind(t,964)):t.e(968).then(t.bind(t,971));var A={},X=function(n){(0,C.Z)(E,n);var e,t,Z=(e=E,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,o=(0,R.Z)(e);if(t){var r=(0,R.Z)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return(0,D.Z)(this,n)});function E(){var n;return(0,P.Z)(this,E),(n=Z.call(this)).render3d=!1,n.details=!0,n}return(0,_.Z)(E,[{key:"handleLocationHover",value:function(n){if(this.details){var e=this.shadowRoot.getElementById("info-box-wrapper");if(n.location&&n.position){var t=this.shadowRoot.getElementById("info-box-name"),o=this.shadowRoot.getElementById("map-wrapper");t.innerText=n.location.name.split(",")[0],Array.from(e.getElementsByClassName("info-field-value")).forEach((function(e,t){e.innerText=(Math.round(100*n.location.data[t])/100).toLocaleString()}));var r=o.getBoundingClientRect(),a=n.position[0]-r.x,i=n.position[1]-r.y,l=Math.min(Math.max(l,0),r.height);e.style.setProperty("--anchor-point",a/r.width*90+5+"%"),e.style.setProperty("--anchor-at-bottom",l>1.2*(e.clientHeight+12)?1:0),e.style.left=a+"px",e.style.top=i+"px",e.classList.add("visible");var s=e.getBoundingClientRect();s.x<4?(a=Math.max(a,8.5),i=Math.min(Math.max(i,.1*s.height),r.height-.1*s.height),e.style.setProperty("--anchor-point","0%"),e.style.setProperty("--anchor-at-bottom",i/r.height*.8+.1)):s.x+s.width+4>r.x+r.width?(a=Math.min(a,r.width-8.5),i=Math.min(Math.max(i,.1*s.height),r.height-.1*s.height),e.style.setProperty("--anchor-point","100%"),e.style.setProperty("--anchor-at-bottom",i/r.height*.8+.1)):(i=Math.min(Math.max(i,0),r.height),e.style.setProperty("--anchor-point",a/r.width*90+5+"%"),e.style.setProperty("--anchor-at-bottom",i>1.2*(s.height+12)?1:0)),e.style.left=a+"px",e.style.top=i+"px",e.current_location=location}else{var c=this.shadowRoot.getElementById("info-box-wrapper");c.classList.remove("visible"),c.current_location=null}}}},{key:"handleScroll",value:function(n){n.preventDefault();var e=this.shadowRoot.getElementById("map-backend"),t=e.scale;n.deltaY<0?t*=(0,T.U)(n.deltaY,0,-10,1.1,1.5):t*=(0,T.U)(n.deltaY,0,10,.6,.9);var o=(t=Math.min(Math.max(.5,t),30))/e.scale,r=e.center,a=e.clientPosToMapPos([n.clientX,n.clientY]),i=[(a[0]-r[0])*(1-1/o),(a[1]-r[1])*(1-1/o)],l=[r[0]+i[0],r[1]+i[1]];e.setCenterAndScale(l,t)}},{key:"handleDragStart",value:function(n){n.preventDefault();var e=this.shadowRoot.getElementById("map-wrapper");this.last_drag_pos=[n.clientX,n.clientY],e.onmouseup=this.handleDragEnd.bind(this),e.onmouseleave=this.handleDragEnd.bind(this),e.onmousemove=this.handleDragMove.bind(this),e.style.cursor="grabbing"}},{key:"handleDragMove",value:function(n){n.preventDefault();var e=this.shadowRoot.getElementById("map-backend"),t=e.clientPosToMapPos(this.last_drag_pos);this.last_drag_pos=[n.clientX,n.clientY];var o=e.clientPosToMapPos([n.clientX,n.clientY]),r=[o[0]-t[0],o[1]-t[1]],a=[e.center[0]-r[0],e.center[1]-r[1]];e.setCenterAndScale(a,e.scale)}},{key:"handleDragEnd",value:function(n){n.preventDefault();var e=this.shadowRoot.getElementById("map-wrapper");e.onmouseup=null,e.onmouseleave=null,e.onmousemove=null,e.style.cursor=null}},{key:"handleTouchStart",value:function(n){if(n.preventDefault(),(2==n.touches.length||1==n.touches.length)&&(this.avg_touch_pos=Array.from(n.touches).map((function(n){return[n.clientX,n.clientY]})).reduce((function(n,e){return[n[0]+e[0],n[1]+e[1]]})).map((function(e){return e/n.touches.length})),2==n.touches.length)){var e=[[n.touches[0].clientX,n.touches[0].clientY],[n.touches[1].clientX,n.touches[1].clientY]],t=[e[0][0]-e[1][0],e[0][1]-e[1][1]];this.touch_dist=t[0]*t[0]+t[1]*t[1]}}},{key:"handleTouchMove",value:function(n){if(n.preventDefault(),2==n.touches.length||1==n.touches.length){var e=this.shadowRoot.getElementById("map-backend"),t=Array.from(n.touches).map((function(n){return[n.clientX,n.clientY]})).reduce((function(n,e){return[n[0]+e[0],n[1]+e[1]]})).map((function(e){return e/n.touches.length})),o=e.clientPosToMapPos(this.avg_touch_pos);this.avg_touch_pos=t;var r=e.clientPosToMapPos([t[0],t[1]]),a=[r[0]-o[0],r[1]-o[1]],i=[e.center[0]-a[0],e.center[1]-a[1]],l=e.scale;if(2==n.touches.length){var s=[[n.touches[0].clientX,n.touches[0].clientY],[n.touches[1].clientX,n.touches[1].clientY]],c=[s[0][0]-s[1][0],s[0][1]-s[1][1]],d=c[0]*c[0]+c[1]*c[1];if(0!==this.touch_dist&&0!==d){l*=d/this.touch_dist,this.touch_dist=d;var u=(l=Math.min(Math.max(.5,l),30))/e.scale,h=e.clientPosToMapPos(t),p=[(h[0]-i[0])*(1-1/u),(h[1]-i[1])*(1-1/u)];i[0]+=p[0],i[1]+=p[1]}}e.setCenterAndScale(i,l)}}},{key:"handleTouchEnd",value:function(n){n.preventDefault(),this.avg_touch_pos=Array.from(n.touches).map((function(n){return[n.clientX,n.clientY]})).reduce((function(n,e){return[n[0]+e[0],n[1]+e[1]]})).map((function(e){return e/n.touches.length}))}},{key:"handleOptionChange",value:function(n){var e=n.target.value;this.data=L(L(L({},this.data),this.data.options[e]),{},{option_selected:e})}},{key:"handleDetailsChange",value:function(n){this.details=n.target.checked}},{key:"handle3dChange",value:function(n){this.render3d=n.target.checked}},{key:"drawMap",value:function(n){var e=this.data;try{var t;if((null==e||null===(t=e.locations)||void 0===t?void 0:t.length)>0){var g,y;e.title&&(document.title=e.title);var b,x=e.data.map((function(n){return e.color_using?e.color_using.map((function(e){return n[e]})):n})),w=E.parseColor(e.defcolor||"#ffffff");if((null==x||null===(g=x[0])||void 0===g?void 0:g.length)>0){var k=x.reduce((function(n,e){return n.map((function(n,t){return Math.max(n,e[t])}))})),Z=x.reduce((function(n,e){return n.map((function(n,t){return Math.min(n,e[t])}))}));b=x.map((function(n){if(1==n.length){var t=E.parseColor(e.colors[0]),o=E.colorPropScale((0,T.U)(n[0],Z[0],k[0],0,1));return E.blendColors([t,w],[o,1-o])}var r=n.reduce((function(n,e){return n+e})),a=e.colors.map((function(n){return E.parseColor(n)})),i=n.map((function(n){return 0!==r?n/r:1}));return E.blendColors(a,i)}))}else b=e.locations.map((function(){return w}));var P=n.map((function(n,t){return n?L(L({},n),{},{color:b[t],data:e.data[t],columns:e.columns}):null})).filter((function(n){return n}));if(0==P.length)throw"No data";var _=x.reduce((function(n,e){return n.map((function(n,t){return Math.min(n,e[t])}))})),C=x.reduce((function(n,e){return n.map((function(n,t){return Math.max(n,e[t])}))}));return(0,B.dy)(o||(o=(0,M.Z)(['\n                    <div\n                        id="map-wrapper"\n                        @wheel="','"\n                        @mousedown="','"\n                        @touchstart="','"\n                        @touchmove="','"\n                        @touchend="','"\n                    >\n                        ',"\n                        ",'\n                    </div>\n                    <div class="title">','</div>\n                    <div id="option-box">\n                        <div>\n                            <input type="checkbox" id="details" ?checked='," @change=",'>\n                            <label for="details">Details</label>\n                        </div>\n                        ','\n                    </div>\n                    <div id="map-legend">\n                        <div class="current-legend">\n                        ',"\n                        </div>\n                        ","\n                    </div>\n                "])),this.handleScroll,this.handleDragStart,this.handleTouchStart,this.handleTouchMove,this.handleTouchEnd,this.details?(0,B.dy)(r||(r=(0,M.Z)(['\n                                <div id="info-box-wrapper">\n                                    <div id="info-box-background"></div>\n                                    <div id="info-box">\n                                        <div id="info-box-name"></div>\n                                        <hr />\n                                        <div class="info-field">\n                                            ',"\n                                        </div>\n                                    </div>\n                                </div>"])),e.columns.map((function(n){return(0,B.dy)(a||(a=(0,M.Z)(['\n                                                <span class="info-field-name">','</span>\n                                                <span class="info-field-value"></span>\n                                            '])),n)}))):(0,B.dy)(i||(i=(0,M.Z)([""]))),(0,S.F)(this.render3d?(0,B.dy)(l||(l=(0,M.Z)(['\n                                <map-backend-3d\n                                    id="map-backend"\n                                    .locations="','"\n                                    @hover="','"\n                                ></map-backend-3d>'])),P,this.handleLocationHover):(0,B.dy)(s||(s=(0,M.Z)(['\n                                <map-backend\n                                    id="map-backend"\n                                    .locations="','"\n                                    @hover="','"\n                                ></map-backend>'])),P,this.handleLocationHover)),e.title,this.details,this.handleDetailsChange,this.data.allow_3d&&(0,T.C)()?(0,B.dy)(c||(c=(0,M.Z)(['\n                                <div>\n                                    <input type="checkbox" id="render3d" ?checked='," @change=",'>\n                                    <label for="render3d">3D</label>\n                                </div>'])),this.render3d,this.handle3dChange):(0,B.dy)(d||(d=(0,M.Z)([""]))),(null==x||null===(y=x[0])||void 0===y?void 0:y.length)>1?e.colors.map((function(n,t){return(0,B.dy)(u||(u=(0,M.Z)(['\n                                    <div class="legend-item">\n                                        <span class="color-block" style="','"></span>\n                                        <span class="legend-label">',"</span>\n                                    </div>\n                                "])),(0,I.V)({background:n}),e.color_using?e.columns[e.color_using[t]]:e.color_using[t])})):e.colors.length>=1?(0,B.dy)(h||(h=(0,M.Z)(['\n                                        <div class="legend-item">\n                                            ','\n                                            <span class="color-gradiant">\n                                                <span>','</span>\n                                                <span class="scale" style="','"></span>\n                                                <span>',"</span>\n                                            </span>\n                                        </div>\n                                    "])),e.options?null:(0,B.dy)(p||(p=(0,M.Z)(['\n                                                        <span class="legend-label">',"</span>\n                                                    "])),e.color_using?e.columns[e.color_using[0]]:e.color_using[0]),(Math.round(100*C[0])/100).toLocaleString(),(0,I.V)({background:"linear-gradient(".concat(e.colors[0],",").concat(e.defcolor,")")}),(Math.round(100*_[0])/100).toLocaleString()):null,e.options?(0,B.dy)(f||(f=(0,M.Z)(['\n                                <select\n                                    class="select-option"\n                                    @change="','"\n                                >',"</select>\n                            "])),this.handleOptionChange,e.options.map((function(n,t){return(0,B.dy)(m||(m=(0,M.Z)(['\n                                        <option\n                                            value="','"\n                                            ?selected="','"\n                                        >',"</option>\n                                    "])),t,t==e.option_selected,n.name)}))):null)}throw"No data"}catch(n){return(0,B.dy)(v||(v=(0,M.Z)(['<div class="no-data">No data</div>'])))}}},{key:"render",value:function(){var n=this,e=E.getCachedLocations(this.data.locations);return e.includes(null)?(0,B.dy)(g||(g=(0,M.Z)(['\n                <div id="map-renderer-root">\n                    ',"\n                </div>\n            "])),(0,j.C)((0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,E.getLocations(n.data.locations);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.drawMap.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})))(),(0,B.dy)(y||(y=(0,M.Z)(["<ui-spinner></ui-spinner>"]))))):(0,B.dy)(b||(b=(0,M.Z)(['\n                <div id="map-renderer-root">\n                    ',"\n                </div>\n            "])),this.drawMap(e))}}],[{key:"properties",get:function(){return{data:{type:Object},render3d:{state:!0},details:{state:!0}}}},{key:"styles",get:function(){return(0,B.iv)(x||(x=(0,M.Z)(["\n            * {\n                box-sizing: border-box;\n            }\n            :host {\n                width: 100%;\n                height: 100%;\n                display: block;\n                overflow: hidden;\n            }\n            div#map-renderer-root {\n                width: 100%;\n                height: 100%;\n                overflow: hidden;\n                position: relative;\n                color: white;\n                --background: var(--background-dark);\n                background: var(--background);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            }\n            div#map-wrapper {\n                position: relative;\n                width: 100%;\n                height: 100%;\n                max-width: 100%;\n                max-height: 100%;\n                display: block;\n                will-change: cursor;\n            }\n            div#info-box-wrapper {\n                --anchor-point: 50%;\n                --anchor-at-bottom: 0;\n                position: absolute;\n                top: 0;\n                left: 0;\n                z-index: 100;\n                transform: translate(\n                    calc(var(--anchor-point) * -1),\n                    calc(var(--anchor-at-bottom) * (-100% - 8.5px) + (1 - var(--anchor-at-bottom)) * 8.5px));\n                display: none;\n                pointer-events: none;\n                will-change: transform, top, left;\n            }\n            div#info-box-wrapper.visible {\n                display: block;\n            }\n            div#info-box {\n                padding: 0.5rem;\n                font-size: 0.9rem;\n                font-family: Roboto, sans-serif;\n                color: black;\n                display: block;\n                width: max-content;\n                height: max-content;\n                max-width: 15rem;\n                min-width: 200px;\n                width: 100%;\n            }\n            div#info-box-name {\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n            div#info-box-background {\n                display: block;\n                position: absolute;\n                background: var(--background-light);\n                width: 100%;\n                height: 100%;\n                border-radius: 4px;\n                opacity: 0.85;\n                z-index: -1;\n            }\n            div#info-box-background::before {\n                content: '';\n                box-shadow: var(--shadow-small);\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                border-radius: 4px;\n            }\n            div#info-box-background::after {\n                content: '';\n                position: absolute;\n                width: 12px;\n                height: 12px;\n                top: calc(var(--anchor-at-bottom) * 100%);\n                left: var(--anchor-point);\n                transform: translate(-50%, -50%) rotate(45deg);\n                background: var(--background-light);\n                will-change: top, left\n            }\n            div.info-field {\n                display: grid;\n                grid-template-columns: auto auto;\n            }\n            span.info-field-name {\n                padding-right: 1rem;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n            span.info-field-value {\n                display: flex;\n                align-items: center;\n                justify-content: flex-end;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n            hr {\n                border: 1px solid var(--secondary);\n            }\n            div.title {\n                flex: 0 0 auto;\n                font-size: 1.2rem;\n                padding: 1rem 0 0 1rem;\n                font-family: Roboto, sans-serif;\n                position: absolute;\n                z-index: 10;\n                left: 0;\n                top: 0;\n                pointer-events: none;\n            }\n            div#map-legend {\n                z-index: 9;\n                position: absolute;\n                padding: 0 1rem 1rem 0;\n                bottom: 0;\n                right: 0;\n                font-size: 0.85rem;\n                font-family: Roboto, sans-serif;\n                display: flex;\n                flex-flow: column;\n                pointer-events: none;\n                align-items: flex-end;\n            }\n            div.current-legend {\n                display: flex;\n                flex-flow: column;\n                text-align: right;\n                padding: 0.5rem;\n                text-shadow: black 0px 0px 10px;\n            }\n            div.current-legend .legend-item {\n                display: flex;\n                flex-flow: row;\n                align-items: center;\n                justify-content: flex-start;\n            }\n            div.current-legend .color-block {\n                margin: 0 0.5rem;\n            }\n            div.current-legend .color-gradiant {\n                margin-left: 0.5rem;\n            }\n            select.select-option {\n                pointer-events: all;\n                appearance: none;\n                background: var(--background-darkish);\n                color: white;\n                border: none;\n                padding: 0.35rem;\n                border-radius: 4px;\n                text-align: center;\n                text-align-last: center;\n            }\n            select.select-option:hover {\n                cursor: pointer;\n            }\n            span.color-gradiant {\n                display: flex;\n                flex-flow: column;\n                align-items: center;\n            }\n            span.color-gradiant span.scale {\n                display: block;\n                height: 5rem;\n                width: 0.65rem;\n                box-shadow: var(--shadow-small);\n                margin-top: 0.25rem;\n                margin-bottom: 0.25rem;\n            }\n            span.color-block {\n                display: block;\n                height: 0.5rem;\n                width: 0.5rem;\n                box-shadow: var(--shadow-small);\n            }\n            div.no-data {\n                font-family: Roboto, sans-serif;\n                font-weight: 600;\n                font-size: 2rem; \n                white-space: nowrap;\n                text-transform: uppercase;\n            }\n            #option-box {\n                position: absolute;\n                left: 0.5rem;\n                bottom: 0.5rem;\n                display: flex;\n                flex-flow: column;\n            }\n            #option-box div {\n                padding: 0.25rem;\n                text-shadow: black 0px 0px 10px;\n            }\n        "])))}},{key:"parseBinaryData",value:function(n){for(var e=new Uint8Array(n),t=0;0!=e[t];)t++;var o=new Uint8Array(n,0,t),r=new TextDecoder,a=new DataView(n,t+1);t=0;var i=[],l=a.getUint32(t,!0);t+=4;for(var s=0;s<l;s++){i.push([]);var c=a.getUint32(t,!0);t+=4;for(var d=0;d<c;d++){i[s].push([]);var u=a.getUint32(t,!0);t+=4;for(var h=0;h<u;h++){var p=a.getInt32(t,!0);t+=4;var f=a.getInt32(t,!0);t+=4,i[s][d].push([p,f])}}}return{name:r.decode(o),coords:i}}},{key:"project",value:function(n){var e=(0,w.Z)(n,2),t=e[0],o=e[1];return[Math.PI+t,function(){Math.abs(o)>85&&(o=85*Math.sign(o));var n=o;return Math.PI-Math.log(Math.tan(Math.PI/4+n/2))}()]}},{key:"to_radians",value:function(n){var e=(0,w.Z)(n,2),t=e[0],o=e[1];return[t*Math.PI/180,o*Math.PI/180]}},{key:"parseColor",value:function(n){var e=n.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[255,255,255]}},{key:"blendColors",value:function(n,e){var t=[0,0,0],o=e.reduce((function(n,e){return n+e}),0);return 0===o?n[0]||t:(n.forEach((function(n,o){return t.forEach((function(r,a){return t[a]+=n[a]*n[a]*e[o]}))})),t.map((function(n){return Math.sqrt(n/o)})))}},{key:"colorPropScale",value:function(n){return Math.log10(99*n+1)/2}},{key:"getCachedLocations",value:function(n){return n.map((function(n){return n in A?A[n]:null}))}},{key:"getLocations",value:function(n){return Promise.all(n.map(function(){var n=(0,k.Z)(O().mark((function n(e){var t,o,r;return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=25;break}if(A[e]){n.next=22;break}return n.prev=2,n.next=5,fetch("".concat("./static/data","/").concat(e,".bin"));case 5:if(!(t=n.sent).ok){n.next=16;break}return n.t0=E,n.next=10,t.arrayBuffer();case 10:n.t1=n.sent,o=n.t0.parseBinaryData.call(n.t0,n.t1),r=o.coords.map((function(n){return n.map((function(n){return n.map((function(n){var e=(0,w.Z)(n,2),t=e[0],o=e[1];return E.to_radians([t/1e7,o/1e7])}))}))})),A[e]={id:e,name:o.name,coords:r,min:r.flat(2).reduce((function(n,e){return[Math.min(n[0],e[0]),Math.min(n[1],e[1])]})),max:r.flat(2).reduce((function(n,e){return[Math.max(n[0],e[0]),Math.max(n[1],e[1])]})),raw_coords:o.coords},n.next=17;break;case 16:A[e]=null;case 17:n.next=22;break;case 19:return n.prev=19,n.t2=n.catch(2),n.abrupt("return",null);case 22:return n.abrupt("return",A[e]);case 25:return n.abrupt("return",null);case 26:case"end":return n.stop()}}),n,null,[[2,19]])})));return function(e){return n.apply(this,arguments)}}()))}}]),E}(B.oi);customElements.define("map-renderer",X)},129:(n,e,t)=>{var o,r,a,i,l=t(982),s=t(168),c=t(671),d=t(144),u=t(340),h=t(215),p=t(120),f=t(392);var m=function(n){(0,u.Z)(v,n);var e,t,m=(e=v,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,o=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return(0,h.Z)(this,n)});function v(){return(0,c.Z)(this,v),m.apply(this,arguments)}return(0,d.Z)(v,[{key:"render",value:function(){return(0,f.dy)(o||(o=(0,s.Z)(['\n            <span class="ui-spinner">\n                ',"\n            </span>\n        "])),(0,l.Z)(Array(10).keys()).map((function(){return(0,f.dy)(r||(r=(0,s.Z)(["<span></span>"])))})))}}],[{key:"styles",get:function(){return(0,f.iv)(a||(a=(0,s.Z)(["\n            span.ui-spinner {\n                width: 5rem;\n                height: 5rem;\n                max-width: 100%;\n                max-height: 100%;\n                position: relative;\n                display: block;\n            }\n            span.ui-spinner span {\n                display: block;\n                position: absolute;\n                background: var(--primary);\n                border-radius: 50%;\n            }\n            @keyframes ui-spinner-keyframes {\n                0% {\n                    transform: rotate(0deg);\n                }\n                100% {\n                    transform: rotate(360deg);\n                }\n            }\n            ","\n        "])),(0,f.$m)((0,l.Z)(Array(10).keys()).map((function(n){return(0,f.iv)(i||(i=(0,s.Z)(["\n                span.ui-spinner span:nth-child(",") {\n                    animation: 1s calc(0.02s * ",") ease-in-out infinite ui-spinner-keyframes;\n                    width: calc(25% - 1% * ",");\n                    height: calc(25% - 1% * ",");\n                    top: calc(50% - (25% - 1% * ",") / 2);\n                    left: 0%;\n                    transform-origin: "," 50%;\n                }\n            "])),(0,f.$m)(n+1),(0,f.$m)(n+1),(0,f.$m)(n+1),(0,f.$m)(n+1),(0,f.$m)(n+1),(0,f.$m)(5e3/(25-1*(n+1))+"%"))})).join("")))}}]),v}(f.oi);customElements.define("ui-spinner",m)},293:(n,e,t)=>{function o(n,e,t,o,r){return e===t?r:n<e?o:n>t?r:(n-e)/(t-e)*(r-o)+o}function r(){try{var n=document.createElement("canvas");return n.getContext("webgl")||n.getContext("experimental-webgl")}catch(n){return!1}}t.d(e,{C:()=>r,U:()=>o})}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFBLEVBQUFBLElBQVUzSyxFQUFJLElBQ2xCMkssRUFBQUEsRUFBQUEsSUFBVTNLLEVBQUksSUFDYjJLLEVBQUFBLEVBQUFBLElBQVUzSyxFQUFJLElBQ1YySyxFQUFBQSxFQUFBQSxJQUFVM0ssRUFBSSxJQUV4QjJLLEVBQUFBLEVBQUFBLElBQVcsS0FBWSxHQUFLLEdBQUszSyxFQUFJLElBQU8sU0FFcEU0SyxLQUFLLFUsRUFuQ2ZILENBQWdCSCxFQUFBQSxJQW1EdEJDLGVBQWVDLE9BQU8sYUFBY0MsSSxjQ3ZEN0IsU0FBU2pKLEVBQUl3QyxFQUFPNkcsRUFBUUMsRUFBUUMsRUFBU0MsR0FDaEQsT0FBR0gsSUFBV0MsRUFDSEUsRUFDRGhILEVBQVE2RyxFQUNQRSxFQUNEL0csRUFBUThHLEVBQ1BFLEdBRUNoSCxFQUFRNkcsSUFBV0MsRUFBU0QsSUFBV0csRUFBVUQsR0FBV0EsRUFJckUsU0FBU3BNLElBQ1osSUFDSSxJQUFNc00sRUFBUzFHLFNBQVMyRyxjQUFjLFVBRXRDLE9BRFlELEVBQU9FLFdBQVcsVUFBWUYsRUFBT0UsV0FBVyxzQkFFOUQsTUFBT3pFLEdBQ0wsT0FBTyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2VvLWRyYXcvLi9zcmMvbWFwL21hcC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly9nZW8tZHJhdy8uL3NyYy91aS9zcGlubmVyLmpzIiwid2VicGFjazovL2dlby1kcmF3Ly4vc3JjL3V0aWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyBMaXRFbGVtZW50LCBodG1sLCBjc3MgfSBmcm9tICdsaXQnO1xuaW1wb3J0IHsgc3R5bGVNYXAgfSBmcm9tICdsaXQvZGlyZWN0aXZlcy9zdHlsZS1tYXAuanMnO1xuaW1wb3J0IHsgdW50aWwgfSBmcm9tICdsaXQvZGlyZWN0aXZlcy91bnRpbC5qcyc7XG5pbXBvcnQgeyBjYWNoZSB9IGZyb20gJ2xpdC9kaXJlY3RpdmVzL2NhY2hlLmpzJztcblxuaW1wb3J0ICcuLi91aS9zcGlubmVyJztcbmltcG9ydCB7IG1hcCBhcyBtYXBGcm9tVG8sIGhhc1dlYkdsU3VwcG9ydCB9IGZyb20gJy4uL3V0aWwnO1xuXG5pZiAoaGFzV2ViR2xTdXBwb3J0KCkpIHtcbiAgICBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJtYXAtYmFja2VuZC13ZWJnbFwiICovICcuL21hcC1iYWNrZW5kLXdlYmdsJyk7XG59IGVsc2Uge1xuICAgIGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcIm1hcC1iYWNrZW5kLXN2Z1wiICovICcuL21hcC1iYWNrZW5kLXN2ZycpO1xufVxuXG5jb25zdCBkYXRhX2xvY2F0aW9uID0gJy4vc3RhdGljL2RhdGEnO1xuY29uc3QgbG9jYXRpb25fY2FjaGUgPSB7fTtcblxuY29uc3QgTUlOX1pPT00gPSAwLjU7XG5jb25zdCBNQVhfWk9PTSA9IDMwO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXBSZW5kZXJlciBleHRlbmRzIExpdEVsZW1lbnQge1xuXG4gICAgc3RhdGljIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogeyB0eXBlOiBPYmplY3QgfSxcbiAgICAgICAgICAgIHJlbmRlcjNkOiB7IHN0YXRlOiB0cnVlIH0sXG4gICAgICAgICAgICBkZXRhaWxzOiB7IHN0YXRlOiB0cnVlIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBzdHlsZXMoKSB7XG4gICAgICAgIHJldHVybiBjc3NgXG4gICAgICAgICAgICAqIHtcbiAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGl2I21hcC1yZW5kZXJlci1yb290IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgICAgIC0tYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1kYXJrKTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kKTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXYjbWFwLXdyYXBwZXIge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1heC1oZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgd2lsbC1jaGFuZ2U6IGN1cnNvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdiNpbmZvLWJveC13cmFwcGVyIHtcbiAgICAgICAgICAgICAgICAtLWFuY2hvci1wb2ludDogNTAlO1xuICAgICAgICAgICAgICAgIC0tYW5jaG9yLWF0LWJvdHRvbTogMDtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgICAgICAgei1pbmRleDogMTAwO1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICBjYWxjKHZhcigtLWFuY2hvci1wb2ludCkgKiAtMSksXG4gICAgICAgICAgICAgICAgICAgIGNhbGModmFyKC0tYW5jaG9yLWF0LWJvdHRvbSkgKiAoLTEwMCUgLSA4LjVweCkgKyAoMSAtIHZhcigtLWFuY2hvci1hdC1ib3R0b20pKSAqIDguNXB4KSk7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgICAgICB3aWxsLWNoYW5nZTogdHJhbnNmb3JtLCB0b3AsIGxlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXYjaW5mby1ib3gtd3JhcHBlci52aXNpYmxlIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdiNpbmZvLWJveCB7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45cmVtO1xuICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBSb2JvdG8sIHNhbnMtc2VyaWY7XG4gICAgICAgICAgICAgICAgY29sb3I6IGJsYWNrO1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIHdpZHRoOiBtYXgtY29udGVudDtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IG1heC1jb250ZW50O1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTVyZW07XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMDBweDtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdiNpbmZvLWJveC1uYW1lIHtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXYjaW5mby1ib3gtYmFja2dyb3VuZCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbGlnaHQpO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC44NTtcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdiNpbmZvLWJveC1iYWNrZ3JvdW5kOjpiZWZvcmUge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1zbWFsbCk7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXYjaW5mby1ib3gtYmFja2dyb3VuZDo6YWZ0ZXIge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTJweDtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEycHg7XG4gICAgICAgICAgICAgICAgdG9wOiBjYWxjKHZhcigtLWFuY2hvci1hdC1ib3R0b20pICogMTAwJSk7XG4gICAgICAgICAgICAgICAgbGVmdDogdmFyKC0tYW5jaG9yLXBvaW50KTtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSByb3RhdGUoNDVkZWcpO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbGlnaHQpO1xuICAgICAgICAgICAgICAgIHdpbGwtY2hhbmdlOiB0b3AsIGxlZnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdi5pbmZvLWZpZWxkIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogYXV0byBhdXRvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3Bhbi5pbmZvLWZpZWxkLW5hbWUge1xuICAgICAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDFyZW07XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3Bhbi5pbmZvLWZpZWxkLXZhbHVlIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBociB7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdi50aXRsZSB7XG4gICAgICAgICAgICAgICAgZmxleDogMCAwIGF1dG87XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxLjJyZW07XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMXJlbSAwIDAgMXJlbTtcbiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogUm9ib3RvLCBzYW5zLXNlcmlmO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAxMDtcbiAgICAgICAgICAgICAgICBsZWZ0OiAwO1xuICAgICAgICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdiNtYXAtbGVnZW5kIHtcbiAgICAgICAgICAgICAgICB6LWluZGV4OiA5O1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwIDFyZW0gMXJlbSAwO1xuICAgICAgICAgICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODVyZW07XG4gICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IFJvYm90bywgc2Fucy1zZXJpZjtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZmxvdzogY29sdW1uO1xuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdi5jdXJyZW50LWxlZ2VuZCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWZsb3c6IGNvbHVtbjtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgdGV4dC1zaGFkb3c6IGJsYWNrIDBweCAwcHggMTBweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdi5jdXJyZW50LWxlZ2VuZCAubGVnZW5kLWl0ZW0ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1mbG93OiByb3c7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXYuY3VycmVudC1sZWdlbmQgLmNvbG9yLWJsb2NrIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAgMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGl2LmN1cnJlbnQtbGVnZW5kIC5jb2xvci1ncmFkaWFudCB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDAuNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGVjdC5zZWxlY3Qtb3B0aW9uIHtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogYWxsO1xuICAgICAgICAgICAgICAgIGFwcGVhcmFuY2U6IG5vbmU7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1kYXJraXNoKTtcbiAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuMzVyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduLWxhc3Q6IGNlbnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGVjdC5zZWxlY3Qtb3B0aW9uOmhvdmVyIHtcbiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzcGFuLmNvbG9yLWdyYWRpYW50IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZmxvdzogY29sdW1uO1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzcGFuLmNvbG9yLWdyYWRpYW50IHNwYW4uc2NhbGUge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIGhlaWdodDogNXJlbTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMC42NXJlbTtcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctc21hbGwpO1xuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDAuMjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC4yNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNwYW4uY29sb3ItYmxvY2sge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMC41cmVtO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LXNtYWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdi5uby1kYXRhIHtcbiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogUm9ib3RvLCBzYW5zLXNlcmlmO1xuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAycmVtOyBcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAjb3B0aW9uLWJveCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIGxlZnQ6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBib3R0b206IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZmxvdzogY29sdW1uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgI29wdGlvbi1ib3ggZGl2IHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjI1cmVtO1xuICAgICAgICAgICAgICAgIHRleHQtc2hhZG93OiBibGFjayAwcHggMHB4IDEwcHg7XG4gICAgICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmVuZGVyM2QgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZXRhaWxzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBzdGF0aWMgcGFyc2VCaW5hcnlEYXRhKGFycmF5X2J1ZmZlcikge1xuICAgICAgICBjb25zdCB1aW50OF9hcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5X2J1ZmZlcik7XG4gICAgICAgIGxldCBsZW4gPSAwO1xuICAgICAgICB3aGlsZSAodWludDhfYXJyYXlbbGVuXSAhPSAwKSB7XG4gICAgICAgICAgICBsZW4rKztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdHJpbmdfcGFydCA9IG5ldyBVaW50OEFycmF5KGFycmF5X2J1ZmZlciwgMCwgbGVuKTtcbiAgICAgICAgY29uc3QgdXRmOF9kZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICAgIGNvbnN0IGRhdGFfdmlldyA9IG5ldyBEYXRhVmlldyhhcnJheV9idWZmZXIsIGxlbiArIDEpO1xuICAgICAgICBsZW4gPSAwO1xuICAgICAgICBjb25zdCBjb29yZHMgPSBbXTtcbiAgICAgICAgY29uc3QgbnVtX3BvbHkgPSBkYXRhX3ZpZXcuZ2V0VWludDMyKGxlbiwgdHJ1ZSk7XG4gICAgICAgIGxlbiArPSA0O1xuICAgICAgICBmb3IgKGxldCBwID0gMDsgcCA8IG51bV9wb2x5OyBwKyspIHtcbiAgICAgICAgICAgIGNvb3Jkcy5wdXNoKFtdKTtcbiAgICAgICAgICAgIGNvbnN0IG51bV9wYXRoID0gZGF0YV92aWV3LmdldFVpbnQzMihsZW4sIHRydWUpO1xuICAgICAgICAgICAgbGVuICs9IDQ7XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG51bV9wYXRoOyB0KyspIHtcbiAgICAgICAgICAgICAgICBjb29yZHNbcF0ucHVzaChbXSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbnVtX2NvcmRzID0gZGF0YV92aWV3LmdldFVpbnQzMihsZW4sIHRydWUpO1xuICAgICAgICAgICAgICAgIGxlbiArPSA0O1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgbnVtX2NvcmRzOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9uID0gZGF0YV92aWV3LmdldEludDMyKGxlbiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGxlbiArPSA0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXQgPSBkYXRhX3ZpZXcuZ2V0SW50MzIobGVuLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgbGVuICs9IDQ7XG4gICAgICAgICAgICAgICAgICAgIGNvb3Jkc1twXVt0XS5wdXNoKFtsb24sIGxhdF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdXRmOF9kZWNvZGVyLmRlY29kZShzdHJpbmdfcGFydCksXG4gICAgICAgICAgICBjb29yZHM6IGNvb3JkcyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzdGF0aWMgcHJvamVjdChbbG9uLCBsYXRdKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBNYXRoLlBJICsgbG9uLFxuICAgICAgICAgICAgKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGxhdCkgPiA4NSkge1xuICAgICAgICAgICAgICAgICAgICBsYXQgPSBNYXRoLnNpZ24obGF0KSAqIDg1O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBwaGkgPSBsYXQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguUEkgLSBNYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJIC8gNCArIHBoaSAvIDIpKTtcbiAgICAgICAgICAgIH0pKCkpXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgc3RhdGljIHRvX3JhZGlhbnMoW2xvbiwgbGF0XSkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgbG9uICogTWF0aC5QSSAvIDE4MCxcbiAgICAgICAgICAgIGxhdCAqIE1hdGguUEkgLyAxODAsXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgc3RhdGljIHBhcnNlQ29sb3Ioc3RyKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gc3RyLm1hdGNoKC9eIyhbMC05YS1mXXsyfSkoWzAtOWEtZl17Mn0pKFswLTlhLWZdezJ9KSQvaSk7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgcmV0dXJuIFtwYXJzZUludChtYXRjaFsxXSwgMTYpLCBwYXJzZUludChtYXRjaFsyXSwgMTYpLCBwYXJzZUludChtYXRjaFszXSwgMTYpXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbMjU1LCAyNTUsIDI1NV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgYmxlbmRDb2xvcnMoY29sb3JzLCBwcm9wb3J0aW9uKSB7XG4gICAgICAgIGNvbnN0IHJldCA9IFswLCAwLCAwXTtcbiAgICAgICAgY29uc3Qgc3VtID0gcHJvcG9ydGlvbi5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcbiAgICAgICAgaWYgKHN1bSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbG9yc1swXSB8fCByZXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb2xvcnMuZm9yRWFjaCgoY29sLCBpKSA9PiByZXQuZm9yRWFjaCgoZWwsIGopID0+IHJldFtqXSArPSBjb2xbal0gKiBjb2xbal0gKiBwcm9wb3J0aW9uW2ldKSk7XG4gICAgICAgICAgICByZXR1cm4gcmV0Lm1hcChlbCA9PiBNYXRoLnNxcnQoZWwgLyBzdW0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBjb2xvclByb3BTY2FsZShwcm9wKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmxvZzEwKDk5ICogcHJvcCArIDEpIC8gMjtcbiAgICB9XG5cbiAgICBoYW5kbGVMb2NhdGlvbkhvdmVyKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmRldGFpbHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZm9fYm94ID0gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKCdpbmZvLWJveC13cmFwcGVyJyk7XG4gICAgICAgICAgICBpZiAoZXZlbnQubG9jYXRpb24gJiYgZXZlbnQucG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKCdpbmZvLWJveC1uYW1lJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFwX3dyYXBwZXIgPSB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoJ21hcC13cmFwcGVyJyk7XG4gICAgICAgICAgICAgICAgbmFtZS5pbm5lclRleHQgPSBldmVudC5sb2NhdGlvbi5uYW1lLnNwbGl0KCcsJylbMF07XG4gICAgICAgICAgICAgICAgQXJyYXkuZnJvbShpbmZvX2JveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdpbmZvLWZpZWxkLXZhbHVlJykpLmZvckVhY2goKGVsLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVsLmlubmVyVGV4dCA9IChNYXRoLnJvdW5kKGV2ZW50LmxvY2F0aW9uLmRhdGFbaV0gKiAxMDApIC8gMTAwKS50b0xvY2FsZVN0cmluZygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hcF93cmFwcGVyX3BvcyA9IG1hcF93cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIGxldCB4ID0gZXZlbnQucG9zaXRpb25bMF0gLSBtYXBfd3JhcHBlcl9wb3MueDtcbiAgICAgICAgICAgICAgICBsZXQgeSA9IGV2ZW50LnBvc2l0aW9uWzFdIC0gbWFwX3dyYXBwZXJfcG9zLnk7XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB5ID0gTWF0aC5taW4oTWF0aC5tYXgoeSwgMCksIG1hcF93cmFwcGVyX3Bvcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBpbmZvX2JveC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1hbmNob3ItcG9pbnQnLCAoeCAvIG1hcF93cmFwcGVyX3Bvcy53aWR0aCAqIDkwICsgNSkgKyAnJScpO1xuICAgICAgICAgICAgICAgICAgICBpbmZvX2JveC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1hbmNob3ItYXQtYm90dG9tJywgKHkgPiAoKGluZm9fYm94LmNsaWVudEhlaWdodCArIDEyKSAqIDEuMikpID8gMSA6IDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbmZvX2JveC5zdHlsZS5sZWZ0ID0geCArICdweCc7XG4gICAgICAgICAgICAgICAgaW5mb19ib3guc3R5bGUudG9wID0geSArICdweCc7XG4gICAgICAgICAgICAgICAgaW5mb19ib3guY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZm9fYm94X3BvcyA9IGluZm9fYm94LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIGlmIChpbmZvX2JveF9wb3MueCA8IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgeCA9IE1hdGgubWF4KHgsIDguNSk7XG4gICAgICAgICAgICAgICAgICAgIHkgPSBNYXRoLm1pbihNYXRoLm1heCh5LCBpbmZvX2JveF9wb3MuaGVpZ2h0ICogMC4xKSwgbWFwX3dyYXBwZXJfcG9zLmhlaWdodCAtIGluZm9fYm94X3Bvcy5oZWlnaHQgKiAwLjEpO1xuICAgICAgICAgICAgICAgICAgICBpbmZvX2JveC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1hbmNob3ItcG9pbnQnLCAnMCUnKTtcbiAgICAgICAgICAgICAgICAgICAgaW5mb19ib3guc3R5bGUuc2V0UHJvcGVydHkoJy0tYW5jaG9yLWF0LWJvdHRvbScsICh5IC8gbWFwX3dyYXBwZXJfcG9zLmhlaWdodCAqIDAuOCArIDAuMSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5mb19ib3hfcG9zLnggKyBpbmZvX2JveF9wb3Mud2lkdGggKyA0ID4gbWFwX3dyYXBwZXJfcG9zLnggKyBtYXBfd3JhcHBlcl9wb3Mud2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgeCA9IE1hdGgubWluKHgsIG1hcF93cmFwcGVyX3Bvcy53aWR0aCAtIDguNSk7XG4gICAgICAgICAgICAgICAgICAgIHkgPSBNYXRoLm1pbihNYXRoLm1heCh5LCBpbmZvX2JveF9wb3MuaGVpZ2h0ICogMC4xKSwgbWFwX3dyYXBwZXJfcG9zLmhlaWdodCAtIGluZm9fYm94X3Bvcy5oZWlnaHQgKiAwLjEpO1xuICAgICAgICAgICAgICAgICAgICBpbmZvX2JveC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1hbmNob3ItcG9pbnQnLCAnMTAwJScpO1xuICAgICAgICAgICAgICAgICAgICBpbmZvX2JveC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1hbmNob3ItYXQtYm90dG9tJywgKHkgLyBtYXBfd3JhcHBlcl9wb3MuaGVpZ2h0ICogMC44ICsgMC4xKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgeSA9IE1hdGgubWluKE1hdGgubWF4KHksIDApLCBtYXBfd3JhcHBlcl9wb3MuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgaW5mb19ib3guc3R5bGUuc2V0UHJvcGVydHkoJy0tYW5jaG9yLXBvaW50JywgKHggLyBtYXBfd3JhcHBlcl9wb3Mud2lkdGggKiA5MCArIDUpICsgJyUnKTtcbiAgICAgICAgICAgICAgICAgICAgaW5mb19ib3guc3R5bGUuc2V0UHJvcGVydHkoJy0tYW5jaG9yLWF0LWJvdHRvbScsICh5ID4gKChpbmZvX2JveF9wb3MuaGVpZ2h0ICsgMTIpICogMS4yKSkgPyAxIDogMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluZm9fYm94LnN0eWxlLmxlZnQgPSB4ICsgJ3B4JztcbiAgICAgICAgICAgICAgICBpbmZvX2JveC5zdHlsZS50b3AgPSB5ICsgJ3B4JztcbiAgICAgICAgICAgICAgICBpbmZvX2JveC5jdXJyZW50X2xvY2F0aW9uID0gbG9jYXRpb247XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZm9fYm94ID0gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKCdpbmZvLWJveC13cmFwcGVyJyk7XG4gICAgICAgICAgICAgICAgaW5mb19ib3guY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIGluZm9fYm94LmN1cnJlbnRfbG9jYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlU2Nyb2xsKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IG1hcCA9IHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZCgnbWFwLWJhY2tlbmQnKTtcbiAgICAgICAgbGV0IG5ld19zY2FsZSA9IG1hcC5zY2FsZTtcbiAgICAgICAgaWYgKGV2ZW50LmRlbHRhWSA8IDApIHtcbiAgICAgICAgICAgIG5ld19zY2FsZSAqPSBtYXBGcm9tVG8oZXZlbnQuZGVsdGFZLCAwLCAtMTAsIDEuMSwgMS41KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld19zY2FsZSAqPSBtYXBGcm9tVG8oZXZlbnQuZGVsdGFZLCAwLCAxMCwgMC42LCAwLjkpO1xuICAgICAgICB9XG4gICAgICAgIG5ld19zY2FsZSA9IE1hdGgubWluKE1hdGgubWF4KE1JTl9aT09NLCBuZXdfc2NhbGUpLCBNQVhfWk9PTSk7XG4gICAgICAgIGNvbnN0IGRzID0gbmV3X3NjYWxlIC8gbWFwLnNjYWxlO1xuICAgICAgICBjb25zdCBjZW50ZXIgPSBtYXAuY2VudGVyO1xuICAgICAgICBjb25zdCBwb2ludGVyID0gbWFwLmNsaWVudFBvc1RvTWFwUG9zKFtldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZXSk7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gWyhwb2ludGVyWzBdIC0gY2VudGVyWzBdKSAqICgxIC0gMSAvIGRzKSwgKHBvaW50ZXJbMV0gLSBjZW50ZXJbMV0pICogKDEgLSAxIC8gZHMpXTtcbiAgICAgICAgY29uc3QgbmV3X2NlbnRlciA9IFtjZW50ZXJbMF0gKyBkZWx0YVswXSwgY2VudGVyWzFdICsgZGVsdGFbMV1dO1xuICAgICAgICBtYXAuc2V0Q2VudGVyQW5kU2NhbGUobmV3X2NlbnRlciwgbmV3X3NjYWxlKTtcbiAgICB9XG5cbiAgICBoYW5kbGVEcmFnU3RhcnQoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgZWxlbWVudF93cmFwID0gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKCdtYXAtd3JhcHBlcicpO1xuICAgICAgICB0aGlzLmxhc3RfZHJhZ19wb3MgPSBbZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WV07XG4gICAgICAgIGVsZW1lbnRfd3JhcC5vbm1vdXNldXAgPSB0aGlzLmhhbmRsZURyYWdFbmQuYmluZCh0aGlzKTtcbiAgICAgICAgZWxlbWVudF93cmFwLm9ubW91c2VsZWF2ZSA9IHRoaXMuaGFuZGxlRHJhZ0VuZC5iaW5kKHRoaXMpO1xuICAgICAgICBlbGVtZW50X3dyYXAub25tb3VzZW1vdmUgPSB0aGlzLmhhbmRsZURyYWdNb3ZlLmJpbmQodGhpcyk7XG4gICAgICAgIGVsZW1lbnRfd3JhcC5zdHlsZS5jdXJzb3IgPSAnZ3JhYmJpbmcnO1xuICAgIH1cblxuICAgIGhhbmRsZURyYWdNb3ZlKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IG1hcCA9IHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZCgnbWFwLWJhY2tlbmQnKTtcbiAgICAgICAgY29uc3QgbGFzdF9tYXBfcG9zID0gbWFwLmNsaWVudFBvc1RvTWFwUG9zKHRoaXMubGFzdF9kcmFnX3Bvcyk7XG4gICAgICAgIHRoaXMubGFzdF9kcmFnX3BvcyA9IFtldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZXTtcbiAgICAgICAgY29uc3QgY3VycmVudF9tYXBfcG9zID0gbWFwLmNsaWVudFBvc1RvTWFwUG9zKFtldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZXSk7XG4gICAgICAgIGNvbnN0IGRpZmYgPSBbY3VycmVudF9tYXBfcG9zWzBdIC0gbGFzdF9tYXBfcG9zWzBdLCBjdXJyZW50X21hcF9wb3NbMV0gLSBsYXN0X21hcF9wb3NbMV1dO1xuICAgICAgICBjb25zdCBuZXdfY2VudGVyID0gW21hcC5jZW50ZXJbMF0gLSBkaWZmWzBdLCBtYXAuY2VudGVyWzFdIC0gZGlmZlsxXV07XG4gICAgICAgIG1hcC5zZXRDZW50ZXJBbmRTY2FsZShuZXdfY2VudGVyLCBtYXAuc2NhbGUpO1xuICAgIH1cblxuICAgIGhhbmRsZURyYWdFbmQoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgZWxlbWVudF93cmFwID0gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKCdtYXAtd3JhcHBlcicpO1xuICAgICAgICBlbGVtZW50X3dyYXAub25tb3VzZXVwID0gbnVsbDtcbiAgICAgICAgZWxlbWVudF93cmFwLm9ubW91c2VsZWF2ZSA9IG51bGw7XG4gICAgICAgIGVsZW1lbnRfd3JhcC5vbm1vdXNlbW92ZSA9IG51bGw7XG4gICAgICAgIGVsZW1lbnRfd3JhcC5zdHlsZS5jdXJzb3IgPSBudWxsO1xuICAgIH1cblxuICAgIGhhbmRsZVRvdWNoU3RhcnQoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09IDIgfHwgZXZlbnQudG91Y2hlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgdGhpcy5hdmdfdG91Y2hfcG9zID0gQXJyYXkuZnJvbShldmVudC50b3VjaGVzKVxuICAgICAgICAgICAgICAgIC5tYXAodG91Y2ggPT4gW3RvdWNoLmNsaWVudFgsIHRvdWNoLmNsaWVudFldKVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGEsIGIpID0+IFthWzBdICsgYlswXSwgYVsxXSArIGJbMV1dKS5tYXAoZWwgPT4gZWwgLyBldmVudC50b3VjaGVzLmxlbmd0aCk7XG4gICAgICAgICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT0gMikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvdWNoX2FycmF5ID0gW1tldmVudC50b3VjaGVzWzBdLmNsaWVudFgsIGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WV0sIFtldmVudC50b3VjaGVzWzFdLmNsaWVudFgsIGV2ZW50LnRvdWNoZXNbMV0uY2xpZW50WV1dO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBbdG91Y2hfYXJyYXlbMF1bMF0gLSB0b3VjaF9hcnJheVsxXVswXSwgdG91Y2hfYXJyYXlbMF1bMV0gLSB0b3VjaF9hcnJheVsxXVsxXV07XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaF9kaXN0ID0gKGRpZmZbMF0gKiBkaWZmWzBdICsgZGlmZlsxXSAqIGRpZmZbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlVG91Y2hNb3ZlKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA9PSAyIHx8IGV2ZW50LnRvdWNoZXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hcCA9IHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZCgnbWFwLWJhY2tlbmQnKTtcbiAgICAgICAgICAgIC8vIFRyYW5zbGF0aW9uXG4gICAgICAgICAgICBjb25zdCBuZXdfdG91Y2hfcG9zID0gQXJyYXkuZnJvbShldmVudC50b3VjaGVzKVxuICAgICAgICAgICAgICAgIC5tYXAodG91Y2ggPT4gW3RvdWNoLmNsaWVudFgsIHRvdWNoLmNsaWVudFldKVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGEsIGIpID0+IFthWzBdICsgYlswXSwgYVsxXSArIGJbMV1dKS5tYXAoZWwgPT4gZWwgLyBldmVudC50b3VjaGVzLmxlbmd0aCk7XG4gICAgICAgICAgICBjb25zdCBsYXN0X21hcF9wb3MgPSBtYXAuY2xpZW50UG9zVG9NYXBQb3ModGhpcy5hdmdfdG91Y2hfcG9zKTtcbiAgICAgICAgICAgIHRoaXMuYXZnX3RvdWNoX3BvcyA9IG5ld190b3VjaF9wb3M7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50X21hcF9wb3MgPSBtYXAuY2xpZW50UG9zVG9NYXBQb3MoW25ld190b3VjaF9wb3NbMF0sIG5ld190b3VjaF9wb3NbMV1dKTtcbiAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBbY3VycmVudF9tYXBfcG9zWzBdIC0gbGFzdF9tYXBfcG9zWzBdLCBjdXJyZW50X21hcF9wb3NbMV0gLSBsYXN0X21hcF9wb3NbMV1dO1xuICAgICAgICAgICAgbGV0IG5ld19jZW50ZXIgPSBbbWFwLmNlbnRlclswXSAtIGRpZmZbMF0sIG1hcC5jZW50ZXJbMV0gLSBkaWZmWzFdXTtcbiAgICAgICAgICAgIGxldCBuZXdfc2NhbGUgPSBtYXAuc2NhbGU7XG4gICAgICAgICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT0gMikge1xuICAgICAgICAgICAgICAgIC8vIFNjYWxpbmdcbiAgICAgICAgICAgICAgICBjb25zdCB0b3VjaF9hcnJheSA9IFtbZXZlbnQudG91Y2hlc1swXS5jbGllbnRYLCBldmVudC50b3VjaGVzWzBdLmNsaWVudFldLCBbZXZlbnQudG91Y2hlc1sxXS5jbGllbnRYLCBldmVudC50b3VjaGVzWzFdLmNsaWVudFldXTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b3VjaF9kaWZmID0gW3RvdWNoX2FycmF5WzBdWzBdIC0gdG91Y2hfYXJyYXlbMV1bMF0sIHRvdWNoX2FycmF5WzBdWzFdIC0gdG91Y2hfYXJyYXlbMV1bMV1dO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld190b3VjaF9kaXN0ID0gKHRvdWNoX2RpZmZbMF0gKiB0b3VjaF9kaWZmWzBdICsgdG91Y2hfZGlmZlsxXSAqIHRvdWNoX2RpZmZbMV0pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvdWNoX2Rpc3QgIT09IDAgJiYgbmV3X3RvdWNoX2Rpc3QgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3X3NjYWxlICo9IG5ld190b3VjaF9kaXN0IC8gdGhpcy50b3VjaF9kaXN0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoX2Rpc3QgPSBuZXdfdG91Y2hfZGlzdDtcbiAgICAgICAgICAgICAgICAgICAgbmV3X3NjYWxlID0gTWF0aC5taW4oTWF0aC5tYXgoTUlOX1pPT00sIG5ld19zY2FsZSksIE1BWF9aT09NKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHMgPSBuZXdfc2NhbGUgLyBtYXAuc2NhbGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvaW50ZXIgPSBtYXAuY2xpZW50UG9zVG9NYXBQb3MobmV3X3RvdWNoX3Bvcyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gWyhwb2ludGVyWzBdIC0gbmV3X2NlbnRlclswXSkgKiAoMSAtIDEgLyBkcyksIChwb2ludGVyWzFdIC0gbmV3X2NlbnRlclsxXSkgKiAoMSAtIDEgLyBkcyldO1xuICAgICAgICAgICAgICAgICAgICBuZXdfY2VudGVyWzBdICs9IGRlbHRhWzBdO1xuICAgICAgICAgICAgICAgICAgICBuZXdfY2VudGVyWzFdICs9IGRlbHRhWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hcC5zZXRDZW50ZXJBbmRTY2FsZShuZXdfY2VudGVyLCBuZXdfc2NhbGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlVG91Y2hFbmQoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5hdmdfdG91Y2hfcG9zID0gQXJyYXkuZnJvbShldmVudC50b3VjaGVzKVxuICAgICAgICAgICAgLm1hcCh0b3VjaCA9PiBbdG91Y2guY2xpZW50WCwgdG91Y2guY2xpZW50WV0pXG4gICAgICAgICAgICAucmVkdWNlKChhLCBiKSA9PiBbYVswXSArIGJbMF0sIGFbMV0gKyBiWzFdXSkubWFwKGVsID0+IGVsIC8gZXZlbnQudG91Y2hlcy5sZW5ndGgpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRDYWNoZWRMb2NhdGlvbnMobG9jYXRpb25zKSB7XG4gICAgICAgIHJldHVybiBsb2NhdGlvbnMubWFwKGxvY2F0aW9uID0+IHtcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbiBpbiBsb2NhdGlvbl9jYWNoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbl9jYWNoZVtsb2NhdGlvbl07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0TG9jYXRpb25zKGxvY2F0aW9ucykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwobG9jYXRpb25zLm1hcChhc3luYyBsb2NhdGlvbiA9PiB7XG4gICAgICAgICAgICBpZiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxvY2F0aW9uX2NhY2hlW2xvY2F0aW9uXSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7ZGF0YV9sb2NhdGlvbn0vJHtsb2NhdGlvbn0uYmluYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IE1hcFJlbmRlcmVyLnBhcnNlQmluYXJ5RGF0YShhd2FpdCByZXMuYXJyYXlCdWZmZXIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29vcmRzID0gZGF0YS5jb29yZHMubWFwKHBvbHkgPT4gcG9seS5tYXAocGFydCA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQubWFwKChbbG9uLCBsYXRdKSA9PiBNYXBSZW5kZXJlci50b19yYWRpYW5zKFtsb24gLyAxZTcsIGxhdCAvIDFlN10pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbl9jYWNoZVtsb2NhdGlvbl0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBsb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29yZHM6IGNvb3JkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiBjb29yZHMuZmxhdCgyKS5yZWR1Y2UoKGEsIGIpID0+IFtNYXRoLm1pbihhWzBdLCBiWzBdKSwgTWF0aC5taW4oYVsxXSwgYlsxXSldKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBjb29yZHMuZmxhdCgyKS5yZWR1Y2UoKGEsIGIpID0+IFtNYXRoLm1heChhWzBdLCBiWzBdKSwgTWF0aC5tYXgoYVsxXSwgYlsxXSldKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3X2Nvb3JkczogZGF0YS5jb29yZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25fY2FjaGVbbG9jYXRpb25dID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uX2NhY2hlW2xvY2F0aW9uXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBoYW5kbGVPcHRpb25DaGFuZ2UoZXZlbnQpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLmRhdGEgPSB7IC4uLnRoaXMuZGF0YSwgLi4udGhpcy5kYXRhLm9wdGlvbnNbb3B0aW9uXSwgb3B0aW9uX3NlbGVjdGVkOiBvcHRpb24gfTtcbiAgICB9XG5cbiAgICBoYW5kbGVEZXRhaWxzQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuZGV0YWlscyA9IGV2ZW50LnRhcmdldC5jaGVja2VkO1xuICAgIH1cblxuICAgIGhhbmRsZTNkQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIHRoaXMucmVuZGVyM2QgPSBldmVudC50YXJnZXQuY2hlY2tlZDtcbiAgICB9XG5cbiAgICBkcmF3TWFwKGxvY2F0aW9uc19kYXRhKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoZGF0YT8ubG9jYXRpb25zPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBkYXRhLnRpdGxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjb2xvcl9kYXRhID0gZGF0YS5kYXRhLm1hcChyb3cgPT4gZGF0YS5jb2xvcl91c2luZyA/IGRhdGEuY29sb3JfdXNpbmcubWFwKGVsID0+IHJvd1tlbF0pIDogcm93KTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZjb2xvciA9IE1hcFJlbmRlcmVyLnBhcnNlQ29sb3IoZGF0YS5kZWZjb2xvciB8fCBcIiNmZmZmZmZcIik7XG4gICAgICAgICAgICAgICAgbGV0IGNvbG9ycztcbiAgICAgICAgICAgICAgICBpZiAoY29sb3JfZGF0YT8uWzBdPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heF9kYXRhID0gY29sb3JfZGF0YS5yZWR1Y2UoKGEsIGIpID0+IGEubWFwKChlbCwgaSkgPT4gTWF0aC5tYXgoZWwsIGJbaV0pKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pbl9kYXRhID0gY29sb3JfZGF0YS5yZWR1Y2UoKGEsIGIpID0+IGEubWFwKChlbCwgaSkgPT4gTWF0aC5taW4oZWwsIGJbaV0pKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9ycyA9IGNvbG9yX2RhdGEubWFwKGRhdGFfdmVjID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhX3ZlYy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gTWFwUmVuZGVyZXIucGFyc2VDb2xvcihkYXRhLmNvbG9yc1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IE1hcFJlbmRlcmVyLmNvbG9yUHJvcFNjYWxlKG1hcEZyb21UbyhkYXRhX3ZlY1swXSwgbWluX2RhdGFbMF0sIG1heF9kYXRhWzBdLCAwLCAxKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hcFJlbmRlcmVyLmJsZW5kQ29sb3JzKFtjb2xvciwgZGVmY29sb3JdLCBbcHJvcCwgMSAtIHByb3BdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VtID0gZGF0YV92ZWMucmVkdWNlKChhLCBiKSA9PiBhICsgYik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3JzID0gZGF0YS5jb2xvcnMubWFwKGNvbCA9PiBNYXBSZW5kZXJlci5wYXJzZUNvbG9yKGNvbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3AgPSBkYXRhX3ZlYy5tYXAoZWwgPT4gKHN1bSAhPT0gMCA/IGVsIC8gc3VtIDogMSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXBSZW5kZXJlci5ibGVuZENvbG9ycyhjb2xvcnMsIHByb3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2xvcnMgPSBkYXRhLmxvY2F0aW9ucy5tYXAoKCkgPT4gZGVmY29sb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhdGlvbnMgPSBsb2NhdGlvbnNfZGF0YVxuICAgICAgICAgICAgICAgICAgICAubWFwKChsb2MsIGkpID0+IGxvYyA/IHsgLi4ubG9jLCBjb2xvcjogY29sb3JzW2ldLCBkYXRhOiBkYXRhLmRhdGFbaV0sIGNvbHVtbnM6IGRhdGEuY29sdW1ucyB9IDogbnVsbClcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihsb2MgPT4gbG9jKTtcbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb25zLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdObyBkYXRhJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YV9taW4gPSBjb2xvcl9kYXRhLnJlZHVjZSgoYSwgYikgPT4gYS5tYXAoKGVsLCBpKSA9PiBNYXRoLm1pbihlbCwgYltpXSkpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhX21heCA9IGNvbG9yX2RhdGEucmVkdWNlKChhLCBiKSA9PiBhLm1hcCgoZWwsIGkpID0+IE1hdGgubWF4KGVsLCBiW2ldKSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBodG1sYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBpZD1cIm1hcC13cmFwcGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIEB3aGVlbD1cIiR7dGhpcy5oYW5kbGVTY3JvbGx9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIEBtb3VzZWRvd249XCIke3RoaXMuaGFuZGxlRHJhZ1N0YXJ0fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBAdG91Y2hzdGFydD1cIiR7dGhpcy5oYW5kbGVUb3VjaFN0YXJ0fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBAdG91Y2htb3ZlPVwiJHt0aGlzLmhhbmRsZVRvdWNoTW92ZX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgQHRvdWNoZW5kPVwiJHt0aGlzLmhhbmRsZVRvdWNoRW5kfVwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5kZXRhaWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiaW5mby1ib3gtd3JhcHBlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cImluZm8tYm94LWJhY2tncm91bmRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJpbmZvLWJveFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJpbmZvLWJveC1uYW1lXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tZmllbGRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkYXRhLmNvbHVtbnMubWFwKGNvbCA9PiAoaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5mby1maWVsZC1uYW1lXCI+JHtjb2x9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmZvLWZpZWxkLXZhbHVlXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogaHRtbGBgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAke2NhY2hlKHRoaXMucmVuZGVyM2RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtYXAtYmFja2VuZC0zZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJtYXAtYmFja2VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubG9jYXRpb25zPVwiJHtsb2NhdGlvbnN9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBob3Zlcj1cIiR7dGhpcy5oYW5kbGVMb2NhdGlvbkhvdmVyfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L21hcC1iYWNrZW5kLTNkPmBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtYXAtYmFja2VuZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJtYXAtYmFja2VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubG9jYXRpb25zPVwiJHtsb2NhdGlvbnN9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBob3Zlcj1cIiR7dGhpcy5oYW5kbGVMb2NhdGlvbkhvdmVyfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L21hcC1iYWNrZW5kPmBcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIj4ke2RhdGEudGl0bGV9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJvcHRpb24tYm94XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImRldGFpbHNcIiA/Y2hlY2tlZD0ke3RoaXMuZGV0YWlsc30gQGNoYW5nZT0ke3RoaXMuaGFuZGxlRGV0YWlsc0NoYW5nZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImRldGFpbHNcIj5EZXRhaWxzPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgJHt0aGlzLmRhdGEuYWxsb3dfM2QgJiYgaGFzV2ViR2xTdXBwb3J0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJyZW5kZXIzZFwiID9jaGVja2VkPSR7dGhpcy5yZW5kZXIzZH0gQGNoYW5nZT0ke3RoaXMuaGFuZGxlM2RDaGFuZ2V9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInJlbmRlcjNkXCI+M0Q8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBodG1sYGBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJtYXAtbGVnZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3VycmVudC1sZWdlbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7Y29sb3JfZGF0YT8uWzBdPy5sZW5ndGggPiAxXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChkYXRhLmNvbG9ycy5tYXAoKGNvbCwgaSkgPT4gKGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGVnZW5kLWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbG9yLWJsb2NrXCIgc3R5bGU9XCIke3N0eWxlTWFwKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBjb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsZWdlbmQtbGFiZWxcIj4ke2RhdGEuY29sb3JfdXNpbmcgPyBkYXRhLmNvbHVtbnNbZGF0YS5jb2xvcl91c2luZ1tpXV0gOiBkYXRhLmNvbG9yX3VzaW5nW2ldfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgICkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAoZGF0YS5jb2xvcnMubGVuZ3RoID49IDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZWdlbmQtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEub3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGVnZW5kLWxhYmVsXCI+JHtkYXRhLmNvbG9yX3VzaW5nID8gZGF0YS5jb2x1bW5zW2RhdGEuY29sb3JfdXNpbmdbMF1dIDogZGF0YS5jb2xvcl91c2luZ1swXX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29sb3ItZ3JhZGlhbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7KE1hdGgucm91bmQoZGF0YV9tYXhbMF0gKiAxMDApIC8gMTAwKS50b0xvY2FsZVN0cmluZygpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2NhbGVcIiBzdHlsZT1cIiR7c3R5bGVNYXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogYGxpbmVhci1ncmFkaWVudCgke2RhdGEuY29sb3JzWzBdfSwke2RhdGEuZGVmY29sb3J9KWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7KE1hdGgucm91bmQoZGF0YV9taW5bMF0gKiAxMDApIC8gMTAwKS50b0xvY2FsZVN0cmluZygpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEub3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInNlbGVjdC1vcHRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNoYW5nZT1cIiR7dGhpcy5oYW5kbGVPcHRpb25DaGFuZ2V9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPiR7ZGF0YS5vcHRpb25zLm1hcCgob3B0aW9uLCBpKSA9PiBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9XCIke2l9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgP3NlbGVjdGVkPVwiJHtpID09IGRhdGEub3B0aW9uX3NlbGVjdGVkfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPiR7b3B0aW9uLm5hbWV9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH08L3NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnTm8gZGF0YSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBodG1sYDxkaXYgY2xhc3M9XCJuby1kYXRhXCI+Tm8gZGF0YTwvZGl2PmBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgY2FjaGVkID0gTWFwUmVuZGVyZXIuZ2V0Q2FjaGVkTG9jYXRpb25zKHRoaXMuZGF0YS5sb2NhdGlvbnMpO1xuICAgICAgICBpZiAoY2FjaGVkLmluY2x1ZGVzKG51bGwpKSB7XG4gICAgICAgICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwibWFwLXJlbmRlcmVyLXJvb3RcIj5cbiAgICAgICAgICAgICAgICAgICAgJHt1bnRpbChcbiAgICAgICAgICAgICAgICAgICAgICAgIChhc3luYyAoKSA9PiB0aGlzLmRyYXdNYXAoYXdhaXQgTWFwUmVuZGVyZXIuZ2V0TG9jYXRpb25zKHRoaXMuZGF0YS5sb2NhdGlvbnMpKSkoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxgPHVpLXNwaW5uZXI+PC91aS1zcGlubmVyPmBcbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwibWFwLXJlbmRlcmVyLXJvb3RcIj5cbiAgICAgICAgICAgICAgICAgICAgJHt0aGlzLmRyYXdNYXAoY2FjaGVkKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGA7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbWFwLXJlbmRlcmVyJywgTWFwUmVuZGVyZXIpO1xuIiwiXG5pbXBvcnQgeyBjc3MsIGh0bWwsIExpdEVsZW1lbnQsIHVuc2FmZUNTUyB9IGZyb20gJ2xpdCdcblxuY29uc3QgTlVNX0VMRU0gPSAxMDtcblxuY2xhc3MgU3Bpbm5lciBleHRlbmRzIExpdEVsZW1lbnQge1xuXG4gICAgc3RhdGljIGdldCBzdHlsZXMoKSB7XG4gICAgICAgIHJldHVybiBjc3NgXG4gICAgICAgICAgICBzcGFuLnVpLXNwaW5uZXIge1xuICAgICAgICAgICAgICAgIHdpZHRoOiA1cmVtO1xuICAgICAgICAgICAgICAgIGhlaWdodDogNXJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LWhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzcGFuLnVpLXNwaW5uZXIgc3BhbiB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnkpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEBrZXlmcmFtZXMgdWktc3Bpbm5lci1rZXlmcmFtZXMge1xuICAgICAgICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDEwMCUge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICR7dW5zYWZlQ1NTKFsuLi5BcnJheShOVU1fRUxFTSkua2V5cygpXS5tYXAoKGkpID0+IChjc3NgXG4gICAgICAgICAgICAgICAgc3Bhbi51aS1zcGlubmVyIHNwYW46bnRoLWNoaWxkKCR7dW5zYWZlQ1NTKGkgKyAxKX0pIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiAxcyBjYWxjKDAuMDJzICogJHt1bnNhZmVDU1MoaSArIDEpfSkgZWFzZS1pbi1vdXQgaW5maW5pdGUgdWktc3Bpbm5lci1rZXlmcmFtZXM7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBjYWxjKDI1JSAtIDElICogJHt1bnNhZmVDU1MoaSArIDEpfSk7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogY2FsYygyNSUgLSAxJSAqICR7dW5zYWZlQ1NTKGkgKyAxKX0pO1xuICAgICAgICAgICAgICAgICAgICB0b3A6IGNhbGMoNTAlIC0gKDI1JSAtIDElICogJHt1bnNhZmVDU1MoaSArIDEpfSkgLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMCU7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46ICR7dW5zYWZlQ1NTKCg1MCAqIDEwMCAvICgyNSAtIDEgKiAoaSArIDEpKSkgKyAnJScpfSA1MCU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYCkpLmpvaW4oJycpKX1cbiAgICAgICAgYDtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBodG1sYFxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ1aS1zcGlubmVyXCI+XG4gICAgICAgICAgICAgICAgJHtbLi4uQXJyYXkoTlVNX0VMRU0pLmtleXMoKV0ubWFwKCgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgaHRtbGA8c3Bhbj48L3NwYW4+YFxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICBgO1xuICAgIH1cblxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3VpLXNwaW5uZXInLCBTcGlubmVyKTtcbiIsIlxuZXhwb3J0IGZ1bmN0aW9uIG1hcCh2YWx1ZSwgbWluX2luLCBtYXhfaW4sIG1pbl9vdXQsIG1heF9vdXQpIHtcbiAgICBpZihtaW5faW4gPT09IG1heF9pbikge1xuICAgICAgICByZXR1cm4gbWF4X291dDtcbiAgICB9IGVsc2UgaWYodmFsdWUgPCBtaW5faW4pIHtcbiAgICAgICAgcmV0dXJuIG1pbl9vdXQ7XG4gICAgfSBlbHNlIGlmKHZhbHVlID4gbWF4X2luKSB7XG4gICAgICAgIHJldHVybiBtYXhfb3V0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAodmFsdWUgLSBtaW5faW4pIC8gKG1heF9pbiAtIG1pbl9pbikgKiAobWF4X291dCAtIG1pbl9vdXQpICsgbWluX291dDtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNXZWJHbFN1cHBvcnQoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcpIHx8IGNhbnZhcy5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnKTtcbiAgICAgICAgcmV0dXJuIGN0eDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiaGFzV2ViR2xTdXBwb3J0IiwibG9jYXRpb25fY2FjaGUiLCJNYXBSZW5kZXJlciIsInJlbmRlcjNkIiwiZGV0YWlscyIsImV2ZW50IiwidGhpcyIsImluZm9fYm94Iiwic2hhZG93Um9vdCIsImdldEVsZW1lbnRCeUlkIiwibG9jYXRpb24iLCJwb3NpdGlvbiIsIm5hbWUiLCJtYXBfd3JhcHBlciIsImlubmVyVGV4dCIsInNwbGl0IiwiQXJyYXkiLCJmcm9tIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImZvckVhY2giLCJlbCIsImkiLCJNYXRoIiwicm91bmQiLCJkYXRhIiwidG9Mb2NhbGVTdHJpbmciLCJtYXBfd3JhcHBlcl9wb3MiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ4IiwieSIsIm1pbiIsIm1heCIsImhlaWdodCIsInN0eWxlIiwic2V0UHJvcGVydHkiLCJ3aWR0aCIsImNsaWVudEhlaWdodCIsImxlZnQiLCJ0b3AiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbmZvX2JveF9wb3MiLCJjdXJyZW50X2xvY2F0aW9uIiwicmVtb3ZlIiwicHJldmVudERlZmF1bHQiLCJtYXAiLCJuZXdfc2NhbGUiLCJzY2FsZSIsImRlbHRhWSIsIm1hcEZyb21UbyIsImRzIiwiY2VudGVyIiwicG9pbnRlciIsImNsaWVudFBvc1RvTWFwUG9zIiwiY2xpZW50WCIsImNsaWVudFkiLCJkZWx0YSIsIm5ld19jZW50ZXIiLCJzZXRDZW50ZXJBbmRTY2FsZSIsImVsZW1lbnRfd3JhcCIsImxhc3RfZHJhZ19wb3MiLCJvbm1vdXNldXAiLCJoYW5kbGVEcmFnRW5kIiwiYmluZCIsIm9ubW91c2VsZWF2ZSIsIm9ubW91c2Vtb3ZlIiwiaGFuZGxlRHJhZ01vdmUiLCJjdXJzb3IiLCJsYXN0X21hcF9wb3MiLCJjdXJyZW50X21hcF9wb3MiLCJkaWZmIiwidG91Y2hlcyIsImxlbmd0aCIsImF2Z190b3VjaF9wb3MiLCJ0b3VjaCIsInJlZHVjZSIsImEiLCJiIiwidG91Y2hfYXJyYXkiLCJ0b3VjaF9kaXN0IiwibmV3X3RvdWNoX3BvcyIsInRvdWNoX2RpZmYiLCJuZXdfdG91Y2hfZGlzdCIsIm9wdGlvbiIsInRhcmdldCIsInZhbHVlIiwib3B0aW9ucyIsIm9wdGlvbl9zZWxlY3RlZCIsImNoZWNrZWQiLCJsb2NhdGlvbnNfZGF0YSIsImxvY2F0aW9ucyIsInRpdGxlIiwiZG9jdW1lbnQiLCJjb2xvcnMiLCJjb2xvcl9kYXRhIiwicm93IiwiY29sb3JfdXNpbmciLCJkZWZjb2xvciIsInBhcnNlQ29sb3IiLCJtYXhfZGF0YSIsIm1pbl9kYXRhIiwiZGF0YV92ZWMiLCJjb2xvciIsInByb3AiLCJjb2xvclByb3BTY2FsZSIsImJsZW5kQ29sb3JzIiwic3VtIiwiY29sIiwibG9jIiwiY29sdW1ucyIsImZpbHRlciIsImRhdGFfbWluIiwiZGF0YV9tYXgiLCJodG1sIiwiaGFuZGxlU2Nyb2xsIiwiaGFuZGxlRHJhZ1N0YXJ0IiwiaGFuZGxlVG91Y2hTdGFydCIsImhhbmRsZVRvdWNoTW92ZSIsImhhbmRsZVRvdWNoRW5kIiwiY2FjaGUiLCJoYW5kbGVMb2NhdGlvbkhvdmVyIiwiaGFuZGxlRGV0YWlsc0NoYW5nZSIsImFsbG93XzNkIiwiaGFuZGxlM2RDaGFuZ2UiLCJzdHlsZU1hcCIsImJhY2tncm91bmQiLCJoYW5kbGVPcHRpb25DaGFuZ2UiLCJlIiwiY2FjaGVkIiwiZ2V0Q2FjaGVkTG9jYXRpb25zIiwiaW5jbHVkZXMiLCJ1bnRpbCIsImdldExvY2F0aW9ucyIsImRyYXdNYXAiLCJ0eXBlIiwiT2JqZWN0Iiwic3RhdGUiLCJjc3MiLCJhcnJheV9idWZmZXIiLCJ1aW50OF9hcnJheSIsIlVpbnQ4QXJyYXkiLCJsZW4iLCJzdHJpbmdfcGFydCIsInV0ZjhfZGVjb2RlciIsIlRleHREZWNvZGVyIiwiZGF0YV92aWV3IiwiRGF0YVZpZXciLCJjb29yZHMiLCJudW1fcG9seSIsImdldFVpbnQzMiIsInAiLCJwdXNoIiwibnVtX3BhdGgiLCJ0IiwibnVtX2NvcmRzIiwiYyIsImxvbiIsImdldEludDMyIiwibGF0IiwiZGVjb2RlIiwiUEkiLCJhYnMiLCJzaWduIiwicGhpIiwibG9nIiwidGFuIiwic3RyIiwibWF0Y2giLCJwYXJzZUludCIsInByb3BvcnRpb24iLCJyZXQiLCJqIiwic3FydCIsImxvZzEwIiwiUHJvbWlzZSIsImFsbCIsImZldGNoIiwicmVzIiwib2siLCJhcnJheUJ1ZmZlciIsInBhcnNlQmluYXJ5RGF0YSIsInBvbHkiLCJwYXJ0IiwidG9fcmFkaWFucyIsImlkIiwiZmxhdCIsInJhd19jb29yZHMiLCJMaXRFbGVtZW50IiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJTcGlubmVyIiwia2V5cyIsInVuc2FmZUNTUyIsImpvaW4iLCJtaW5faW4iLCJtYXhfaW4iLCJtaW5fb3V0IiwibWF4X291dCIsImNhbnZhcyIsImNyZWF0ZUVsZW1lbnQiLCJnZXRDb250ZXh0Il0sInNvdXJjZVJvb3QiOiIifQ==